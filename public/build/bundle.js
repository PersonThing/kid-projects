var app=function(){"use strict";function t(){}function e(t,e){for(const n in e)t[n]=e[n];return t}function n(t){return t()}function l(){return Object.create(null)}function r(t){t.forEach(n)}function o(t){return"function"==typeof t}function c(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function i(e,...n){if(null==e)return t;const l=e.subscribe(...n);return l.unsubscribe?()=>l.unsubscribe():l}function s(t,e,n){t.$$.on_destroy.push(i(e,n))}function a(t,e,n,l){if(t){const r=u(t,e,n,l);return t[0](r)}}function u(t,n,l,r){return t[1]&&r?e(l.ctx.slice(),t[1](r(n))):l.ctx}function f(t,e,n,l,r,o,c){const i=function(t,e,n,l){if(t[2]&&l){const r=t[2](l(n));if(void 0===e.dirty)return r;if("object"==typeof r){const t=[],n=Math.max(e.dirty.length,r.length);for(let l=0;l<n;l+=1)t[l]=e.dirty[l]|r[l];return t}return e.dirty|r}return e.dirty}(e,l,r,o);if(i){const r=u(e,n,l,c);t.p(r,i)}}function p(t,e,n=e){return t.set(n),e}function $(t,e){t.appendChild(e)}function m(t,e,n){t.insertBefore(e,n||null)}function d(t){t.parentNode.removeChild(t)}function h(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function g(t){return document.createElement(t)}function v(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function y(t){return document.createTextNode(t)}function b(){return y(" ")}function x(){return y("")}function w(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function k(t){return function(e){return e.preventDefault(),t.call(this,e)}}function S(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function O(t){return""===t?void 0:+t}function N(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function H(t,e){t.value=null==e?"":e}function M(t,e,n,l){t.style.setProperty(e,n,l?"important":"")}function j(t,e,n){t.classList[n?"add":"remove"](e)}let V;function C(t){V=t}function E(){if(!V)throw new Error("Function called outside component initialization");return V}function A(){const t=E();return(e,n)=>{const l=t.$$.callbacks[e];if(l){const r=function(t,e){const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}(e,n);l.slice().forEach(e=>{e.call(t,r)})}}}function D(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(t=>t(e))}const _=[],J=[],R=[],I=[],T=Promise.resolve();let B=!1;function K(){B||(B=!0,T.then(G))}function z(){return K(),T}function L(t){R.push(t)}function U(t){I.push(t)}let P=!1;const F=new Set;function G(){if(!P){P=!0;do{for(let t=0;t<_.length;t+=1){const e=_[t];C(e),q(e.$$)}for(_.length=0;J.length;)J.pop()();for(let t=0;t<R.length;t+=1){const e=R[t];F.has(e)||(F.add(e),e())}R.length=0}while(_.length);for(;I.length;)I.pop()();B=!1,P=!1,F.clear()}}function q(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(L)}}const Z=new Set;let W;function X(){W={r:0,c:[],p:W}}function Y(){W.r||r(W.c),W=W.p}function Q(t,e){t&&t.i&&(Z.delete(t),t.i(e))}function tt(t,e,n,l){if(t&&t.o){if(Z.has(t))return;Z.add(t),W.c.push(()=>{Z.delete(t),l&&(n&&t.d(1),l())}),t.o(e)}}const et="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function nt(t,e){const n={},l={},r={$$scope:1};let o=t.length;for(;o--;){const c=t[o],i=e[o];if(i){for(const t in c)t in i||(l[t]=1);for(const t in i)r[t]||(n[t]=i[t],r[t]=1);t[o]=i}else for(const t in c)r[t]=1}for(const t in l)t in n||(n[t]=void 0);return n}function lt(t){return"object"==typeof t&&null!==t?t:{}}function rt(t,e,n){const l=t.$$.props[e];void 0!==l&&(t.$$.bound[l]=n,n(t.$$.ctx[l]))}function ot(t){t&&t.c()}function ct(t,e,l){const{fragment:c,on_mount:i,on_destroy:s,after_update:a}=t.$$;c&&c.m(e,l),L(()=>{const e=i.map(n).filter(o);s?s.push(...e):r(e),t.$$.on_mount=[]}),a.forEach(L)}function it(t,e){const n=t.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function st(e,n,o,c,i,s,a=[-1]){const u=V;C(e);const f=n.props||{},p=e.$$={fragment:null,ctx:null,props:s,update:t,not_equal:i,bound:l(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(u?u.$$.context:[]),callbacks:l(),dirty:a,skip_bound:!1};let $=!1;if(p.ctx=o?o(e,f,(t,n,...l)=>{const r=l.length?l[0]:n;return p.ctx&&i(p.ctx[t],p.ctx[t]=r)&&(!p.skip_bound&&p.bound[t]&&p.bound[t](r),$&&function(t,e){-1===t.$$.dirty[0]&&(_.push(t),K(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}(e,t)),n}):[],p.update(),$=!0,r(p.before_update),p.fragment=!!c&&c(p.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);p.fragment&&p.fragment.l(t),t.forEach(d)}else p.fragment&&p.fragment.c();n.intro&&Q(e.$$.fragment),ct(e,n.target,n.anchor),G()}C(u)}class at{$destroy(){it(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const ut=[];function ft(t,e){return{subscribe:pt(t,e).subscribe}}function pt(e,n=t){let l;const r=[];function o(t){if(c(e,t)&&(e=t,l)){const t=!ut.length;for(let t=0;t<r.length;t+=1){const n=r[t];n[1](),ut.push(n,e)}if(t){for(let t=0;t<ut.length;t+=2)ut[t][0](ut[t+1]);ut.length=0}}}return{set:o,update:function(t){o(t(e))},subscribe:function(c,i=t){const s=[c,i];return r.push(s),1===r.length&&(l=n(o)||t),c(e),()=>{const t=r.indexOf(s);-1!==t&&r.splice(t,1),0===r.length&&(l(),l=null)}}}}function $t(e,n,l){const c=!Array.isArray(e),s=c?[e]:e,a=n.length<2;return ft(l,e=>{let l=!1;const u=[];let f=0,p=t;const $=()=>{if(f)return;p();const l=n(c?u[0]:u,e);a?e(l):p=o(l)?l:t},m=s.map((t,e)=>i(t,t=>{u[e]=t,f&=~(1<<e),l&&$()},()=>{f|=1<<e}));return l=!0,$(),function(){r(m),p()}})}function mt(t){let e,n,l;var r=t[0];return r&&(e=new r({}),e.$on("routeEvent",t[5])),{c(){e&&ot(e.$$.fragment),n=x()},m(t,r){e&&ct(e,t,r),m(t,n,r),l=!0},p(t,l){if(r!==(r=t[0])){if(e){X();const t=e;tt(t.$$.fragment,1,0,()=>{it(t,1)}),Y()}r?(e=new r({}),e.$on("routeEvent",t[5]),ot(e.$$.fragment),Q(e.$$.fragment,1),ct(e,n.parentNode,n)):e=null}},i(t){l||(e&&Q(e.$$.fragment,t),l=!0)},o(t){e&&tt(e.$$.fragment,t),l=!1},d(t){t&&d(n),e&&it(e,t)}}}function dt(t){let e,n,l;var r=t[0];function o(t){return{props:{params:t[1]}}}return r&&(e=new r(o(t)),e.$on("routeEvent",t[4])),{c(){e&&ot(e.$$.fragment),n=x()},m(t,r){e&&ct(e,t,r),m(t,n,r),l=!0},p(t,l){const c={};if(2&l&&(c.params=t[1]),r!==(r=t[0])){if(e){X();const t=e;tt(t.$$.fragment,1,0,()=>{it(t,1)}),Y()}r?(e=new r(o(t)),e.$on("routeEvent",t[4]),ot(e.$$.fragment),Q(e.$$.fragment,1),ct(e,n.parentNode,n)):e=null}else r&&e.$set(c)},i(t){l||(e&&Q(e.$$.fragment,t),l=!0)},o(t){e&&tt(e.$$.fragment,t),l=!1},d(t){t&&d(n),e&&it(e,t)}}}function ht(t){let e,n,l,r;const o=[dt,mt],c=[];function i(t,e){return t[1]?0:1}return e=i(t),n=c[e]=o[e](t),{c(){n.c(),l=x()},m(t,n){c[e].m(t,n),m(t,l,n),r=!0},p(t,[r]){let s=e;e=i(t),e===s?c[e].p(t,r):(X(),tt(c[s],1,1,()=>{c[s]=null}),Y(),n=c[e],n||(n=c[e]=o[e](t),n.c()),Q(n,1),n.m(l.parentNode,l))},i(t){r||(Q(n),r=!0)},o(t){tt(n),r=!1},d(t){c[e].d(t),t&&d(l)}}}function gt(){const t=window.location.href.indexOf("#/");let e=t>-1?window.location.href.substr(t+1):"/";const n=e.indexOf("?");let l="";return n>-1&&(l=e.substr(n+1),e=e.substr(0,n)),{location:e,querystring:l}}const vt=ft(null,(function(t){t(gt());const e=()=>{t(gt())};return window.addEventListener("hashchange",e,!1),function(){window.removeEventListener("hashchange",e,!1)}}));$t(vt,t=>t.location),$t(vt,t=>t.querystring);function yt(t){if(!t||t.length<1||"/"!=t.charAt(0)&&0!==t.indexOf("#/"))throw Error("Invalid parameter location");return z().then(()=>{window.location.hash=("#"==t.charAt(0)?"":"#")+t})}function bt(e,n,l){let r,o=t;s(e,vt,t=>l(6,r=t)),e.$$.on_destroy.push(()=>o());let{routes:c={}}=n,{prefix:i=""}=n;class a{constructor(t,e){if(!e||"function"!=typeof e&&("object"!=typeof e||!0!==e._sveltesparouter))throw Error("Invalid component object");if(!t||"string"==typeof t&&(t.length<1||"/"!=t.charAt(0)&&"*"!=t.charAt(0))||"object"==typeof t&&!(t instanceof RegExp))throw Error('Invalid value for "path" argument');const{pattern:n,keys:l}=function(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var n,l,r,o,c=[],i="",s=t.split("/");for(s[0]||s.shift();r=s.shift();)"*"===(n=r[0])?(c.push("wild"),i+="/(.*)"):":"===n?(l=r.indexOf("?",1),o=r.indexOf(".",1),c.push(r.substring(1,~l?l:~o?o:r.length)),i+=~l&&!~o?"(?:/([^/]+?))?":"/([^/]+?)",~o&&(i+=(~l?"?":"")+"\\"+r.substring(o))):i+="/"+r;return{keys:c,pattern:new RegExp("^"+i+(e?"(?=$|/)":"/?$"),"i")}}(t);this.path=t,"object"==typeof e&&!0===e._sveltesparouter?(this.component=e.route,this.conditions=e.conditions||[],this.userData=e.userData):(this.component=e,this.conditions=[],this.userData=void 0),this._pattern=n,this._keys=l}match(t){i&&t.startsWith(i)&&(t=t.substr(i.length)||"/");const e=this._pattern.exec(t);if(null===e)return null;if(!1===this._keys)return e;const n={};let l=0;for(;l<this._keys.length;)n[this._keys[l]]=e[++l]||null;return n}checkConditions(t){for(let e=0;e<this.conditions.length;e++)if(!this.conditions[e](t))return!1;return!0}}const u=[];c instanceof Map?c.forEach((t,e)=>{u.push(new a(e,t))}):Object.keys(c).forEach(t=>{u.push(new a(t,c[t]))});let f=null,p=null;const $=A(),m=(t,e)=>{z().then(()=>{$(t,e)})};return e.$$set=t=>{"routes"in t&&l(2,c=t.routes),"prefix"in t&&l(3,i=t.prefix)},e.$$.update=()=>{if(65&e.$$.dirty){l(0,f=null);let t=0;for(;!f&&t<u.length;){const e=u[t].match(r.location);if(e){const n={component:u[t].component,name:u[t].component.name,location:r.location,querystring:r.querystring,userData:u[t].userData};if(!u[t].checkConditions(n)){m("conditionsFailed",n);break}l(0,f=u[t].component),e&&"object"==typeof e&&Object.keys(e).length?l(1,p=e):l(1,p=null),m("routeLoaded",n)}t++}}},[f,p,c,i,function(t){D(e,t)},function(t){D(e,t)}]}class xt extends at{constructor(t){super(),st(this,t,bt,ht,c,{routes:2,prefix:3})}}function wt(t,e,n){const l=document.createElement("canvas");l.width=2*e,l.height=2*n;const r=l.getContext("2d");for(let e=0;e<t.length;e++)for(let n=0;n<t[e].length;n++){const l=t[e][n];null!=l&&"transparent"!=l&&(r.beginPath(),r.rect(2*n,2*e,2,2),r.fillStyle=l,r.fill())}return l.toDataURL("image/png")}function kt(t,e){const n=localStorage.getItem(t),l=null!=n&&"null"!=n&&"undefined"!=n?JSON.parse(n):e,{subscribe:r,set:o,update:c}=pt(l);return{subscribe:r,set:function(e){o(e),localStorage.setItem(t,JSON.stringify(e))}}}var St=kt("pixel-drawings",{});function Ot(t){let e,n,l,r;return{c(){e=g("img"),e.src!==(n=t[0].png)&&S(e,"src",n),S(e,"alt",l=t[0].name),S(e,"title",r=t[0].name),M(e,"transform","rotate("+t[1]+"deg)")},m(t,n){m(t,e,n)},p(t,o){1&o&&e.src!==(n=t[0].png)&&S(e,"src",n),1&o&&l!==(l=t[0].name)&&S(e,"alt",l),1&o&&r!==(r=t[0].name)&&S(e,"title",r),2&o&&M(e,"transform","rotate("+t[1]+"deg)")},d(t){t&&d(e)}}}function Nt(e){let n,l=null!=e[0]&&null!=e[0].png&&Ot(e);return{c(){l&&l.c(),n=x()},m(t,e){l&&l.m(t,e),m(t,n,e)},p(t,[e]){null!=t[0]&&null!=t[0].png?l?l.p(t,e):(l=Ot(t),l.c(),l.m(n.parentNode,n)):l&&(l.d(1),l=null)},i:t,o:t,d(t){l&&l.d(t),t&&d(n)}}}function Ht(t,e,n){let l;s(t,St,t=>n(5,l=t));let r,o,{name:c}=e,{spin:i=!1}=e,a=0;return t.$$set=t=>{"name"in t&&n(2,c=t.name),"spin"in t&&n(3,i=t.spin)},t.$$.update=()=>{37&t.$$.dirty&&null!=c&&(n(0,r=l[c]),null!=r&&null==r.png&&n(0,r.png=wt(r,r.width,r.height),r)),26&t.$$.dirty&&(i?n(4,o=setTimeout(()=>{n(1,a+=30)},25)):clearTimeout(o))},[r,a,c,i]}class Mt extends at{constructor(t){super(),st(this,t,Ht,Nt,c,{name:2,spin:3})}}function jt(t,e,n){const l=t.slice();return l[9]=e[n],l}function Vt(t,e,n){const l=t.slice();return l[6]=e[n],l}function Ct(t){let e,n,l,r,o,c,i,s=Object.keys(t[2]),a=[];for(let e=0;e<s.length;e+=1)a[e]=Et(jt(t,s,e));const u=t=>tt(a[t],1,1,()=>{a[t]=null});return{c(){e=g("div"),n=g("a"),l=y("+ New"),o=b();for(let t=0;t<a.length;t+=1)a[t].c();c=b(),S(n,"href",r=_t+"/"+t[6].name+"/new"),S(n,"class","list-group-item list-group-item-action svelte-1711lkh"),j(n,"list-group-item-success",null==t[2][t[1]]),S(e,"class","list-group sub-nav svelte-1711lkh")},m(t,r){m(t,e,r),$(e,n),$(n,l),$(e,o);for(let t=0;t<a.length;t+=1)a[t].m(e,null);$(e,c),i=!0},p(t,l){if(6&l&&j(n,"list-group-item-success",null==t[2][t[1]]),14&l){let n;for(s=Object.keys(t[2]),n=0;n<s.length;n+=1){const r=jt(t,s,n);a[n]?(a[n].p(r,l),Q(a[n],1)):(a[n]=Et(r),a[n].c(),Q(a[n],1),a[n].m(e,c))}for(X(),n=s.length;n<a.length;n+=1)u(n);Y()}},i(t){if(!i){for(let t=0;t<s.length;t+=1)Q(a[t]);i=!0}},o(t){a=a.filter(Boolean);for(let t=0;t<a.length;t+=1)tt(a[t]);i=!1},d(t){t&&d(e),h(a,t)}}}function Et(t){let e,n,l,r,o,c,i=t[9]+"";return n=new Mt({props:{name:t[2][t[9]][t[6].graphicKey]}}),{c(){e=g("a"),ot(n.$$.fragment),l=b(),r=y(i),S(e,"class","list-group-item list-group-item-action svelte-1711lkh"),S(e,"href",o=_t+"/"+t[6].name+"/"+t[9]),j(e,"active",t[1]==t[9])},m(t,o){m(t,e,o),ct(n,e,null),$(e,l),$(e,r),c=!0},p(t,l){const s={};4&l&&(s.name=t[2][t[9]][t[6].graphicKey]),n.$set(s),(!c||4&l)&&i!==(i=t[9]+"")&&N(r,i),(!c||4&l&&o!==(o=_t+"/"+t[6].name+"/"+t[9]))&&S(e,"href",o),6&l&&j(e,"active",t[1]==t[9])},i(t){c||(Q(n.$$.fragment,t),c=!0)},o(t){tt(n.$$.fragment,t),c=!1},d(t){t&&d(e),it(n)}}}function At(t){let e,n,l,r,o,c,i=t[6].name+"",s=t[6].name==t[0]&&Ct(t);return{c(){e=g("a"),n=y(i),r=b(),s&&s.c(),o=x(),S(e,"class","list-group-item list-group-item-action"),S(e,"href",l=_t+"/"+t[6].name+"/new"),j(e,"active",t[0]==t[6].name)},m(t,l){m(t,e,l),$(e,n),m(t,r,l),s&&s.m(t,l),m(t,o,l),c=!0},p(t,n){9&n&&j(e,"active",t[0]==t[6].name),t[6].name==t[0]?s?(s.p(t,n),1&n&&Q(s,1)):(s=Ct(t),s.c(),Q(s,1),s.m(o.parentNode,o)):s&&(X(),tt(s,1,1,()=>{s=null}),Y())},i(t){c||(Q(s),c=!0)},o(t){tt(s),c=!1},d(t){t&&d(e),t&&d(r),s&&s.d(t),t&&d(o)}}}function Dt(t){let e,n,l,r,o,c,i,s,u,p=t[3],v=[];for(let e=0;e<p.length;e+=1)v[e]=At(Vt(t,p,e));const x=t=>tt(v[t],1,1,()=>{v[t]=null}),w=t[5].default,k=a(w,t,t[4],null);return{c(){e=g("div"),n=g("div"),l=g("div"),r=g("a"),o=y("Art"),c=b();for(let t=0;t<v.length;t+=1)v[t].c();i=b(),s=g("div"),k&&k.c(),S(r,"class","list-group-item list-group-item-action"),S(r,"href",_t),j(r,"active","art"==t[0]),S(l,"class","list-group"),S(s,"class","flex-grow"),S(e,"class","flex align-top")},m(t,a){m(t,e,a),$(e,n),$(n,l),$(l,r),$(r,o),$(l,c);for(let t=0;t<v.length;t+=1)v[t].m(l,null);$(e,i),$(e,s),k&&k.m(s,null),u=!0},p(t,[e]){if(1&e&&j(r,"active","art"==t[0]),15&e){let n;for(p=t[3],n=0;n<p.length;n+=1){const r=Vt(t,p,n);v[n]?(v[n].p(r,e),Q(v[n],1)):(v[n]=At(r),v[n].c(),Q(v[n],1),v[n].m(l,null))}for(X(),n=p.length;n<v.length;n+=1)x(n);Y()}k&&k.p&&16&e&&f(k,w,t,t[4],e,null,null)},i(t){if(!u){for(let t=0;t<p.length;t+=1)Q(v[t]);Q(k,t),u=!0}},o(t){v=v.filter(Boolean);for(let t=0;t<v.length;t+=1)tt(v[t]);tt(k,t),u=!1},d(t){t&&d(e),h(v,t),k&&k.d(t)}}}const _t="#/level-builder";function Jt(t,e,n){let{tab:l}=e,{activeName:r}=e,{store:o}=e;let{$$slots:c={},$$scope:i}=e;return t.$$set=t=>{"tab"in t&&n(0,l=t.tab),"activeName"in t&&n(1,r=t.activeName),"store"in t&&n(2,o=t.store),"$$scope"in t&&n(4,i=t.$$scope)},[l,r,o,[{name:"blocks",graphicKey:"graphic"},{name:"characters",graphicKey:"graphicStill"},{name:"enemies",graphicKey:"graphicStill"},{name:"levels",graphicKey:null}],i,c]}class Rt extends at{constructor(t){super(),st(this,t,Jt,Dt,c,{tab:0,activeName:1,store:2})}}function It(t,e,n){const l=t.slice();return l[46]=e[n],l}function Tt(t,e,n){const l=t.slice();return l[43]=e[n],l}function Bt(t,e,n){const l=t.slice();return l[52]=e[n],l}function Kt(t,e,n){const l=t.slice();return l[49]=e[n],l}function zt(t,e,n){const l=t.slice();return l[55]=e[n],l}function Lt(t,e,n){const l=t.slice();return l[58]=e[n],l}function Ut(t){let e,n=t[9],l=[];for(let e=0;e<n.length;e+=1)l[e]=Pt(Lt(t,n,e));return{c(){e=g("div");for(let t=0;t<l.length;t+=1)l[t].c()},m(t,n){m(t,e,n);for(let t=0;t<l.length;t+=1)l[t].m(e,null)},p(t,r){if(25166337&r[0]){let o;for(n=t[9],o=0;o<n.length;o+=1){const c=Lt(t,n,o);l[o]?l[o].p(c,r):(l[o]=Pt(c),l[o].c(),l[o].m(e,null))}for(;o<l.length;o+=1)l[o].d(1);l.length=n.length}},d(t){t&&d(e),h(l,t)}}}function Pt(t){let e,n,l,o,c,i,s,a,u,f=t[58]+"";function p(...e){return t[29](t[58],...e)}function h(...e){return t[30](t[58],...e)}return{c(){e=g("div"),n=g("button"),l=y(f),c=b(),i=g("button"),i.textContent="x",s=b(),S(n,"type","button"),S(n,"class",o="btn btn-sm btn-"+(t[58]==t[0]?"primary active":"secondary")),S(i,"type","button"),S(i,"class","btn btn-sm btn-secondary"),S(e,"class","btn-group mr-1 mb-1")},m(t,r){m(t,e,r),$(e,n),$(n,l),$(e,c),$(e,i),$(e,s),a||(u=[w(n,"click",p),w(i,"click",h)],a=!0)},p(e,r){t=e,512&r[0]&&f!==(f=t[58]+"")&&N(l,f),513&r[0]&&o!==(o="btn btn-sm btn-"+(t[58]==t[0]?"primary active":"secondary"))&&S(n,"class",o)},d(t){t&&d(e),a=!1,r(u)}}}function Ft(t){let e,n,l;function r(...e){return t[36](t[55],...e)}return{c(){e=g("button"),S(e,"type","button"),M(e,"background","transparent"!=t[55]?t[55]:"linear-gradient(110deg, rgba(200,200,200,1) 45%, rgba(255,255,255,1) 55%, rgba(255,255,255,1) 100%)"),S(e,"class","svelte-1a4yczt"),j(e,"active",t[55]==t[1])},m(t,o){m(t,e,o),n||(l=w(e,"click",r),n=!0)},p(n,l){t=n,16386&l[0]&&j(e,"active",t[55]==t[1])},d(t){t&&d(e),n=!1,l()}}}function Gt(t){let e,n=[0,0],l=[];for(let e=0;e<2;e+=1)l[e]=Zt(Kt(t,n,e));return{c(){e=g("div");for(let t=0;t<2;t+=1)l[t].c();S(e,"class","ml-3")},m(t,n){m(t,e,n);for(let t=0;t<2;t+=1)l[t].m(e,null)},p(t,r){if(1024&r[0]){let o;for(n=[0,0],o=0;o<2;o+=1){const c=Kt(t,n,o);l[o]?l[o].p(c,r):(l[o]=Zt(c),l[o].c(),l[o].m(e,null))}for(;o<2;o+=1)l[o].d(1)}},d(t){t&&d(e),h(l,t)}}}function qt(t){let e,n;return{c(){e=g("img"),e.src!==(n=t[10])&&S(e,"src",n),S(e,"alt","block repeating preview")},m(t,n){m(t,e,n)},p(t,l){1024&l[0]&&e.src!==(n=t[10])&&S(e,"src",n)},d(t){t&&d(e)}}}function Zt(t){let e,n,l=[0,0,0,0],r=[];for(let e=0;e<4;e+=1)r[e]=qt(Bt(t,l,e));return{c(){e=g("div");for(let t=0;t<4;t+=1)r[t].c();n=b()},m(t,l){m(t,e,l);for(let t=0;t<4;t+=1)r[t].m(e,null);$(e,n)},p(t,o){if(1024&o[0]){let c;for(l=[0,0,0,0],c=0;c<4;c+=1){const i=Bt(t,l,c);r[c]?r[c].p(i,o):(r[c]=qt(i),r[c].c(),r[c].m(e,n))}for(;c<4;c+=1)r[c].d(1)}},d(t){t&&d(e),h(r,t)}}}function Wt(t){let e,n,l,r,o,c;return{c(){e=v("rect"),S(e,"y",n=t[43]*t[2]),S(e,"x",l=t[46]*t[2]),M(e,"fill",te(t[8],t[43],t[46])),S(e,"width",t[2]),S(e,"height",t[2]),S(e,"data-row",r=t[43]),S(e,"data-column",o=t[46]),S(e,"stroke",c=t[7]?"#eee":null)},m(t,n){m(t,e,n)},p(t,i){2052&i[0]&&n!==(n=t[43]*t[2])&&S(e,"y",n),4100&i[0]&&l!==(l=t[46]*t[2])&&S(e,"x",l),6400&i[0]&&M(e,"fill",te(t[8],t[43],t[46])),4&i[0]&&S(e,"width",t[2]),4&i[0]&&S(e,"height",t[2]),2048&i[0]&&r!==(r=t[43])&&S(e,"data-row",r),4096&i[0]&&o!==(o=t[46])&&S(e,"data-column",o),128&i[0]&&c!==(c=t[7]?"#eee":null)&&S(e,"stroke",c)},d(t){t&&d(e)}}}function Xt(t){let e,n=t[12],l=[];for(let e=0;e<n.length;e+=1)l[e]=Wt(It(t,n,e));return{c(){for(let t=0;t<l.length;t+=1)l[t].c();e=x()},m(t,n){for(let e=0;e<l.length;e+=1)l[e].m(t,n);m(t,e,n)},p(t,r){if(6532&r[0]){let o;for(n=t[12],o=0;o<n.length;o+=1){const c=It(t,n,o);l[o]?l[o].p(c,r):(l[o]=Wt(c),l[o].c(),l[o].m(e.parentNode,e))}for(;o<l.length;o+=1)l[o].d(1);l.length=n.length}},d(t){h(l,t),t&&d(e)}}}function Yt(t){let e,n,l,o,c,i,s,a,u,f,p,x,M,j,V,C,E,A,D,_,J,R,I,T,B,K,z,L,U,P,F,G,q,Z,W,X,Y,Q,tt,et,nt,lt,rt,ot,ct,it,st,at,ut,ft,pt,$t,mt,dt,ht,gt,vt=t[5].length+"",yt=t[6].length+"",bt=t[9].length&&Ut(t),xt=t[14],wt=[];for(let e=0;e<xt.length;e+=1)wt[e]=Ft(zt(t,xt,e));let kt=20==t[4]&&20==t[3]&&Gt(t),St=t[11],Ot=[];for(let e=0;e<St.length;e+=1)Ot[e]=Xt(Tt(t,St,e));return{c(){bt&&bt.c(),e=b(),n=g("div"),l=g("button"),l.textContent="Save",o=b(),c=g("button"),c.textContent="Reset",i=b(),s=g("div"),a=g("button"),a.textContent="Flip horizontal",u=b(),f=g("button"),f.textContent="Flip vertical",p=b(),x=g("div"),M=g("button"),j=y("Undo "),V=y(vt),E=b(),A=g("button"),D=y("Redo "),_=y(yt),R=b(),I=g("div"),T=y("Grid size\r\n\t\t\t"),B=g("input"),K=b(),z=g("div"),L=y("Height\r\n\t\t\t"),U=g("input"),P=b(),F=g("div"),G=y("Width\r\n\t\t\t"),q=g("input"),Z=b(),W=g("label"),X=g("input"),Y=y("\r\n\t\t\tShow grid"),Q=b(),tt=g("div"),et=g("div"),nt=g("div");for(let t=0;t<wt.length;t+=1)wt[t].c();lt=b(),rt=g("div"),ot=g("div"),ct=y("Preview at in-game size / repeated next to same graphic:\r\n\t\t\t\t"),it=g("div"),st=g("div"),at=g("img"),ft=b(),kt&&kt.c(),pt=b(),$t=v("svg");for(let t=0;t<Ot.length;t+=1)Ot[t].c();S(l,"type","button"),S(l,"class","btn btn-success btn-sm mr-2"),S(c,"type","button"),S(c,"class","btn btn-secondary btn-sm"),S(a,"type","button"),S(a,"class","btn btn-secondary btn-sm"),S(f,"type","button"),S(f,"class","btn btn-secondary btn-sm"),S(s,"class","btn-group"),S(M,"type","button"),M.disabled=C=0==t[5].length,S(M,"class","btn btn-default btn-sm"),S(A,"type","button"),A.disabled=J=0==t[6].length,S(A,"class","btn btn-default btn-sm"),S(x,"class","btn-group"),S(B,"type","number"),S(B,"min","15"),S(B,"max","50"),S(B,"step","5"),S(B,"class","svelte-1a4yczt"),S(U,"type","number"),S(U,"placeholder","Height"),S(U,"class","svelte-1a4yczt"),S(q,"type","number"),S(q,"placeholder","Width"),S(q,"class","svelte-1a4yczt"),S(X,"type","checkbox"),S(n,"class","flex my-3 svelte-1a4yczt"),S(nt,"class","color-picker svelte-1a4yczt"),S(et,"class","controls"),at.src!==(ut=t[10])&&S(at,"src",ut),S(at,"alt","preview"),S(it,"class","p-3 preview-bg flex svelte-1a4yczt"),S(ot,"class","my-1"),S($t,"class","preview-bg svelte-1a4yczt"),S($t,"width",mt=t[4]*(t[2]+1)),S($t,"height",dt=t[3]*(t[2]+1)),S(rt,"class","flex-grow "),S(tt,"class","flex align-top")},m(r,d){bt&&bt.m(r,d),m(r,e,d),m(r,n,d),$(n,l),$(n,o),$(n,c),$(n,i),$(n,s),$(s,a),$(s,u),$(s,f),$(n,p),$(n,x),$(x,M),$(M,j),$(M,V),$(x,E),$(x,A),$(A,D),$(A,_),$(n,R),$(n,I),$(I,T),$(I,B),H(B,t[2]),$(n,K),$(n,z),$(z,L),$(z,U),H(U,t[3]),$(n,P),$(n,F),$(F,G),$(F,q),H(q,t[4]),$(n,Z),$(n,W),$(W,X),X.checked=t[7],$(W,Y),m(r,Q,d),m(r,tt,d),$(tt,et),$(et,nt);for(let t=0;t<wt.length;t+=1)wt[t].m(nt,null);$(tt,lt),$(tt,rt),$(rt,ot),$(ot,ct),$(ot,it),$(it,st),$(st,at),$(it,ft),kt&&kt.m(it,null),$(rt,pt),$(rt,$t);for(let t=0;t<Ot.length;t+=1)Ot[t].m($t,null);ht||(gt=[w(l,"click",t[31]),w(c,"click",t[15]),w(a,"click",t[27]),w(f,"click",t[26]),w(M,"click",t[19]),w(A,"click",t[20]),w(B,"input",t[32]),w(U,"input",t[33]),w(q,"input",t[34]),w(X,"change",t[35]),w($t,"mousedown",t[16]),w($t,"mouseup",t[17]),w($t,"contextmenu",k(t[28])),w($t,"mousemove",t[37])],ht=!0)},p(t,n){if(t[9].length?bt?bt.p(t,n):(bt=Ut(t),bt.c(),bt.m(e.parentNode,e)):bt&&(bt.d(1),bt=null),32&n[0]&&vt!==(vt=t[5].length+"")&&N(V,vt),32&n[0]&&C!==(C=0==t[5].length)&&(M.disabled=C),64&n[0]&&yt!==(yt=t[6].length+"")&&N(_,yt),64&n[0]&&J!==(J=0==t[6].length)&&(A.disabled=J),4&n[0]&&O(B.value)!==t[2]&&H(B,t[2]),8&n[0]&&O(U.value)!==t[3]&&H(U,t[3]),16&n[0]&&O(q.value)!==t[4]&&H(q,t[4]),128&n[0]&&(X.checked=t[7]),2113538&n[0]){let e;for(xt=t[14],e=0;e<xt.length;e+=1){const l=zt(t,xt,e);wt[e]?wt[e].p(l,n):(wt[e]=Ft(l),wt[e].c(),wt[e].m(nt,null))}for(;e<wt.length;e+=1)wt[e].d(1);wt.length=xt.length}if(1024&n[0]&&at.src!==(ut=t[10])&&S(at,"src",ut),20==t[4]&&20==t[3]?kt?kt.p(t,n):(kt=Gt(t),kt.c(),kt.m(it,null)):kt&&(kt.d(1),kt=null),6532&n[0]){let e;for(St=t[11],e=0;e<St.length;e+=1){const l=Tt(t,St,e);Ot[e]?Ot[e].p(l,n):(Ot[e]=Xt(l),Ot[e].c(),Ot[e].m($t,null))}for(;e<Ot.length;e+=1)Ot[e].d(1);Ot.length=St.length}20&n[0]&&mt!==(mt=t[4]*(t[2]+1))&&S($t,"width",mt),12&n[0]&&dt!==(dt=t[3]*(t[2]+1))&&S($t,"height",dt)},d(t){bt&&bt.d(t),t&&d(e),t&&d(n),t&&d(Q),t&&d(tt),h(wt,t),kt&&kt.d(),h(Ot,t),ht=!1,r(gt)}}}function Qt(t){let e,n,l,r;return e=new Rt({props:{tab:"art",$$slots:{default:[Yt]},$$scope:{ctx:t}}}),{c(){ot(e.$$.fragment)},m(o,c){ct(e,o,c),n=!0,l||(r=w(window,"keyup",t[25]),l=!0)},p(t,n){const l={};8191&n[0]|1073741824&n[1]&&(l.$$scope={dirty:n,ctx:t}),e.$set(l)},i(t){n||(Q(e.$$.fragment,t),n=!0)},o(t){tt(e.$$.fragment,t),n=!1},d(t){it(e,t),l=!1,r()}}}function te(t,e,n){return t.length>e&&t[e].length>n?t[e][n]||"transparent":"white"}function ee(t,e,n){let l;const r=kt("pixel-drawings",{});s(t,r,t=>n(39,l=t));let o=null;let c="black",i=25,a=20,u=20,f=[],$=[],m=!0,d=[],h=!1;function g(t=!0){t&&y(),n(8,d=b(a)),n(0,o=null)}function v(t){if(!h)return;const e=t.dataset.row,l=t.dataset.column;null!=e&&null!=l&&function(t,e,l=c){if(t>d.length){const t=a-d.length;n(8,d=d.concat(b(t)))}n(8,d[t][e]=l,d)}(e,l)}function y(){n(5,f=[...f.slice(Math.max(f.length-20,0)),JSON.stringify(d)]),n(6,$=[])}function b(t){return[...Array(t)].map(t=>function(t){return[...Array(t)].map(t=>"transparent")}(u))}function x(){0!=f.length&&(n(6,$=[...$,JSON.stringify(d)]),n(8,d=JSON.parse(f.pop())),n(5,f))}function w(){0!=$.length&&(n(5,f=[...f,JSON.stringify(d)]),n(8,d=JSON.parse($.pop())),n(6,$))}function k(t){n(1,c=t)}function S(){const t=prompt("Give us a name",o||"");null!=t&&0!=t.trim().length&&(p(r,l[t]={name:t,gridSize:i,width:u,height:a,data:d,showGrid:m,png:wt(d,u,a)},l),n(0,o=t))}function N(t){let e=JSON.parse(JSON.stringify(l[t]));n(8,d=e.data),n(2,i=e.gridSize),n(4,u=e.width||e.data[0].length),n(3,a=e.height||e.data.length),n(7,m=e.showGrid||m),n(5,f=[]),n(6,$=[]),n(0,o=t)}function H(t){confirm(`Are you sure you want to delete ${t}?`)&&l.hasOwnProperty(t)&&(delete l[t],r.set(l))}g(!1);let M,j,V,C;return t.$$.update=()=>{256&t.$$.dirty[1]&&n(9,M=Object.keys(l)),280&t.$$.dirty[0]&&n(10,j=wt(d,u,a)),8&t.$$.dirty[0]&&n(11,V=[...Array(a)].map((t,e)=>e)),16&t.$$.dirty[0]&&n(12,C=[...Array(u)].map((t,e)=>e))},[o,c,i,a,u,f,$,m,d,M,j,V,C,r,["transparent","white","rgb(204, 204, 204)","rgb(160, 164, 160)","rgb(102, 102, 102)","rgb(51, 51, 51)","black","rgb(119, 59, 11)","blue","pink","yellow","orange","red","purple","teal","green","rgb(40, 40, 184)","rgb(40, 80, 224)","rgb(80, 80, 248)","rgb(120, 124, 248)","rgb(160, 0, 16)","rgb(248, 0, 32)","rgb(208, 124, 96)","rgb(248, 208, 176)","red","rgb(253, 240, 232)","rgb(245, 222, 208)","rgb(220, 201, 187)","rgb(197, 179, 167)","rgb(186, 167, 153)","rgb(146, 129, 119)","rgb(120, 107, 99)","rgb(80, 68, 68)","rgb(122, 80, 55)","rgb(178, 105, 58)","rgb(203, 140, 97)","rgb(238, 187, 155)","rgb(75, 53, 39)"],g,function(t){t.altKey||0!==t.button?n(1,c=t.target.style.fill):(y(),h=!0,v(t.target))},function(t){h=!1},v,x,w,k,S,N,H,function(t){switch(t.code){case"KeyZ":t.ctrlKey&&x();break;case"KeyY":t.ctrlKey&&w()}},function(){n(8,d=d.slice(0,a).reverse())},function(){n(8,d=d.map(t=>t.slice(0,u).reverse()))},function(e){D(t,e)},t=>N(t),t=>H(t),()=>S(),function(){i=O(this.value),n(2,i)},function(){a=O(this.value),n(3,a)},function(){u=O(this.value),n(4,u)},function(){m=this.checked,n(7,m)},t=>k(t),t=>v(t.target)]}class ne extends at{constructor(t){super(),st(this,t,ee,Qt,c,{},[-1,-1])}}function le(t,e,n){const l=t.slice();return l[8]=e[n],l}function re(t){let e,n,l,r,o,c;function i(...e){return t[6](t[8],...e)}return n=new Mt({props:{name:t[8],spin:t[1]}}),{c(){e=g("div"),ot(n.$$.fragment),l=b(),S(e,"class","svelte-1u0b3hs"),j(e,"active",t[0]==t[8])},m(t,s){m(t,e,s),ct(n,e,null),$(e,l),r=!0,o||(c=w(e,"click",i),o=!0)},p(l,r){t=l;const o={};4&r&&(o.name=t[8]),2&r&&(o.spin=t[1]),n.$set(o),5&r&&j(e,"active",t[0]==t[8])},i(t){r||(Q(n.$$.fragment,t),r=!0)},o(t){tt(n.$$.fragment,t),r=!1},d(t){t&&d(e),it(n),o=!1,c()}}}function oe(t){let e,n,l,r,o;const c=t[5].default,i=a(c,t,t[4],null),s=i||function(t){let e;return{c(){e=y("Graphic")},m(t,n){m(t,e,n)},d(t){t&&d(e)}}}();let u=t[2],p=[];for(let e=0;e<u.length;e+=1)p[e]=re(le(t,u,e));const v=t=>tt(p[t],1,1,()=>{p[t]=null});return{c(){e=g("div"),n=g("label"),s&&s.c(),l=b(),r=g("div");for(let t=0;t<p.length;t+=1)p[t].c();S(n,"for","graphic"),S(r,"class","options svelte-1u0b3hs"),S(e,"class","form-group svelte-1u0b3hs")},m(t,c){m(t,e,c),$(e,n),s&&s.m(n,null),$(e,l),$(e,r);for(let t=0;t<p.length;t+=1)p[t].m(r,null);o=!0},p(t,[e]){if(i&&i.p&&16&e&&f(i,c,t,t[4],e,null,null),7&e){let n;for(u=t[2],n=0;n<u.length;n+=1){const l=le(t,u,n);p[n]?(p[n].p(l,e),Q(p[n],1)):(p[n]=re(l),p[n].c(),Q(p[n],1),p[n].m(r,null))}for(X(),n=u.length;n<p.length;n+=1)v(n);Y()}},i(t){if(!o){Q(s,t);for(let t=0;t<u.length;t+=1)Q(p[t]);o=!0}},o(t){tt(s,t),p=p.filter(Boolean);for(let t=0;t<p.length;t+=1)tt(p[t]);o=!1},d(t){t&&d(e),s&&s.d(t),h(p,t)}}}function ce(t,e,n){let l;s(t,St,t=>n(7,l=t));let{value:r=null}=e,{filter:o=null}=e,{spin:c=!1}=e,{$$slots:i={},$$scope:a}=e;let u;return t.$$set=t=>{"value"in t&&n(0,r=t.value),"filter"in t&&n(3,o=t.filter),"spin"in t&&n(1,c=t.spin),"$$scope"in t&&n(4,a=t.$$scope)},t.$$.update=()=>{136&t.$$.dirty&&n(2,u=Object.keys(l).filter(t=>null==o||o(l[t])))},[r,c,u,o,a,i,t=>n(0,r=t)]}class ie extends at{constructor(t){super(),st(this,t,ce,oe,c,{value:0,filter:3,spin:1})}}function se(t){let e,n,l,r,o,c,i;const s=t[3].default,u=a(s,t,t[2],null);return{c(){e=g("div"),n=g("label"),u&&u.c(),l=b(),r=g("input"),S(n,"for",t[1]),S(r,"name",t[1]),S(r,"id",t[1]),S(r,"type","text"),S(r,"class","form-control"),S(e,"class","form-group")},m(s,a){m(s,e,a),$(e,n),u&&u.m(n,null),$(e,l),$(e,r),H(r,t[0]),o=!0,c||(i=w(r,"input",t[4]),c=!0)},p(t,[e]){u&&u.p&&4&e&&f(u,s,t,t[2],e,null,null),(!o||2&e)&&S(n,"for",t[1]),(!o||2&e)&&S(r,"name",t[1]),(!o||2&e)&&S(r,"id",t[1]),1&e&&r.value!==t[0]&&H(r,t[0])},i(t){o||(Q(u,t),o=!0)},o(t){tt(u,t),o=!1},d(t){t&&d(e),u&&u.d(t),c=!1,i()}}}function ae(t,e,n){let{value:l=null}=e,{name:r="text"}=e,{$$slots:o={},$$scope:c}=e;return t.$$set=t=>{"value"in t&&n(0,l=t.value),"name"in t&&n(1,r=t.name),"$$scope"in t&&n(2,c=t.$$scope)},[l,r,c,o,function(){l=this.value,n(0,l)}]}class ue extends at{constructor(t){super(),st(this,t,ae,se,c,{value:0,name:1})}}function fe(t){let e,n,l,r,o,c,i,s;const u=t[3].default,p=a(u,t,t[2],null);return{c(){e=g("div"),n=g("div"),l=g("input"),r=b(),o=g("label"),p&&p.c(),S(l,"name",t[1]),S(l,"id",t[1]),S(l,"type","checkbox"),S(l,"class","form-check-input"),S(o,"class","form-check-label"),S(o,"for",t[1]),S(n,"class","form-check"),S(e,"class","form-group")},m(a,u){m(a,e,u),$(e,n),$(n,l),l.checked=t[0],$(n,r),$(n,o),p&&p.m(o,null),c=!0,i||(s=w(l,"change",t[4]),i=!0)},p(t,[e]){(!c||2&e)&&S(l,"name",t[1]),(!c||2&e)&&S(l,"id",t[1]),1&e&&(l.checked=t[0]),p&&p.p&&4&e&&f(p,u,t,t[2],e,null,null),(!c||2&e)&&S(o,"for",t[1])},i(t){c||(Q(p,t),c=!0)},o(t){tt(p,t),c=!1},d(t){t&&d(e),p&&p.d(t),i=!1,s()}}}function pe(t,e,n){let{checked:l=null}=e,{name:r="check"}=e,{$$slots:o={},$$scope:c}=e;return t.$$set=t=>{"checked"in t&&n(0,l=t.checked),"name"in t&&n(1,r=t.name),"$$scope"in t&&n(2,c=t.$$scope)},[l,r,c,o,function(){l=this.checked,n(0,l)}]}class $e extends at{constructor(t){super(),st(this,t,pe,fe,c,{checked:0,name:1})}}function me(t){let e,n,l,r,o,c,i;const s=t[6].default,u=a(s,t,t[5],null);return{c(){e=g("div"),n=g("label"),u&&u.c(),l=b(),r=g("input"),S(n,"for",t[1]),S(r,"name",t[1]),S(r,"id",t[1]),S(r,"type","number"),S(r,"min",t[2]),S(r,"max",t[3]),S(r,"step",t[4]),S(r,"class","form-control"),S(e,"class","form-group")},m(s,a){m(s,e,a),$(e,n),u&&u.m(n,null),$(e,l),$(e,r),H(r,t[0]),o=!0,c||(i=w(r,"input",t[7]),c=!0)},p(t,[e]){u&&u.p&&32&e&&f(u,s,t,t[5],e,null,null),(!o||2&e)&&S(n,"for",t[1]),(!o||2&e)&&S(r,"name",t[1]),(!o||2&e)&&S(r,"id",t[1]),(!o||4&e)&&S(r,"min",t[2]),(!o||8&e)&&S(r,"max",t[3]),(!o||16&e)&&S(r,"step",t[4]),1&e&&O(r.value)!==t[0]&&H(r,t[0])},i(t){o||(Q(u,t),o=!0)},o(t){tt(u,t),o=!1},d(t){t&&d(e),u&&u.d(t),c=!1,i()}}}function de(t,e,n){let{value:l=null}=e,{name:r="num"}=e,{min:o=null}=e,{max:c=null}=e,{step:i=1}=e,{$$slots:s={},$$scope:a}=e;return t.$$set=t=>{"value"in t&&n(0,l=t.value),"name"in t&&n(1,r=t.name),"min"in t&&n(2,o=t.min),"max"in t&&n(3,c=t.max),"step"in t&&n(4,i=t.step),"$$scope"in t&&n(5,a=t.$$scope)},[l,r,o,c,i,a,s,function(){l=O(this.value),n(0,l)}]}class he extends at{constructor(t){super(),st(this,t,de,me,c,{value:0,name:1,min:2,max:3,step:4})}}function ge(t){let e,n;const l=t[1].default,r=a(l,t,t[0],null),o=r||function(t){let e;return{c(){e=y("Save")},m(t,n){m(t,e,n)},d(t){t&&d(e)}}}();return{c(){e=g("button"),o&&o.c(),S(e,"type","submit"),S(e,"class","btn btn-success")},m(t,l){m(t,e,l),o&&o.m(e,null),n=!0},p(t,[e]){r&&r.p&&1&e&&f(r,l,t,t[0],e,null,null)},i(t){n||(Q(o,t),n=!0)},o(t){tt(o,t),n=!1},d(t){t&&d(e),o&&o.d(t)}}}function ve(t,e,n){let{$$slots:l={},$$scope:r}=e;return t.$$set=t=>{"$$scope"in t&&n(0,r=t.$$scope)},[r,l]}class ye extends at{constructor(t){super(),st(this,t,ve,ge,c,{})}}const be=t=>({}),xe=t=>({});function we(t){let e,n,l,r,o,c,i,s,u,p;const h=t[1].default,v=a(h,t,t[0],null);c=new ye({});const y=t[1].buttons,x=a(y,t,t[0],xe);return{c(){e=g("form"),n=g("div"),l=g("div"),v&&v.c(),r=b(),o=g("div"),ot(c.$$.fragment),i=b(),x&&x.c(),S(l,"class","card-body"),S(o,"class","card-footer"),S(n,"class","card")},m(a,f){m(a,e,f),$(e,n),$(n,l),v&&v.m(l,null),$(n,r),$(n,o),ct(c,o,null),$(o,i),x&&x.m(o,null),s=!0,u||(p=w(e,"submit",k(t[2])),u=!0)},p(t,[e]){v&&v.p&&1&e&&f(v,h,t,t[0],e,null,null),x&&x.p&&1&e&&f(x,y,t,t[0],e,be,xe)},i(t){s||(Q(v,t),Q(c.$$.fragment,t),Q(x,t),s=!0)},o(t){tt(v,t),tt(c.$$.fragment,t),tt(x,t),s=!1},d(t){t&&d(e),v&&v.d(t),it(c),x&&x.d(t),u=!1,p()}}}function ke(t,e,n){let{$$slots:l={},$$scope:r}=e;return t.$$set=t=>{"$$scope"in t&&n(0,r=t.$$scope)},[r,l,function(e){D(t,e)}]}class Se extends at{constructor(t){super(),st(this,t,ke,we,c,{})}}var Oe=kt("blocks",{});function Ne(t){let e;return{c(){e=y("Name")},m(t,n){m(t,e,n)},d(t){t&&d(e)}}}function He(t){let e;return{c(){e=y("Graphic (must be 20x20)")},m(t,n){m(t,e,n)},d(t){t&&d(e)}}}function Me(t){let e;return{c(){e=y("Solid?")},m(t,n){m(t,e,n)},d(t){t&&d(e)}}}function je(t){let e;return{c(){e=y("Throw things that touch it?")},m(t,n){m(t,e,n)},d(t){t&&d(e)}}}function Ve(t){let e;return{c(){e=y("DPS (when players or enemies touch this block, how much damage should they take per second?)")},m(t,n){m(t,e,n)},d(t){t&&d(e)}}}function Ce(e){let n,l,r;return{c(){n=g("button"),n.textContent="Delete",S(n,"type","button"),S(n,"class","btn btn-danger")},m(t,o){m(t,n,o),l||(r=w(n,"click",e[11]),l=!0)},p:t,d(t){t&&d(n),l=!1,r()}}}function Ee(t){let e,n=!t[1]&&Ce(t);return{c(){e=g("span"),n&&n.c(),S(e,"slot","buttons")},m(t,l){m(t,e,l),n&&n.m(e,null)},p(t,l){t[1]?n&&(n.d(1),n=null):n?n.p(t,l):(n=Ce(t),n.c(),n.m(e,null))},d(t){t&&d(e),n&&n.d()}}}function Ae(t){let e,n,l,r,o,c,i,s,a,u,f,p,$,h,g,v;function y(e){t[6].call(null,e)}let x={name:"name",$$slots:{default:[Ne]},$$scope:{ctx:t}};function w(e){t[7].call(null,e)}void 0!==t[0].name&&(x.value=t[0].name),e=new ue({props:x}),J.push(()=>rt(e,"value",y));let k={filter:Je,$$slots:{default:[He]},$$scope:{ctx:t}};function S(e){t[8].call(null,e)}void 0!==t[0].graphic&&(k.value=t[0].graphic),r=new ie({props:k}),J.push(()=>rt(r,"value",w));let O={name:"solid",$$slots:{default:[Me]},$$scope:{ctx:t}};function N(e){t[9].call(null,e)}void 0!==t[0].solid&&(O.checked=t[0].solid),i=new $e({props:O}),J.push(()=>rt(i,"checked",S));let H={name:"throwOnTouch",$$slots:{default:[je]},$$scope:{ctx:t}};function M(e){t[10].call(null,e)}void 0!==t[0].throwOnTouch&&(H.checked=t[0].throwOnTouch),u=new $e({props:H}),J.push(()=>rt(u,"checked",N));let j={name:"dps",$$slots:{default:[Ve]},$$scope:{ctx:t}};return void 0!==t[0].dps&&(j.value=t[0].dps),$=new he({props:j}),J.push(()=>rt($,"value",M)),{c(){ot(e.$$.fragment),l=b(),ot(r.$$.fragment),c=b(),ot(i.$$.fragment),a=b(),ot(u.$$.fragment),p=b(),ot($.$$.fragment),g=b()},m(t,n){ct(e,t,n),m(t,l,n),ct(r,t,n),m(t,c,n),ct(i,t,n),m(t,a,n),ct(u,t,n),m(t,p,n),ct($,t,n),m(t,g,n),v=!0},p(t,l){const c={};32768&l&&(c.$$scope={dirty:l,ctx:t}),!n&&1&l&&(n=!0,c.value=t[0].name,U(()=>n=!1)),e.$set(c);const a={};32768&l&&(a.$$scope={dirty:l,ctx:t}),!o&&1&l&&(o=!0,a.value=t[0].graphic,U(()=>o=!1)),r.$set(a);const p={};32768&l&&(p.$$scope={dirty:l,ctx:t}),!s&&1&l&&(s=!0,p.checked=t[0].solid,U(()=>s=!1)),i.$set(p);const m={};32768&l&&(m.$$scope={dirty:l,ctx:t}),!f&&1&l&&(f=!0,m.checked=t[0].throwOnTouch,U(()=>f=!1)),u.$set(m);const d={};32768&l&&(d.$$scope={dirty:l,ctx:t}),!h&&1&l&&(h=!0,d.value=t[0].dps,U(()=>h=!1)),$.$set(d)},i(t){v||(Q(e.$$.fragment,t),Q(r.$$.fragment,t),Q(i.$$.fragment,t),Q(u.$$.fragment,t),Q($.$$.fragment,t),v=!0)},o(t){tt(e.$$.fragment,t),tt(r.$$.fragment,t),tt(i.$$.fragment,t),tt(u.$$.fragment,t),tt($.$$.fragment,t),v=!1},d(t){it(e,t),t&&d(l),it(r,t),t&&d(c),it(i,t),t&&d(a),it(u,t),t&&d(p),it($,t),t&&d(g)}}}function De(t){let e,n;return e=new Se({props:{$$slots:{default:[Ae],buttons:[Ee]},$$scope:{ctx:t}}}),e.$on("submit",t[3]),{c(){ot(e.$$.fragment)},m(t,l){ct(e,t,l),n=!0},p(t,n){const l={};32771&n&&(l.$$scope={dirty:n,ctx:t}),e.$set(l)},i(t){n||(Q(e.$$.fragment,t),n=!0)},o(t){tt(e.$$.fragment,t),n=!1},d(t){it(e,t)}}}function _e(t){let e,n;return e=new Rt({props:{tab:"blocks",activeName:t[0].name,store:t[2],$$slots:{default:[De]},$$scope:{ctx:t}}}),{c(){ot(e.$$.fragment)},m(t,l){ct(e,t,l),n=!0},p(t,[n]){const l={};1&n&&(l.activeName=t[0].name),4&n&&(l.store=t[2]),32771&n&&(l.$$scope={dirty:n,ctx:t}),e.$set(l)},i(t){n||(Q(e.$$.fragment,t),n=!0)},o(t){tt(e.$$.fragment,t),n=!1},d(t){it(e,t)}}}const Je=t=>20==t.width&&20==t.height;function Re(t,e,n){let l;s(t,Oe,t=>n(2,l=t));let r,{params:o={}}=e;function c(t){confirm(`Are you sure you want to delete "${t}"?`)&&(delete l[t],Oe.set(l),yt("/level-builder/blocks/new"))}let i,a;return t.$$set=t=>{"params"in t&&n(5,o=t.params)},t.$$.update=()=>{var e;32&t.$$.dirty&&n(12,i=decodeURIComponent(o.name)||"new"),4096&t.$$.dirty&&("new"==i?n(0,r={name:"",solid:!0,throwOnTouch:!1,dps:0}):(e=i,n(0,r=JSON.parse(JSON.stringify(l[e]))))),4096&t.$$.dirty&&n(1,a="new"==i)},[r,a,l,function(){p(Oe,l[r.name]=JSON.parse(JSON.stringify(r)),l),yt("/level-builder/blocks/"+encodeURIComponent(r.name))},c,o,function(t){r.name=t,n(0,r)},function(t){r.graphic=t,n(0,r)},function(t){r.solid=t,n(0,r)},function(t){r.throwOnTouch=t,n(0,r)},function(t){r.dps=t,n(0,r)},()=>c(r.name)]}class Ie extends at{constructor(t){super(),st(this,t,Re,_e,c,{params:5})}}var Te=kt("characters",{});function Be(t){let e;return{c(){e=y("Name")},m(t,n){m(t,e,n)},d(t){t&&d(e)}}}function Ke(t){let e;return{c(){e=y("Standing still graphic")},m(t,n){m(t,e,n)},d(t){t&&d(e)}}}function ze(t){let e;return{c(){e=y("Spinning graphic")},m(t,n){m(t,e,n)},d(t){t&&d(e)}}}function Le(t){let e;return{c(){e=y("Max velocity")},m(t,n){m(t,e,n)},d(t){t&&d(e)}}}function Ue(t){let e;return{c(){e=y("Jump velocity")},m(t,n){m(t,e,n)},d(t){t&&d(e)}}}function Pe(t){let e;return{c(){e=y("Gravity multiplier")},m(t,n){m(t,e,n)},d(t){t&&d(e)}}}function Fe(t){let e;return{c(){e=y("Fall damage multiplier")},m(t,n){m(t,e,n)},d(t){t&&d(e)}}}function Ge(t){let e;return{c(){e=y("Max health")},m(t,n){m(t,e,n)},d(t){t&&d(e)}}}function qe(t){let e;return{c(){e=y("DPS (when in contact with enemies - we will replace this with abilities later)")},m(t,n){m(t,e,n)},d(t){t&&d(e)}}}function Ze(e){let n,l,r;return{c(){n=g("button"),n.textContent="Delete",S(n,"type","button"),S(n,"class","btn btn-danger")},m(t,o){m(t,n,o),l||(r=w(n,"click",e[15]),l=!0)},p:t,d(t){t&&d(n),l=!1,r()}}}function We(t){let e,n=!t[1]&&Ze(t);return{c(){e=g("span"),n&&n.c(),S(e,"slot","buttons")},m(t,l){m(t,e,l),n&&n.m(e,null)},p(t,l){t[1]?n&&(n.d(1),n=null):n?n.p(t,l):(n=Ze(t),n.c(),n.m(e,null))},d(t){t&&d(e),n&&n.d()}}}function Xe(t){let e,n,l,r,o,c,i,s,a,u,f,p,$,h,g,v,y,x,w,k,S,O,N,H,M,j,V,C;function E(e){t[6].call(null,e)}let A={name:"name",$$slots:{default:[Be]},$$scope:{ctx:t}};function D(e){t[7].call(null,e)}void 0!==t[0].name&&(A.value=t[0].name),e=new ue({props:A}),J.push(()=>rt(e,"value",E));let _={filter:tn,$$slots:{default:[Ke]},$$scope:{ctx:t}};function R(e){t[8].call(null,e)}void 0!==t[0].graphicStill&&(_.value=t[0].graphicStill),r=new ie({props:_}),J.push(()=>rt(r,"value",D));let I={filter:en,spin:!0,$$slots:{default:[ze]},$$scope:{ctx:t}};function T(e){t[9].call(null,e)}void 0!==t[0].graphicSpinning&&(I.value=t[0].graphicSpinning),i=new ie({props:I}),J.push(()=>rt(i,"value",R));let B={name:"maxVelocity",min:0,$$slots:{default:[Le]},$$scope:{ctx:t}};function K(e){t[10].call(null,e)}void 0!==t[0].maxVelocity&&(B.value=t[0].maxVelocity),u=new he({props:B}),J.push(()=>rt(u,"value",T));let z={name:"jumpVelocity",min:0,$$slots:{default:[Ue]},$$scope:{ctx:t}};function L(e){t[11].call(null,e)}void 0!==t[0].jumpVelocity&&(z.value=t[0].jumpVelocity),$=new he({props:z}),J.push(()=>rt($,"value",K));let P={name:"gravityMultiplier",min:0,max:2,step:.1,$$slots:{default:[Pe]},$$scope:{ctx:t}};function F(e){t[12].call(null,e)}void 0!==t[0].gravityMultiplier&&(P.value=t[0].gravityMultiplier),v=new he({props:P}),J.push(()=>rt(v,"value",L));let G={name:"fallDamageMultiplier",min:0,max:1,step:.1,$$slots:{default:[Fe]},$$scope:{ctx:t}};function q(e){t[13].call(null,e)}void 0!==t[0].fallDamageMultiplier&&(G.value=t[0].fallDamageMultiplier),w=new he({props:G}),J.push(()=>rt(w,"value",F));let Z={name:"maxHealth",$$slots:{default:[Ge]},$$scope:{ctx:t}};function W(e){t[14].call(null,e)}void 0!==t[0].maxHealth&&(Z.value=t[0].maxHealth),O=new he({props:Z}),J.push(()=>rt(O,"value",q));let X={name:"dps",$$slots:{default:[qe]},$$scope:{ctx:t}};return void 0!==t[0].dps&&(X.value=t[0].dps),M=new he({props:X}),J.push(()=>rt(M,"value",W)),{c(){ot(e.$$.fragment),l=b(),ot(r.$$.fragment),c=b(),ot(i.$$.fragment),a=b(),ot(u.$$.fragment),p=b(),ot($.$$.fragment),g=b(),ot(v.$$.fragment),x=b(),ot(w.$$.fragment),S=b(),ot(O.$$.fragment),H=b(),ot(M.$$.fragment),V=b()},m(t,n){ct(e,t,n),m(t,l,n),ct(r,t,n),m(t,c,n),ct(i,t,n),m(t,a,n),ct(u,t,n),m(t,p,n),ct($,t,n),m(t,g,n),ct(v,t,n),m(t,x,n),ct(w,t,n),m(t,S,n),ct(O,t,n),m(t,H,n),ct(M,t,n),m(t,V,n),C=!0},p(t,l){const c={};524288&l&&(c.$$scope={dirty:l,ctx:t}),!n&&1&l&&(n=!0,c.value=t[0].name,U(()=>n=!1)),e.$set(c);const a={};524288&l&&(a.$$scope={dirty:l,ctx:t}),!o&&1&l&&(o=!0,a.value=t[0].graphicStill,U(()=>o=!1)),r.$set(a);const p={};524288&l&&(p.$$scope={dirty:l,ctx:t}),!s&&1&l&&(s=!0,p.value=t[0].graphicSpinning,U(()=>s=!1)),i.$set(p);const m={};524288&l&&(m.$$scope={dirty:l,ctx:t}),!f&&1&l&&(f=!0,m.value=t[0].maxVelocity,U(()=>f=!1)),u.$set(m);const d={};524288&l&&(d.$$scope={dirty:l,ctx:t}),!h&&1&l&&(h=!0,d.value=t[0].jumpVelocity,U(()=>h=!1)),$.$set(d);const g={};524288&l&&(g.$$scope={dirty:l,ctx:t}),!y&&1&l&&(y=!0,g.value=t[0].gravityMultiplier,U(()=>y=!1)),v.$set(g);const b={};524288&l&&(b.$$scope={dirty:l,ctx:t}),!k&&1&l&&(k=!0,b.value=t[0].fallDamageMultiplier,U(()=>k=!1)),w.$set(b);const x={};524288&l&&(x.$$scope={dirty:l,ctx:t}),!N&&1&l&&(N=!0,x.value=t[0].maxHealth,U(()=>N=!1)),O.$set(x);const S={};524288&l&&(S.$$scope={dirty:l,ctx:t}),!j&&1&l&&(j=!0,S.value=t[0].dps,U(()=>j=!1)),M.$set(S)},i(t){C||(Q(e.$$.fragment,t),Q(r.$$.fragment,t),Q(i.$$.fragment,t),Q(u.$$.fragment,t),Q($.$$.fragment,t),Q(v.$$.fragment,t),Q(w.$$.fragment,t),Q(O.$$.fragment,t),Q(M.$$.fragment,t),C=!0)},o(t){tt(e.$$.fragment,t),tt(r.$$.fragment,t),tt(i.$$.fragment,t),tt(u.$$.fragment,t),tt($.$$.fragment,t),tt(v.$$.fragment,t),tt(w.$$.fragment,t),tt(O.$$.fragment,t),tt(M.$$.fragment,t),C=!1},d(t){it(e,t),t&&d(l),it(r,t),t&&d(c),it(i,t),t&&d(a),it(u,t),t&&d(p),it($,t),t&&d(g),it(v,t),t&&d(x),it(w,t),t&&d(S),it(O,t),t&&d(H),it(M,t),t&&d(V)}}}function Ye(t){let e,n;return e=new Se({props:{$$slots:{default:[Xe],buttons:[We]},$$scope:{ctx:t}}}),e.$on("submit",t[3]),{c(){ot(e.$$.fragment)},m(t,l){ct(e,t,l),n=!0},p(t,n){const l={};524291&n&&(l.$$scope={dirty:n,ctx:t}),e.$set(l)},i(t){n||(Q(e.$$.fragment,t),n=!0)},o(t){tt(e.$$.fragment,t),n=!1},d(t){it(e,t)}}}function Qe(t){let e,n;return e=new Rt({props:{tab:"characters",activeName:t[0].name,store:t[2],$$slots:{default:[Ye]},$$scope:{ctx:t}}}),{c(){ot(e.$$.fragment)},m(t,l){ct(e,t,l),n=!0},p(t,[n]){const l={};1&n&&(l.activeName=t[0].name),4&n&&(l.store=t[2]),524291&n&&(l.$$scope={dirty:n,ctx:t}),e.$set(l)},i(t){n||(Q(e.$$.fragment,t),n=!0)},o(t){tt(e.$$.fragment,t),n=!1},d(t){it(e,t)}}}const tn=t=>20!=t.width||20!=t.height,en=t=>20!=t.width||20!=t.height;function nn(t,e,n){let l;s(t,Te,t=>n(2,l=t));let r,{params:o={}}=e;function c(t){confirm(`Are you sure you want to delete "${t}"?`)&&(delete l[t],Te.set(l),yt("/level-builder/characters/new"))}let i,a;return t.$$set=t=>{"params"in t&&n(5,o=t.params)},t.$$.update=()=>{var e;32&t.$$.dirty&&n(16,i=decodeURIComponent(o.name)||"new"),65536&t.$$.dirty&&("new"==i?n(0,r={graphicStill:null,graphicSpinning:null,name:"",maxVelocity:20,jumpVelocity:15,gravityMultiplier:1,fallDamageMultiplier:1,dps:120}):(e=i,n(0,r=JSON.parse(JSON.stringify(l[e]))))),65536&t.$$.dirty&&n(1,a="new"==i)},[r,a,l,function(){p(Te,l[r.name]=JSON.parse(JSON.stringify(r)),l),yt("/level-builder/characters/"+encodeURIComponent(r.name))},c,o,function(t){r.name=t,n(0,r)},function(t){r.graphicStill=t,n(0,r)},function(t){r.graphicSpinning=t,n(0,r)},function(t){r.maxVelocity=t,n(0,r)},function(t){r.jumpVelocity=t,n(0,r)},function(t){r.gravityMultiplier=t,n(0,r)},function(t){r.fallDamageMultiplier=t,n(0,r)},function(t){r.maxHealth=t,n(0,r)},function(t){r.dps=t,n(0,r)},()=>c(r.name)]}class ln extends at{constructor(t){super(),st(this,t,nn,Qe,c,{params:5})}}var rn=kt("enemies",{});function on(t){let e;return{c(){e=y("Name")},m(t,n){m(t,e,n)},d(t){t&&d(e)}}}function cn(t){let e;return{c(){e=y("Standing still graphic")},m(t,n){m(t,e,n)},d(t){t&&d(e)}}}function sn(t){let e;return{c(){e=y("Max velocity")},m(t,n){m(t,e,n)},d(t){t&&d(e)}}}function an(t){let e;return{c(){e=y("Jump velocity")},m(t,n){m(t,e,n)},d(t){t&&d(e)}}}function un(t){let e;return{c(){e=y("Gravity multiplier")},m(t,n){m(t,e,n)},d(t){t&&d(e)}}}function fn(t){let e;return{c(){e=y("Fall damage multiplier")},m(t,n){m(t,e,n)},d(t){t&&d(e)}}}function pn(t){let e;return{c(){e=y("Max health")},m(t,n){m(t,e,n)},d(t){t&&d(e)}}}function $n(t){let e;return{c(){e=y("DPS (when in contact with player - we will replace this with abilities later)")},m(t,n){m(t,e,n)},d(t){t&&d(e)}}}function mn(e){let n,l,r;return{c(){n=g("button"),n.textContent="Delete",S(n,"type","button"),S(n,"class","btn btn-danger")},m(t,o){m(t,n,o),l||(r=w(n,"click",e[14]),l=!0)},p:t,d(t){t&&d(n),l=!1,r()}}}function dn(t){let e,n=!t[1]&&mn(t);return{c(){e=g("span"),n&&n.c(),S(e,"slot","buttons")},m(t,l){m(t,e,l),n&&n.m(e,null)},p(t,l){t[1]?n&&(n.d(1),n=null):n?n.p(t,l):(n=mn(t),n.c(),n.m(e,null))},d(t){t&&d(e),n&&n.d()}}}function hn(t){let e,n,l,r,o,c,i,s,a,u,f,p,$,h,g,v,y,x,w,k,S,O,N,H,M;function j(e){t[6].call(null,e)}let V={name:"name",$$slots:{default:[on]},$$scope:{ctx:t}};function C(e){t[7].call(null,e)}void 0!==t[0].name&&(V.value=t[0].name),e=new ue({props:V}),J.push(()=>rt(e,"value",j));let E={filter:yn,$$slots:{default:[cn]},$$scope:{ctx:t}};function A(e){t[8].call(null,e)}void 0!==t[0].graphicStill&&(E.value=t[0].graphicStill),r=new ie({props:E}),J.push(()=>rt(r,"value",C));let D={name:"maxVelocity",min:0,$$slots:{default:[sn]},$$scope:{ctx:t}};function _(e){t[9].call(null,e)}void 0!==t[0].maxVelocity&&(D.value=t[0].maxVelocity),i=new he({props:D}),J.push(()=>rt(i,"value",A));let R={name:"jumpVelocity",min:0,$$slots:{default:[an]},$$scope:{ctx:t}};function I(e){t[10].call(null,e)}void 0!==t[0].jumpVelocity&&(R.value=t[0].jumpVelocity),u=new he({props:R}),J.push(()=>rt(u,"value",_));let T={name:"gravityMultiplier",min:0,max:2,step:.1,$$slots:{default:[un]},$$scope:{ctx:t}};function B(e){t[11].call(null,e)}void 0!==t[0].gravityMultiplier&&(T.value=t[0].gravityMultiplier),$=new he({props:T}),J.push(()=>rt($,"value",I));let K={name:"fallDamageMultiplier",min:0,max:1,step:.1,$$slots:{default:[fn]},$$scope:{ctx:t}};function z(e){t[12].call(null,e)}void 0!==t[0].fallDamageMultiplier&&(K.value=t[0].fallDamageMultiplier),v=new he({props:K}),J.push(()=>rt(v,"value",B));let L={name:"maxHealth",$$slots:{default:[pn]},$$scope:{ctx:t}};function P(e){t[13].call(null,e)}void 0!==t[0].maxHealth&&(L.value=t[0].maxHealth),w=new he({props:L}),J.push(()=>rt(w,"value",z));let F={name:"dps",$$slots:{default:[$n]},$$scope:{ctx:t}};return void 0!==t[0].dps&&(F.value=t[0].dps),O=new he({props:F}),J.push(()=>rt(O,"value",P)),{c(){ot(e.$$.fragment),l=b(),ot(r.$$.fragment),c=b(),ot(i.$$.fragment),a=b(),ot(u.$$.fragment),p=b(),ot($.$$.fragment),g=b(),ot(v.$$.fragment),x=b(),ot(w.$$.fragment),S=b(),ot(O.$$.fragment),H=b()},m(t,n){ct(e,t,n),m(t,l,n),ct(r,t,n),m(t,c,n),ct(i,t,n),m(t,a,n),ct(u,t,n),m(t,p,n),ct($,t,n),m(t,g,n),ct(v,t,n),m(t,x,n),ct(w,t,n),m(t,S,n),ct(O,t,n),m(t,H,n),M=!0},p(t,l){const c={};262144&l&&(c.$$scope={dirty:l,ctx:t}),!n&&1&l&&(n=!0,c.value=t[0].name,U(()=>n=!1)),e.$set(c);const a={};262144&l&&(a.$$scope={dirty:l,ctx:t}),!o&&1&l&&(o=!0,a.value=t[0].graphicStill,U(()=>o=!1)),r.$set(a);const p={};262144&l&&(p.$$scope={dirty:l,ctx:t}),!s&&1&l&&(s=!0,p.value=t[0].maxVelocity,U(()=>s=!1)),i.$set(p);const m={};262144&l&&(m.$$scope={dirty:l,ctx:t}),!f&&1&l&&(f=!0,m.value=t[0].jumpVelocity,U(()=>f=!1)),u.$set(m);const d={};262144&l&&(d.$$scope={dirty:l,ctx:t}),!h&&1&l&&(h=!0,d.value=t[0].gravityMultiplier,U(()=>h=!1)),$.$set(d);const g={};262144&l&&(g.$$scope={dirty:l,ctx:t}),!y&&1&l&&(y=!0,g.value=t[0].fallDamageMultiplier,U(()=>y=!1)),v.$set(g);const b={};262144&l&&(b.$$scope={dirty:l,ctx:t}),!k&&1&l&&(k=!0,b.value=t[0].maxHealth,U(()=>k=!1)),w.$set(b);const x={};262144&l&&(x.$$scope={dirty:l,ctx:t}),!N&&1&l&&(N=!0,x.value=t[0].dps,U(()=>N=!1)),O.$set(x)},i(t){M||(Q(e.$$.fragment,t),Q(r.$$.fragment,t),Q(i.$$.fragment,t),Q(u.$$.fragment,t),Q($.$$.fragment,t),Q(v.$$.fragment,t),Q(w.$$.fragment,t),Q(O.$$.fragment,t),M=!0)},o(t){tt(e.$$.fragment,t),tt(r.$$.fragment,t),tt(i.$$.fragment,t),tt(u.$$.fragment,t),tt($.$$.fragment,t),tt(v.$$.fragment,t),tt(w.$$.fragment,t),tt(O.$$.fragment,t),M=!1},d(t){it(e,t),t&&d(l),it(r,t),t&&d(c),it(i,t),t&&d(a),it(u,t),t&&d(p),it($,t),t&&d(g),it(v,t),t&&d(x),it(w,t),t&&d(S),it(O,t),t&&d(H)}}}function gn(t){let e,n;return e=new Se({props:{$$slots:{default:[hn],buttons:[dn]},$$scope:{ctx:t}}}),e.$on("submit",t[3]),{c(){ot(e.$$.fragment)},m(t,l){ct(e,t,l),n=!0},p(t,n){const l={};262147&n&&(l.$$scope={dirty:n,ctx:t}),e.$set(l)},i(t){n||(Q(e.$$.fragment,t),n=!0)},o(t){tt(e.$$.fragment,t),n=!1},d(t){it(e,t)}}}function vn(t){let e,n;return e=new Rt({props:{tab:"enemies",activeName:t[0].name,store:t[2],$$slots:{default:[gn]},$$scope:{ctx:t}}}),{c(){ot(e.$$.fragment)},m(t,l){ct(e,t,l),n=!0},p(t,[n]){const l={};1&n&&(l.activeName=t[0].name),4&n&&(l.store=t[2]),262147&n&&(l.$$scope={dirty:n,ctx:t}),e.$set(l)},i(t){n||(Q(e.$$.fragment,t),n=!0)},o(t){tt(e.$$.fragment,t),n=!1},d(t){it(e,t)}}}const yn=t=>20!=t.width||20!=t.height;function bn(t,e,n){let l;s(t,rn,t=>n(2,l=t));let r,{params:o={}}=e;function c(t){confirm(`Are you sure you want to delete "${t}"?`)&&(delete l[t],rn.set(l),yt("/level-builder/enemies/new"))}let i,a;return t.$$set=t=>{"params"in t&&n(5,o=t.params)},t.$$.update=()=>{var e;32&t.$$.dirty&&n(15,i=decodeURIComponent(o.name)||"new"),32768&t.$$.dirty&&("new"==i?n(0,r={graphicStill:null,name:"",maxVelocity:20,jumpVelocity:15,gravityMultiplier:1,fallDamageMultiplier:1,dps:120}):(e=i,n(0,r=JSON.parse(JSON.stringify(l[e]))))),32768&t.$$.dirty&&n(1,a="new"==i)},[r,a,l,function(){p(rn,l[r.name]=JSON.parse(JSON.stringify(r)),l),yt("/level-builder/enemies/"+encodeURIComponent(r.name))},c,o,function(t){r.name=t,n(0,r)},function(t){r.graphicStill=t,n(0,r)},function(t){r.maxVelocity=t,n(0,r)},function(t){r.jumpVelocity=t,n(0,r)},function(t){r.gravityMultiplier=t,n(0,r)},function(t){r.fallDamageMultiplier=t,n(0,r)},function(t){r.maxHealth=t,n(0,r)},function(t){r.dps=t,n(0,r)},()=>c(r.name)]}class xn extends at{constructor(t){super(),st(this,t,bn,vn,c,{params:5})}}function wn(t,e,n){const l=t.slice();return l[9]=e[n],l}function kn(t){let e,n,l,r,o,c;function i(...e){return t[6](t[9],...e)}return n=new Mt({props:{name:t[1][t[9]].graphicStill}}),{c(){e=g("div"),ot(n.$$.fragment),l=b(),S(e,"class","svelte-1773jdu"),j(e,"active",t[0].indexOf(t[9])>-1)},m(t,s){m(t,e,s),ct(n,e,null),$(e,l),r=!0,o||(c=w(e,"click",i),o=!0)},p(l,r){t=l;const o={};2&r&&(o.name=t[1][t[9]].graphicStill),n.$set(o),3&r&&j(e,"active",t[0].indexOf(t[9])>-1)},i(t){r||(Q(n.$$.fragment,t),r=!0)},o(t){tt(n.$$.fragment,t),r=!1},d(t){t&&d(e),it(n),o=!1,c()}}}function Sn(t){let e,n,l,r,o;const c=t[5].default,i=a(c,t,t[4],null),s=i||function(t){let e;return{c(){e=y("Characters")},m(t,n){m(t,e,n)},d(t){t&&d(e)}}}();let u=Object.keys(t[1]),p=[];for(let e=0;e<u.length;e+=1)p[e]=kn(wn(t,u,e));const v=t=>tt(p[t],1,1,()=>{p[t]=null});return{c(){e=g("div"),n=g("label"),s&&s.c(),l=b(),r=g("div");for(let t=0;t<p.length;t+=1)p[t].c();S(n,"for","graphic"),S(r,"class","options svelte-1773jdu"),S(e,"class","form-group svelte-1773jdu")},m(t,c){m(t,e,c),$(e,n),s&&s.m(n,null),$(e,l),$(e,r);for(let t=0;t<p.length;t+=1)p[t].m(r,null);o=!0},p(t,[e]){if(i&&i.p&&16&e&&f(i,c,t,t[4],e,null,null),7&e){let n;for(u=Object.keys(t[1]),n=0;n<u.length;n+=1){const l=wn(t,u,n);p[n]?(p[n].p(l,e),Q(p[n],1)):(p[n]=kn(l),p[n].c(),Q(p[n],1),p[n].m(r,null))}for(X(),n=u.length;n<p.length;n+=1)v(n);Y()}},i(t){if(!o){Q(s,t);for(let t=0;t<u.length;t+=1)Q(p[t]);o=!0}},o(t){tt(s,t),p=p.filter(Boolean);for(let t=0;t<p.length;t+=1)tt(p[t]);o=!1},d(t){t&&d(e),s&&s.d(t),h(p,t)}}}function On(t,e,n){let l,r;s(t,St,t=>n(8,l=t)),s(t,Te,t=>n(1,r=t));let{value:o=[]}=e,{filter:c=null}=e;function i(t){n(0,o=o.indexOf(t)>-1?o.filter(e=>e!=t):[...o,t].sort())}let{$$slots:a={},$$scope:u}=e;let f;return t.$$set=t=>{"value"in t&&n(0,o=t.value),"filter"in t&&n(3,c=t.filter),"$$scope"in t&&n(4,u=t.$$scope)},t.$$.update=()=>{264&t.$$.dirty&&(f=Object.keys(l).filter(t=>null==c||c(l[t])))},[o,r,i,c,u,a,t=>i(t)]}class Nn extends at{constructor(t){super(),st(this,t,On,Sn,c,{value:0,filter:3})}}function Hn(e){let n;return{c(){n=g("canvas"),S(n,"width",e[0]),S(n,"height",e[1])},m(t,l){m(t,n,l),e[4](n)},p(t,[e]){1&e&&S(n,"width",t[0]),2&e&&S(n,"height",t[1])},i:t,o:t,d(t){t&&d(n),e[4](null)}}}function Mn(t,e,n){let{width:l=0}=e,{height:r=0}=e,{blocks:o=[]}=e;const c={};let i,s;return t.$$set=t=>{"width"in t&&n(0,l=t.width),"height"in t&&n(1,r=t.height),"blocks"in t&&n(3,o=t.blocks)},t.$$.update=()=>{4&t.$$.dirty&&null!=i&&n(6,s=i.getContext("2d")),107&t.$$.dirty&&null!=o&&null!=l&&null!=r&&null!=s&&(s.clearRect(0,0,l,r),o.forEach(t=>{let e=c[t.png];null==e?(e=new Image,e.src=t.png,e.onload=()=>{s.drawImage(e,t.x,r-t.y-t.height)},n(5,c[t.png]=e,c)):s.drawImage(e,t.x,r-t.y-t.height)}))},[l,r,i,o,function(t){J[t?"unshift":"push"](()=>{i=t,n(2,i)})}]}class jn extends at{constructor(t){super(),st(this,t,Mn,Hn,c,{width:0,height:1,blocks:3})}}function Vn(e){let n,l,r,o,c,i,s,a=e[1]>0?`(${e[1]}%)`:"I am dead.";return{c(){n=g("div"),l=g("div"),r=b(),o=g("div"),c=y(e[0]),i=b(),s=y(a),S(l,"class","filled svelte-1frudy7"),M(l,"width",e[1]+"%"),M(l,"background-color",e[2]),S(o,"class","text svelte-1frudy7"),S(n,"class","health-bar svelte-1frudy7")},m(t,e){m(t,n,e),$(n,l),$(n,r),$(n,o),$(o,c),$(o,i),$(o,s)},p(t,[e]){2&e&&M(l,"width",t[1]+"%"),4&e&&M(l,"background-color",t[2]),1&e&&N(c,t[0]),2&e&&a!==(a=t[1]>0?`(${t[1]}%)`:"I am dead.")&&N(s,a)},i:t,o:t,d(t){t&&d(n)}}}function Cn(t,e,n){let l,r,o,{percent:c=100}=e,{health:i=100}=e,{maxHealth:s=100}=e;return t.$$set=t=>{"percent"in t&&n(3,c=t.percent),"health"in t&&n(4,i=t.health),"maxHealth"in t&&n(5,s=t.maxHealth)},t.$$.update=()=>{16&t.$$.dirty&&n(0,l=i>0?Math.round(i):0),48&t.$$.dirty&&n(3,c=Math.round(i/s*100,2)),8&t.$$.dirty&&n(1,r=c>0?c:0),8&t.$$.dirty&&n(2,o=c>75?"rgba(24, 197, 33, 0.5)":c>25?"rgba(245, 189, 36, 0.5)":"rgba(223, 22, 22, 0.5)")},[l,r,o,c,i,s]}class En extends at{constructor(t){super(),st(this,t,Cn,Vn,c,{percent:3,health:4,maxHealth:5})}}function An(t){let e,n,l,r,o,c,i;return n=new En({props:{health:t[5],maxHealth:t[6]}}),{c(){e=g("div"),ot(n.$$.fragment),l=b(),r=v("svg"),o=v("path"),c=v("path"),S(o,"d",t[10]),S(o,"fill",t[8]),S(c,"d",t[11]),S(c,"fill",t[9]),S(r,"class","graphic svelte-1x7nj5j"),M(r,"width",t[3]+"px"),M(r,"height",t[4]+"px"),M(r,"transform","scaleX("+t[7]+") rotate("+((t[0]>0?3*t[0]:1.5*t[0])-4)+"deg)"),M(r,"opacity",t[5]<=0?.2:1),S(r,"xmlns","http://www.w3.org/2000/svg"),S(r,"viewBox","0 10 1024 749"),S(r,"version","1.1"),S(r,"xml:space","preserve"),S(e,"class","enemy svelte-1x7nj5j"),M(e,"left",t[1]+"px"),M(e,"bottom",t[2]+"px")},m(t,s){m(t,e,s),ct(n,e,null),$(e,l),$(e,r),$(r,o),$(r,c),i=!0},p(t,[l]){const s={};32&l&&(s.health=t[5]),64&l&&(s.maxHealth=t[6]),n.$set(s),(!i||256&l)&&S(o,"fill",t[8]),(!i||512&l)&&S(c,"fill",t[9]),(!i||8&l)&&M(r,"width",t[3]+"px"),(!i||16&l)&&M(r,"height",t[4]+"px"),(!i||129&l)&&M(r,"transform","scaleX("+t[7]+") rotate("+((t[0]>0?3*t[0]:1.5*t[0])-4)+"deg)"),(!i||32&l)&&M(r,"opacity",t[5]<=0?.2:1),(!i||2&l)&&M(e,"left",t[1]+"px"),(!i||4&l)&&M(e,"bottom",t[2]+"px")},i(t){i||(Q(n.$$.fragment,t),i=!0)},o(t){tt(n.$$.fragment,t),i=!1},d(t){t&&d(e),it(n)}}}function Dn(t,e,n){let{vx:l=0}=e,{vy:r=0}=e,{x:o=0}=e,{y:c=0}=e,{width:i=75}=e,{height:s=50}=e,{isBoss:a=!1}=e,{health:u=100}=e,{maxHealth:f=100}=e,{gettingHit:p=!1}=e,$=1;let m,d;return t.$$set=t=>{"vx"in t&&n(12,l=t.vx),"vy"in t&&n(0,r=t.vy),"x"in t&&n(1,o=t.x),"y"in t&&n(2,c=t.y),"width"in t&&n(3,i=t.width),"height"in t&&n(4,s=t.height),"isBoss"in t&&n(13,a=t.isBoss),"health"in t&&n(5,u=t.health),"maxHealth"in t&&n(6,f=t.maxHealth),"gettingHit"in t&&n(14,p=t.gettingHit)},t.$$.update=()=>{4096&t.$$.dirty&&0!=l&&n(7,$=l>0?1:-1),24608&t.$$.dirty&&n(8,m=u<=0?"#333333":p?"#ffffff":a?"#000":"#79cf00"),24608&t.$$.dirty&&n(9,d=u<=0?"#000000":p?"#0000ff":a?"red":"#cf7900")},[r,o,c,i,s,u,f,$,m,d,"M560,128H528a15.99954,15.99954,0,0,0-16,16v80H480V176a15.99954,15.99954,0,0,0-16-16H416V96h48a16.00079,16.00079,0,0,0,16-16V48a15.99954,15.99954,0,0,0-16-16H432a15.99954,15.99954,0,0,0-16,16V64H368a15.99954,15.99954,0,0,0-16,16v48H224V80a15.99954,15.99954,0,0,0-16-16H160V48a15.99954,15.99954,0,0,0-16-16H112A15.99954,15.99954,0,0,0,96,48V80a16.00079,16.00079,0,0,0,16,16h48v64H112a15.99954,15.99954,0,0,0-16,16v48H64V144a15.99954,15.99954,0,0,0-16-16H16A15.99954,15.99954,0,0,0,0,144V272a16.00079,16.00079,0,0,0,16,16H64v80a16.00079,16.00079,0,0,0,16,16h48v80a16.00079,16.00079,0,0,0,16,16h96a16.00079,16.00079,0,0,0,16-16V432a15.99954,15.99954,0,0,0-16-16H192V384H384v32H336a15.99954,15.99954,0,0,0-16,16v32a16.00079,16.00079,0,0,0,16,16h96a16.00079,16.00079,0,0,0,16-16V384h48a16.00079,16.00079,0,0,0,16-16V288h48a16.00079,16.00079,0,0,0,16-16V144A15.99954,15.99954,0,0,0,560,128ZM224,320H160V224h64Zm192,0H352V224h64Z","M160,320h64V224H160Zm192-96v96h64V224Z",l,a,p]}class _n extends at{constructor(t){super(),st(this,t,Dn,An,c,{vx:12,vy:0,x:1,y:2,width:3,height:4,isBoss:13,health:5,maxHealth:6,gettingHit:14})}}function Jn(t,e,n){const l=t.slice();return l[22]=e[n],l}function Rn(t){let e,n,l,r,o,c,i;function s(...e){return t[11](t[22],...e)}return n=new Mt({props:{name:t[5][t[22]].graphic}}),{c(){e=g("button"),ot(n.$$.fragment),l=b(),S(e,"type","button"),S(e,"class",r="btn btn-"+(t[22]==t[2]?"primary":"default")+" svelte-1l04xe1")},m(t,r){m(t,e,r),ct(n,e,null),$(e,l),o=!0,c||(i=w(e,"click",s),c=!0)},p(l,c){t=l;const i={};32&c&&(i.name=t[5][t[22]].graphic),n.$set(i),(!o||36&c&&r!==(r="btn btn-"+(t[22]==t[2]?"primary":"default")+" svelte-1l04xe1"))&&S(e,"class",r)},i(t){o||(Q(n.$$.fragment,t),o=!0)},o(t){tt(n.$$.fragment,t),o=!1},d(t){t&&d(e),it(n),c=!1,i()}}}function In(t){let e,n,l,o,c,i,s,a,u,f,p=Object.keys(t[5]),v=[];for(let e=0;e<p.length;e+=1)v[e]=Rn(Jn(t,p,e));const y=t=>tt(v[t],1,1,()=>{v[t]=null});return s=new jn({props:{blocks:t[0],width:t[4],height:t[3]}}),{c(){e=g("div"),n=g("div"),l=g("strong"),l.textContent="Blocks",o=b();for(let t=0;t<v.length;t+=1)v[t].c();c=b(),i=g("div"),ot(s.$$.fragment),S(n,"class","tool-picker svelte-1l04xe1"),S(i,"class","level-container svelte-1l04xe1"),M(i,"background",t[1]),M(i,"height",t[3]+"px"),S(e,"class","drawing-tool svelte-1l04xe1")},m(r,p){m(r,e,p),$(e,n),$(n,l),$(n,o);for(let t=0;t<v.length;t+=1)v[t].m(n,null);$(e,c),$(e,i),ct(s,i,null),a=!0,u||(f=[w(i,"mousedown",t[7]),w(i,"mouseup",t[9]),w(i,"mousemove",t[8]),w(i,"contextmenu",k(t[10]))],u=!0)},p(t,[e]){if(100&e){let l;for(p=Object.keys(t[5]),l=0;l<p.length;l+=1){const r=Jn(t,p,l);v[l]?(v[l].p(r,e),Q(v[l],1)):(v[l]=Rn(r),v[l].c(),Q(v[l],1),v[l].m(n,null))}for(X(),l=p.length;l<v.length;l+=1)y(l);Y()}const l={};1&e&&(l.blocks=t[0]),16&e&&(l.width=t[4]),8&e&&(l.height=t[3]),s.$set(l),(!a||2&e)&&M(i,"background",t[1]),(!a||8&e)&&M(i,"height",t[3]+"px")},i(t){if(!a){for(let t=0;t<p.length;t+=1)Q(v[t]);Q(s.$$.fragment,t),a=!0}},o(t){v=v.filter(Boolean);for(let t=0;t<v.length;t+=1)tt(v[t]);tt(s.$$.fragment,t),a=!1},d(t){t&&d(e),h(v,t),it(s),u=!1,r(f)}}}function Tn(t,e,n){let l,r;s(t,Oe,t=>n(5,l=t)),s(t,St,t=>n(15,r=t));let{background:o=null}=e,{blocks:c=[]}=e,i=null,a=!1;function u(t){n(2,i=t)}function f(t){if(a){const{x:e,y:o}=p(t);!function(t,e){if(null==i)return function(t,e){n(0,c=$(t,e))}(t,e);const o=l[i],s={x:t,y:e,width:40,height:40,name:i,png:r[o.graphic].png};n(0,c=[...$(t,e),s])}(e,o)}}function p(t){t.target.closest(".level-container");return{x:40*Math.floor(t.offsetX/40),y:40*Math.floor((m-t.offsetY)/40)}}function $(t,e){return c.filter(n=>n.x!=t||n.y!=e)}let m,d,h;return t.$$set=t=>{"background"in t&&n(1,o=t.background),"blocks"in t&&n(0,c=t.blocks)},t.$$.update=()=>{1&t.$$.dirty&&n(14,d=c.length>0?Math.max(...c.map(t=>t.x+t.width)):0),16384&t.$$.dirty&&n(4,h=Math.max(800,d+500))},n(3,m=800),[c,o,i,m,h,l,u,function(t){(t.altKey||0!==t.button)&&n(2,i=function(t){const{x:e,y:n}=p(t),l=c.find(t=>t.x==e&&t.y==n);return null==l?null:l.name}(t)),a=0===t.button,f(t)},f,function(t){a=!1},function(e){D(t,e)},t=>u(t)]}class Bn extends at{constructor(t){super(),st(this,t,Tn,In,c,{background:1,blocks:0})}}var Kn=kt("levels",{});function zn(t){let e,n;return e=new Rt({props:{tab:"levels",activeName:t[0].name,store:t[2],$$slots:{default:[Zn]},$$scope:{ctx:t}}}),{c(){ot(e.$$.fragment)},m(t,l){ct(e,t,l),n=!0},p(t,n){const l={};1&n&&(l.activeName=t[0].name),4&n&&(l.store=t[2]),16387&n&&(l.$$scope={dirty:n,ctx:t}),e.$set(l)},i(t){n||(Q(e.$$.fragment,t),n=!0)},o(t){tt(e.$$.fragment,t),n=!1},d(t){it(e,t)}}}function Ln(t){let e;return{c(){e=y("Name")},m(t,n){m(t,e,n)},d(t){t&&d(e)}}}function Un(t){let e;return{c(){e=y("Which characters can play this level?")},m(t,n){m(t,e,n)},d(t){t&&d(e)}}}function Pn(t){let e;return{c(){e=y("Background (any css background value)")},m(t,n){m(t,e,n)},d(t){t&&d(e)}}}function Fn(e){let n,l,r;return{c(){n=g("button"),n.textContent="Delete",S(n,"type","button"),S(n,"class","btn btn-danger")},m(t,o){m(t,n,o),l||(r=w(n,"click",e[4]),l=!0)},p:t,d(t){t&&d(n),l=!1,r()}}}function Gn(t){let e,n=!t[1]&&Fn(t);return{c(){e=g("span"),n&&n.c(),S(e,"slot","buttons")},m(t,l){m(t,e,l),n&&n.m(e,null)},p(t,l){t[1]?n&&(n.d(1),n=null):n?n.p(t,l):(n=Fn(t),n.c(),n.m(e,null))},d(t){t&&d(e),n&&n.d()}}}function qn(t){let e,n,l,r,o,c,i,s,a,u,f,p,$,h;function g(e){t[6].call(null,e)}let v={name:"name",$$slots:{default:[Ln]},$$scope:{ctx:t}};function y(e){t[7].call(null,e)}void 0!==t[0].name&&(v.value=t[0].name),e=new ue({props:v}),J.push(()=>rt(e,"value",g));let x={name:"playableCharacters",$$slots:{default:[Un]},$$scope:{ctx:t}};function w(e){t[8].call(null,e)}void 0!==t[0].playableCharacters&&(x.value=t[0].playableCharacters),r=new Nn({props:x}),J.push(()=>rt(r,"value",y));let k={name:"background",$$slots:{default:[Pn]},$$scope:{ctx:t}};function S(e){t[9].call(null,e)}function O(e){t[10].call(null,e)}void 0!==t[0].background&&(k.value=t[0].background),i=new ue({props:k}),J.push(()=>rt(i,"value",w));let N={background:t[0].background};return void 0!==t[0].blocks&&(N.blocks=t[0].blocks),void 0!==t[0].enemies&&(N.enemies=t[0].enemies),u=new Bn({props:N}),J.push(()=>rt(u,"blocks",S)),J.push(()=>rt(u,"enemies",O)),{c(){ot(e.$$.fragment),l=b(),ot(r.$$.fragment),c=b(),ot(i.$$.fragment),a=b(),ot(u.$$.fragment),$=b()},m(t,n){ct(e,t,n),m(t,l,n),ct(r,t,n),m(t,c,n),ct(i,t,n),m(t,a,n),ct(u,t,n),m(t,$,n),h=!0},p(t,l){const c={};16384&l&&(c.$$scope={dirty:l,ctx:t}),!n&&1&l&&(n=!0,c.value=t[0].name,U(()=>n=!1)),e.$set(c);const a={};16384&l&&(a.$$scope={dirty:l,ctx:t}),!o&&1&l&&(o=!0,a.value=t[0].playableCharacters,U(()=>o=!1)),r.$set(a);const $={};16384&l&&($.$$scope={dirty:l,ctx:t}),!s&&1&l&&(s=!0,$.value=t[0].background,U(()=>s=!1)),i.$set($);const m={};1&l&&(m.background=t[0].background),!f&&1&l&&(f=!0,m.blocks=t[0].blocks,U(()=>f=!1)),!p&&1&l&&(p=!0,m.enemies=t[0].enemies,U(()=>p=!1)),u.$set(m)},i(t){h||(Q(e.$$.fragment,t),Q(r.$$.fragment,t),Q(i.$$.fragment,t),Q(u.$$.fragment,t),h=!0)},o(t){tt(e.$$.fragment,t),tt(r.$$.fragment,t),tt(i.$$.fragment,t),tt(u.$$.fragment,t),h=!1},d(t){it(e,t),t&&d(l),it(r,t),t&&d(c),it(i,t),t&&d(a),it(u,t),t&&d($)}}}function Zn(t){let e,n;return e=new Se({props:{$$slots:{default:[qn],buttons:[Gn]},$$scope:{ctx:t}}}),e.$on("submit",t[3]),{c(){ot(e.$$.fragment)},m(t,l){ct(e,t,l),n=!0},p(t,n){const l={};16387&n&&(l.$$scope={dirty:n,ctx:t}),e.$set(l)},i(t){n||(Q(e.$$.fragment,t),n=!0)},o(t){tt(e.$$.fragment,t),n=!1},d(t){it(e,t)}}}function Wn(t){let e,n,l=null!=t[0]&&zn(t);return{c(){l&&l.c(),e=x()},m(t,r){l&&l.m(t,r),m(t,e,r),n=!0},p(t,[n]){null!=t[0]?l?(l.p(t,n),1&n&&Q(l,1)):(l=zn(t),l.c(),Q(l,1),l.m(e.parentNode,e)):l&&(X(),tt(l,1,1,()=>{l=null}),Y())},i(t){n||(Q(l),n=!0)},o(t){tt(l),n=!1},d(t){l&&l.d(t),t&&d(e)}}}function Xn(t,e,n){let l;s(t,Kn,t=>n(2,l=t));let r,o,c,{params:i={}}=e;return t.$$set=t=>{"params"in t&&n(5,i=t.params)},t.$$.update=()=>{32&t.$$.dirty&&n(11,o=decodeURIComponent(i.name)||"new"),2048&t.$$.dirty&&("new"==o?async function(){n(0,r=null),await z(),n(0,r={name:"",playableCharacters:[],background:"rgb(135, 206, 235)",blocks:[],enemies:[]})}():async function(t){n(0,r=null),await z(),n(0,r=JSON.parse(JSON.stringify(l[t])))}(o)),2048&t.$$.dirty&&n(1,c="new"==o)},[r,c,l,function(){p(Kn,l[r.name]=JSON.parse(JSON.stringify(r)),l),yt("/level-builder/levels/"+encodeURIComponent(r.name))},function(){confirm(`Are you sure you want to delete "${r.name}"?`)&&(delete l[r.name],Kn.set(l),yt("/level-builder/levels/new"))},i,function(t){r.name=t,n(0,r)},function(t){r.playableCharacters=t,n(0,r)},function(t){r.background=t,n(0,r)},function(t){r.blocks=t,n(0,r)},function(t){r.enemies=t,n(0,r)}]}class Yn extends at{constructor(t){super(),st(this,t,Xn,Wn,c,{params:5})}}function Qn(e){let n,l;return n=new xt({props:{routes:e[0],prefix:tl}}),{c(){ot(n.$$.fragment)},m(t,e){ct(n,t,e),l=!0},p:t,i(t){l||(Q(n.$$.fragment,t),l=!0)},o(t){tt(n.$$.fragment,t),l=!1},d(t){it(n,t)}}}const tl="/level-builder";function el(t,e,n){let{params:l={}}=e;const r={"/":ne,"/blocks/:name?":Ie,"/characters/:name?":ln,"/enemies/:name?":xn,"/levels/:name?":Yn};let o;return t.$$set=t=>{"params"in t&&n(1,l=t.params)},t.$$.update=()=>{2&t.$$.dirty&&(o=l.tab||"art")},[r,l]}class nl extends at{constructor(t){super(),st(this,t,el,Qn,c,{params:1})}}function ll(e){let n,l,r,o,c,i,s,a,u=e[0].name+"";return{c(){n=g("div"),l=g("p"),r=y("Level: "),o=y(u),c=b(),i=g("p"),s=y("Score: "),a=y(e[1]),S(l,"class","svelte-kfamtf"),S(i,"class","svelte-kfamtf"),S(n,"class","svelte-kfamtf")},m(t,e){m(t,n,e),$(n,l),$(l,r),$(l,o),$(n,c),$(n,i),$(i,s),$(i,a)},p(t,[e]){1&e&&u!==(u=t[0].name+"")&&N(o,u),2&e&&N(a,t[1])},i:t,o:t,d(t){t&&d(n)}}}function rl(t,e,n){let{level:l={}}=e,{score:r=0}=e;return t.$$set=t=>{"level"in t&&n(0,l=t.level),"score"in t&&n(1,r=t.score)},[l,r]}class ol extends at{constructor(t){super(),st(this,t,rl,ll,c,{level:0,score:1})}}function cl(t,e,n){const l=t.slice();return l[1]=e[n],l}function il(e){let n,l,r,o,c,i,s,a,u=e[1].key+"",f=e[1].action+"";return{c(){n=g("tr"),l=g("td"),r=y(u),o=b(),c=g("td"),i=y("= "),s=y(f),a=b(),S(l,"class","svelte-1d0wu93"),S(c,"class","svelte-1d0wu93")},m(t,e){m(t,n,e),$(n,l),$(l,r),$(n,o),$(n,c),$(c,i),$(c,s),$(n,a)},p:t,d(t){t&&d(n)}}}function sl(e){let n,l,r=e[0],o=[];for(let t=0;t<r.length;t+=1)o[t]=il(cl(e,r,t));return{c(){n=g("div"),l=g("table");for(let t=0;t<o.length;t+=1)o[t].c();S(l,"class","svelte-1d0wu93"),S(n,"class","instructions svelte-1d0wu93")},m(t,e){m(t,n,e),$(n,l);for(let t=0;t<o.length;t+=1)o[t].m(l,null)},p(t,[e]){if(1&e){let n;for(r=t[0],n=0;n<r.length;n+=1){const c=cl(t,r,n);o[n]?o[n].p(c,e):(o[n]=il(c),o[n].c(),o[n].m(l,null))}for(;n<o.length;n+=1)o[n].d(1);o.length=r.length}},i:t,o:t,d(t){t&&d(n),h(o,t)}}}function al(t){return[[{key:"Left + Right Arrow",action:"Move"},{key:"Space",action:"Jump"},{key:"R",action:"Spin Attack / Shield"},{key:"Q",action:"Heal"},{key:"Enter",action:"Restart"}]]}class ul extends at{constructor(t){super(),st(this,t,al,sl,c,{})}}function fl(t){let e,n,l;const r=t[6].default,o=a(r,t,t[5],null);return{c(){e=g("div"),n=g("div"),o&&o.c(),M(n,"position","absolute"),M(n,"left",-t[0]+"px"),M(n,"bottom",-t[1]+"px"),M(n,"height",t[3]+"px"),S(e,"class","viewport svelte-cjx02"),M(e,"width",t[2]+"px"),M(e,"height",t[3]+"px"),M(e,"background",t[4])},m(t,r){m(t,e,r),$(e,n),o&&o.m(n,null),l=!0},p(t,[c]){o&&o.p&&32&c&&f(o,r,t,t[5],c,null,null),(!l||1&c)&&M(n,"left",-t[0]+"px"),(!l||2&c)&&M(n,"bottom",-t[1]+"px"),(!l||8&c)&&M(n,"height",t[3]+"px"),(!l||4&c)&&M(e,"width",t[2]+"px"),(!l||8&c)&&M(e,"height",t[3]+"px"),(!l||16&c)&&M(e,"background",t[4])},i(t){l||(Q(o,t),l=!0)},o(t){tt(o,t),l=!1},d(t){t&&d(e),o&&o.d(t)}}}function pl(t,e,n){let{x:l=0}=e,{y:r=0}=e,{width:o=0}=e,{height:c=0}=e,{background:i=null}=e,{$$slots:s={},$$scope:a}=e;return t.$$set=t=>{"x"in t&&n(0,l=t.x),"y"in t&&n(1,r=t.y),"width"in t&&n(2,o=t.width),"height"in t&&n(3,c=t.height),"background"in t&&n(4,i=t.background),"$$scope"in t&&n(5,a=t.$$scope)},[l,r,o,c,i,a,s]}class $l extends at{constructor(t){super(),st(this,t,pl,fl,c,{x:0,y:1,width:2,height:3,background:4})}}function ml(t){let e,n;return{c(){e=g("img"),S(e,"class","graphic svelte-1kb5wuu"),e.src!==(n=t[6].png)&&S(e,"src",n),S(e,"alt",t[0]),M(e,"width",t[6].width*hl+"px"),M(e,"height",t[6].height*hl+"px"),M(e,"transform","scaleX("+t[5]+") rotate("+t[7]+"deg)")},m(t,n){m(t,e,n)},p(t,l){64&l&&e.src!==(n=t[6].png)&&S(e,"src",n),1&l&&S(e,"alt",t[0]),64&l&&M(e,"width",t[6].width*hl+"px"),64&l&&M(e,"height",t[6].height*hl+"px"),160&l&&M(e,"transform","scaleX("+t[5]+") rotate("+t[7]+"deg)")},d(t){t&&d(e)}}}function dl(t){let e,n,l,r;n=new En({props:{health:t[4],maxHealth:t[1]}});let o=null!=t[6]&&ml(t);return{c(){e=g("div"),ot(n.$$.fragment),l=b(),o&&o.c(),S(e,"class","player svelte-1kb5wuu"),M(e,"left",t[3]+"px"),M(e,"bottom",t[2]+"px")},m(t,c){m(t,e,c),ct(n,e,null),$(e,l),o&&o.m(e,null),r=!0},p(t,[l]){const c={};16&l&&(c.health=t[4]),2&l&&(c.maxHealth=t[1]),n.$set(c),null!=t[6]?o?o.p(t,l):(o=ml(t),o.c(),o.m(e,null)):o&&(o.d(1),o=null),(!r||8&l)&&M(e,"left",t[3]+"px"),(!r||4&l)&&M(e,"bottom",t[2]+"px")},i(t){r||(Q(n.$$.fragment,t),r=!0)},o(t){tt(n.$$.fragment,t),r=!1},d(t){t&&d(e),it(n),o&&o.d()}}}const hl=2;function gl(t,e,n){let l;s(t,St,t=>n(15,l=t));let r,o,{name:c}=e,{maxHealth:i}=e,{graphicStill:a}=e,{graphicSpinning:u}=e,{vx:f=0}=e,{vy:p=0}=e,{y:$=0}=e,{x:m=0}=e,{health:d}=e,{spinning:h=!1}=e,g=1,v=0,y=null;return t.$$set=t=>{"name"in t&&n(0,c=t.name),"maxHealth"in t&&n(1,i=t.maxHealth),"graphicStill"in t&&n(8,a=t.graphicStill),"graphicSpinning"in t&&n(9,u=t.graphicSpinning),"vx"in t&&n(10,f=t.vx),"vy"in t&&n(11,p=t.vy),"y"in t&&n(2,$=t.y),"x"in t&&n(3,m=t.x),"health"in t&&n(4,d=t.health),"spinning"in t&&n(12,h=t.spinning)},t.$$.update=()=>{37632&t.$$.dirty&&n(6,r=h&&null!=u?l[u]:null!=a?l[a]:null),1024&t.$$.dirty&&0!=f&&n(5,g=f>0?1:-1),28672&t.$$.dirty&&(h?n(14,y=setTimeout(()=>{n(13,v+=30)},25)):clearTimeout(y)),14336&t.$$.dirty&&n(7,o=h?v:-1*(5+(p>0?3*p:1.5*p)))},[c,i,$,m,d,g,r,o,a,u,f,p,h]}class vl extends at{constructor(t){super(),st(this,t,gl,dl,c,{name:0,maxHealth:1,graphicStill:8,graphicSpinning:9,vx:10,vy:11,y:2,x:3,health:4,spinning:12})}}function yl(t){let e,n,l,r,o,c,i,s,a,u,f=t[1].name+"";return{c(){e=g("div"),n=g("h1"),l=y(f),r=y(" is dead now. You really let him down."),o=b(),c=g("h1"),i=y("Final score: "),s=y(t[0]),a=b(),u=g("p"),u.textContent="Press enter or space to restart.",S(n,"class","svelte-1ogvx1s"),S(c,"class","svelte-1ogvx1s"),S(u,"class","svelte-1ogvx1s"),S(e,"class","game-over svelte-1ogvx1s")},m(t,f){m(t,e,f),$(e,n),$(n,l),$(n,r),$(e,o),$(e,c),$(c,i),$(c,s),$(e,a),$(e,u)},p(t,e){2&e&&f!==(f=t[1].name+"")&&N(l,f),1&e&&N(s,t[0])},d(t){t&&d(e)}}}function bl(e){let n,l=e[1]&&yl(e);return{c(){l&&l.c(),n=x()},m(t,e){l&&l.m(t,e),m(t,n,e)},p(t,[e]){t[1]?l?l.p(t,e):(l=yl(t),l.c(),l.m(n.parentNode,n)):l&&(l.d(1),l=null)},i:t,o:t,d(t){l&&l.d(t),t&&d(n)}}}function xl(t,e,n){let{score:l=0}=e,{player:r}=e;return t.$$set=t=>{"score"in t&&n(0,l=t.score),"player"in t&&n(1,r=t.player)},[l,r]}class wl extends at{constructor(t){super(),st(this,t,xl,bl,c,{score:0,player:1})}}const kl=(t,e)=>Sl(t,e)&&Ol(t,e),Sl=(t,e)=>t.x<e.x+e.width&&t.x+t.width>e.x,Ol=(t,e)=>t.y+t.height>=e.y&&t.y<=e.y+e.height;class Nl{constructor(t,e){this.alive=!0,this.tvx=2,this.width=100,this.height=50,this.x=t,this.y=e,this.vx=0,this.vy=0,this.health=100,this.maxHealth=100,this.jumpVelocity=20,this.fallDamageMultiplier=2,this.score=1,this.dps=10,this.gravityMultiplier=1,this.isBoss=!1,this.grounded=!1}q;tick(t){this.grounded&&(t.x==this.x?this.vx=0:t.x<this.x?this.vx=-this.tvx:this.vx=this.tvx,t.y>this.y+this.height&&(this.vy=this.jumpVelocity,this.y+=1))}onDeath(){}}class Hl extends Nl{constructor(t,e){super(t,e),this.health=400,this.maxHealth=400,this.score=5,this.width=400,this.height=300,this.isBoss=!0,this.dps=50}}const{window:Ml}=et;function jl(t,e,n){const l=t.slice();return l[26]=e[n],l}function Vl(t){let e,n;return e=new wl({props:{score:t[4],player:t[6]}}),{c(){ot(e.$$.fragment)},m(t,l){ct(e,t,l),n=!0},p(t,n){const l={};16&n&&(l.score=t[4]),64&n&&(l.player=t[6]),e.$set(l)},i(t){n||(Q(e.$$.fragment,t),n=!0)},o(t){tt(e.$$.fragment,t),n=!1},d(t){it(e,t)}}}function Cl(t){let n,l;const r=[t[9],{background:t[0].background}];let o={$$slots:{default:[Al]},$$scope:{ctx:t}};for(let t=0;t<r.length;t+=1)o=e(o,r[t]);return n=new $l({props:o}),{c(){ot(n.$$.fragment)},m(t,e){ct(n,t,e),l=!0},p(t,e){const l=513&e?nt(r,[512&e&&lt(t[9]),1&e&&{background:t[0].background}]):{};536871118&e&&(l.$$scope={dirty:e,ctx:t}),n.$set(l)},i(t){l||(Q(n.$$.fragment,t),l=!0)},o(t){tt(n.$$.fragment,t),l=!1},d(t){it(n,t)}}}function El(t){let n,l;const r=[t[26]];let o={};for(let t=0;t<r.length;t+=1)o=e(o,r[t]);return n=new _n({props:o}),{c(){ot(n.$$.fragment)},m(t,e){ct(n,t,e),l=!0},p(t,e){const l=128&e?nt(r,[lt(t[26])]):{};n.$set(l)},i(t){l||(Q(n.$$.fragment,t),l=!0)},o(t){tt(n.$$.fragment,t),l=!1},d(t){it(n,t)}}}function Al(t){let n,l,r,o,c;n=new jn({props:{blocks:t[1],width:t[2],height:t[3]}});let i=t[7],s=[];for(let e=0;e<i.length;e+=1)s[e]=El(jl(t,i,e));const a=t=>tt(s[t],1,1,()=>{s[t]=null}),u=[t[6]];let f={};for(let t=0;t<u.length;t+=1)f=e(f,u[t]);return o=new vl({props:f}),{c(){ot(n.$$.fragment),l=b();for(let t=0;t<s.length;t+=1)s[t].c();r=b(),ot(o.$$.fragment)},m(t,e){ct(n,t,e),m(t,l,e);for(let n=0;n<s.length;n+=1)s[n].m(t,e);m(t,r,e),ct(o,t,e),c=!0},p(t,e){const l={};if(2&e&&(l.blocks=t[1]),4&e&&(l.width=t[2]),8&e&&(l.height=t[3]),n.$set(l),128&e){let n;for(i=t[7],n=0;n<i.length;n+=1){const l=jl(t,i,n);s[n]?(s[n].p(l,e),Q(s[n],1)):(s[n]=El(l),s[n].c(),Q(s[n],1),s[n].m(r.parentNode,r))}for(X(),n=i.length;n<s.length;n+=1)a(n);Y()}const c=64&e?nt(u,[lt(t[6])]):{};o.$set(c)},i(t){if(!c){Q(n.$$.fragment,t);for(let t=0;t<i.length;t+=1)Q(s[t]);Q(o.$$.fragment,t),c=!0}},o(t){tt(n.$$.fragment,t),s=s.filter(Boolean);for(let t=0;t<s.length;t+=1)tt(s[t]);tt(o.$$.fragment,t),c=!1},d(t){it(n,t),t&&d(l),h(s,t),t&&d(r),it(o,t)}}}function Dl(t){let e,n,l,o,c,i,s,a,u,f=t[8]&&Vl(t),p=null!=t[0]&&null!=t[6]&&Cl(t);return o=new ol({props:{level:t[0],score:t[4]}}),i=new ul({}),{c(){e=g("div"),f&&f.c(),n=b(),p&&p.c(),l=b(),ot(o.$$.fragment),c=b(),ot(i.$$.fragment),S(e,"class","game-window svelte-1ihy09s")},m(r,d){m(r,e,d),f&&f.m(e,null),$(e,n),p&&p.m(e,null),$(e,l),ct(o,e,null),$(e,c),ct(i,e,null),t[13](e),s=!0,a||(u=[w(Ml,"keydown",t[10]),w(Ml,"keyup",t[11])],a=!0)},p(t,[r]){t[8]?f?(f.p(t,r),256&r&&Q(f,1)):(f=Vl(t),f.c(),Q(f,1),f.m(e,n)):f&&(X(),tt(f,1,1,()=>{f=null}),Y()),null!=t[0]&&null!=t[6]?p?(p.p(t,r),65&r&&Q(p,1)):(p=Cl(t),p.c(),Q(p,1),p.m(e,l)):p&&(X(),tt(p,1,1,()=>{p=null}),Y());const c={};1&r&&(c.level=t[0]),16&r&&(c.score=t[4]),o.$set(c)},i(t){s||(Q(f),Q(p),Q(o.$$.fragment,t),Q(i.$$.fragment,t),s=!0)},o(t){tt(f),tt(p),tt(o.$$.fragment,t),tt(i.$$.fragment,t),s=!1},d(n){n&&d(e),f&&f.d(),p&&p.d(),it(o),it(i),t[13](null),a=!1,r(u)}}}function _l(t,e,n){let l,r;s(t,Oe,t=>n(20,l=t)),s(t,St,t=>n(21,r=t));let o,c,i,a,u,{level:f=null}=e,{character:p=null}=e,$=0,m=0,d=0,h=!1,g=!0,v=null,y={width:window.innerWidth,height:800},b=!1,x=!1;var w;let k;function S(){n(4,d=0),n(6,a={...p,health:p.maxHealth,tvx:p.maxVelocity,width:2*r[p.graphicStill].width,height:2*r[p.graphicStill].height,x:o[0].x,y:o[0].y+o[0].height+100,vx:0,vy:0,spinning:!1,tick(){a.grounded&&n(6,a.vx=b&&!x?-a.tvx:x&&!b?a.tvx:0,a)}}),n(7,u=[]),n(8,h=!1),null==v&&O()}function O(){if(!h){n(6,a=N(a,!0)),a.tick(),k=25*f.length;const t=y.width/2,e=y.height/2;n(9,y.x=a.x<t?0:a.x>k-t?k-y.width:a.x-t,y),n(9,y.y=a.y<e?0:a.y-e,y),u.some(t=>t.health>0)||(u.length<5?n(7,u=u.concat([1,2,3,4,5].map(t=>new Nl(a.x+200*t,a.y+200)))):n(7,u=[new Hl(a.x+200,a.y+200)]));for(let t=0;t<u.length;t++)u[t].alive&&(n(7,u[t]=N(u[t]),u),u[t].tick(a),kl(a,u[t])&&(a.spinning?(n(7,u[t].gettingHit=!0,u),n(7,u[t].health-=a.dps/60,u)):n(6,a.health-=u[t].dps/60,a)),u[t].health<=0&&(n(7,u[t].alive=!1,u),u[t].onDeath(),n(4,d+=u[t].score)));a.health<=0&&n(8,h=!0)}g&&(v=window.requestAnimationFrame(O))}function N(t,e=!1){const n=o.filter(e=>e.solid&&((t,e)=>t.y>=e.y+e.height&&Sl(t,e))(t,e)).map(t=>t.y+t.height),l=n.length>0?Math.max(...n):-500;if(t.y+=t.vy,t.grounded=t.y<=l,t.grounded?(t.vy<0&&(t.health+=t.vy/10*t.fallDamageMultiplier,t.vy=0),t.y=l):t.y<-200?t.health=0:t.vy-=1,0!=t.vx)if(t.vx>0){const e=t.x+t.vx;t.x=e>k?k:e}else{const e=0,n=t.x+t.vx;t.x=n<e?e:n}for(let e=0;e<c.length;e++)kl(t,c[e])&&(t.health-=c[e].dps/60,c[e].throwOnTouch&&(t.vy=20));return t}return w=()=>{n(1,o=f.blocks.sort((t,e)=>t.x>e.x?1:e.x>t.x||t.y>e.y?-1:e.y>t.y?1:0).map(t=>({...t,solid:l[t.name].solid,png:r[l[t.name].graphic].png,dps:l[t.name].dps,throwOnTouch:l[t.name].throwOnTouch}))),c=o.filter(t=>t.dps>0),n(2,$=Math.max(...o.map(t=>t.x+t.width))),n(3,m=800),S()},E().$$.on_mount.push(w),function(t){E().$$.on_destroy.push(t)}(()=>{g=!1,window.cancelAnimationFrame(v)}),t.$$set=t=>{"level"in t&&n(0,f=t.level),"character"in t&&n(12,p=t.character)},[f,o,$,m,d,i,a,u,h,y,function(t){if(!h)switch(t.code){case"ArrowLeft":b=!0;break;case"ArrowRight":x=!0;break;case"Space":a.grounded&&n(6,a.vy=a.jumpVelocity,a);break;case"KeyR":n(6,a.spinning=!0,a);break;case"KeyQ":n(6,a.health=a.maxHealth,a)}},function(t){switch(t.code){case"ArrowLeft":b=!1;break;case"ArrowRight":x=!1;break;case"Space":h&&S();break;case"KeyR":n(6,a.spinning=!1,a);break;case"Enter":case"NumpadEnter":S();break;default:console.log(t.code)}},p,function(t){J[t?"unshift":"push"](()=>{i=t,n(5,i)})}]}class Jl extends at{constructor(t){super(),st(this,t,_l,Dl,c,{level:0,character:12})}}function Rl(t,e,n){const l=t.slice();return l[4]=e[n],l}function Il(t,e,n){const l=t.slice();return l[3]=e[n],l}function Tl(t){let e,n,l=t[0],r=[];for(let e=0;e<l.length;e+=1)r[e]=zl(Il(t,l,e));const o=t=>tt(r[t],1,1,()=>{r[t]=null});return{c(){e=g("div");for(let t=0;t<r.length;t+=1)r[t].c();S(e,"class","list-group")},m(t,l){m(t,e,l);for(let t=0;t<r.length;t+=1)r[t].m(e,null);n=!0},p(t,n){if(39&n){let c;for(l=t[0],c=0;c<l.length;c+=1){const o=Il(t,l,c);r[c]?(r[c].p(o,n),Q(r[c],1)):(r[c]=zl(o),r[c].c(),Q(r[c],1),r[c].m(e,null))}for(X(),c=l.length;c<r.length;c+=1)o(c);Y()}},i(t){if(!n){for(let t=0;t<l.length;t+=1)Q(r[t]);n=!0}},o(t){r=r.filter(Boolean);for(let t=0;t<r.length;t+=1)tt(r[t]);n=!1},d(t){t&&d(e),h(r,t)}}}function Bl(t){let e,n,l,r,o,c,i,s,a,u,f,p,h,v,x,k,O;return v=new Jl({props:{level:t[1][t[3]],character:t[2][t[4]]}}),{c(){e=g("div"),n=g("button"),n.textContent="< Change level",l=b(),r=g("a"),o=y("Edit "),c=y(t[3]),s=b(),a=g("a"),u=y("Edit "),f=y(t[4]),h=b(),ot(v.$$.fragment),S(n,"type","button"),S(n,"class","btn btn-info"),S(r,"href",i="#/level-builder/levels/"+encodeURIComponent(t[3])),S(r,"class","btn btn-secondary"),S(r,"role","button"),S(a,"href",p="#/level-builder/characters/"+encodeURIComponent(t[4])),S(a,"class","btn btn-secondary"),S(a,"role","button"),S(e,"class","mb-2")},m(i,p){m(i,e,p),$(e,n),$(e,l),$(e,r),$(r,o),$(r,c),$(e,s),$(e,a),$(a,u),$(a,f),m(i,h,p),ct(v,i,p),x=!0,k||(O=w(n,"click",t[6]),k=!0)},p(t,e){(!x||8&e)&&N(c,t[3]),(!x||8&e&&i!==(i="#/level-builder/levels/"+encodeURIComponent(t[3])))&&S(r,"href",i),(!x||16&e)&&N(f,t[4]),(!x||16&e&&p!==(p="#/level-builder/characters/"+encodeURIComponent(t[4])))&&S(a,"href",p);const n={};10&e&&(n.level=t[1][t[3]]),20&e&&(n.character=t[2][t[4]]),v.$set(n)},i(t){x||(Q(v.$$.fragment,t),x=!0)},o(t){tt(v.$$.fragment,t),x=!1},d(t){t&&d(e),t&&d(h),it(v,t),k=!1,O()}}}function Kl(t){let e,n,l,r,o,c,i,s,a,u,f=t[3]+"",p=t[4]+"";function h(...e){return t[7](t[3],t[4],...e)}return n=new Mt({props:{name:t[2][t[4]].graphicStill}}),{c(){e=g("div"),ot(n.$$.fragment),l=b(),r=y(f),o=y(" as "),c=y(p),i=b(),S(e,"class","list-group-item list-group-item-action")},m(t,f){m(t,e,f),ct(n,e,null),$(e,l),$(e,r),$(e,o),$(e,c),$(e,i),s=!0,a||(u=w(e,"click",h),a=!0)},p(e,l){t=e;const o={};7&l&&(o.name=t[2][t[4]].graphicStill),n.$set(o),(!s||1&l)&&f!==(f=t[3]+"")&&N(r,f),(!s||3&l)&&p!==(p=t[4]+"")&&N(c,p)},i(t){s||(Q(n.$$.fragment,t),s=!0)},o(t){tt(n.$$.fragment,t),s=!1},d(t){t&&d(e),it(n),a=!1,u()}}}function zl(t){let e,n,l=t[1][t[3]].playableCharacters,r=[];for(let e=0;e<l.length;e+=1)r[e]=Kl(Rl(t,l,e));const o=t=>tt(r[t],1,1,()=>{r[t]=null});return{c(){for(let t=0;t<r.length;t+=1)r[t].c();e=x()},m(t,l){for(let e=0;e<r.length;e+=1)r[e].m(t,l);m(t,e,l),n=!0},p(t,n){if(39&n){let c;for(l=t[1][t[3]].playableCharacters,c=0;c<l.length;c+=1){const o=Rl(t,l,c);r[c]?(r[c].p(o,n),Q(r[c],1)):(r[c]=Kl(o),r[c].c(),Q(r[c],1),r[c].m(e.parentNode,e))}for(X(),c=l.length;c<r.length;c+=1)o(c);Y()}},i(t){if(!n){for(let t=0;t<l.length;t+=1)Q(r[t]);n=!0}},o(t){r=r.filter(Boolean);for(let t=0;t<r.length;t+=1)tt(r[t]);n=!1},d(t){h(r,t),t&&d(e)}}}function Ll(t){let e,n,l,r;const o=[Bl,Tl],c=[];function i(t,e){return null!=t[3]?0:1}return e=i(t),n=c[e]=o[e](t),{c(){n.c(),l=x()},m(t,n){c[e].m(t,n),m(t,l,n),r=!0},p(t,[r]){let s=e;e=i(t),e===s?c[e].p(t,r):(X(),tt(c[s],1,1,()=>{c[s]=null}),Y(),n=c[e],n||(n=c[e]=o[e](t),n.c()),Q(n,1),n.m(l.parentNode,l))},i(t){r||(Q(n),r=!0)},o(t){tt(n),r=!1},d(t){c[e].d(t),t&&d(l)}}}function Ul(t,e,n){let l,r,o,c;function i(t,e){n(3,o=t),n(4,c=e)}s(t,Kn,t=>n(1,l=t)),s(t,Te,t=>n(2,r=t));let a;return t.$$.update=()=>{2&t.$$.dirty&&n(0,a=Object.keys(l).sort())},[a,l,r,o,c,i,()=>n(3,o=null),(t,e)=>i(t,e)]}class Pl extends at{constructor(t){super(),st(this,t,Ul,Ll,c,{})}}function Fl(e){let n;return{c(){n=g("h1"),n.textContent="Page not found"},m(t,e){m(t,n,e)},p:t,i:t,o:t,d(t){t&&d(n)}}}class Gl extends at{constructor(t){super(),st(this,t,null,Fl,c,{})}}function ql(t){let e;return{c(){e=g("li"),e.innerHTML='<a class="nav-link" href="#/play">Play!</a>',S(e,"class","nav-item")},m(t,n){m(t,e,n)},d(t){t&&d(e)}}}function Zl(t){let e,n,l,r,o,c,i,s=t[0]&&ql();return c=new xt({props:{routes:t[1]}}),{c(){e=g("ul"),n=g("li"),n.innerHTML='<a class="nav-link" href="#/level-builder">Level Builder</a>',l=b(),s&&s.c(),r=b(),o=g("main"),ot(c.$$.fragment),S(n,"class","nav-item"),S(e,"class","nav"),S(o,"class","svelte-1ten5ne")},m(t,a){m(t,e,a),$(e,n),$(e,l),s&&s.m(e,null),m(t,r,a),m(t,o,a),ct(c,o,null),i=!0},p(t,[n]){t[0]?s||(s=ql(),s.c(),s.m(e,null)):s&&(s.d(1),s=null)},i(t){i||(Q(c.$$.fragment,t),i=!0)},o(t){tt(c.$$.fragment,t),i=!1},d(t){t&&d(e),s&&s.d(),t&&d(r),t&&d(o),it(c)}}}function Wl(t,e,n){let l;s(t,Kn,t=>n(2,l=t));const r={"/level-builder/:tab?/:name?":nl,"/play":Pl,"*":Gl};let o;return t.$$.update=()=>{4&t.$$.dirty&&n(0,o=Object.keys(l).length>0)},[o,r]}return new class extends at{constructor(t){super(),st(this,t,Wl,Zl,c,{})}}({target:document.body,props:{name:"world"}})}();
//# sourceMappingURL=bundle.js.map

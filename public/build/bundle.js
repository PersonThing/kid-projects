var app=function(){"use strict";function t(){}function e(t,e){for(const n in e)t[n]=e[n];return t}function n(t){return t()}function l(){return Object.create(null)}function i(t){t.forEach(n)}function r(t){return"function"==typeof t}function a(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function o(e,...n){if(null==e)return t;const l=e.subscribe(...n);return l.unsubscribe?()=>l.unsubscribe():l}function s(t,e,n){t.$$.on_destroy.push(o(e,n))}function c(t,e,n,l){if(t){const i=u(t,e,n,l);return t[0](i)}}function u(t,n,l,i){return t[1]&&i?e(l.ctx.slice(),t[1](i(n))):l.ctx}function d(t,e,n,l,i,r,a){const o=function(t,e,n,l){if(t[2]&&l){const i=t[2](l(n));if(void 0===e.dirty)return i;if("object"==typeof i){const t=[],n=Math.max(e.dirty.length,i.length);for(let l=0;l<n;l+=1)t[l]=e.dirty[l]|i[l];return t}return e.dirty|i}return e.dirty}(e,l,i,r);if(o){const i=u(e,n,l,a);t.p(i,o)}}function p(t){return null==t?"":t}function f(t,e,n=e){return t.set(n),e}function m(t,e){t.appendChild(e)}function $(t,e,n){t.insertBefore(e,n||null)}function h(t){t.parentNode.removeChild(t)}function g(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function v(t){return document.createElement(t)}function b(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function y(t){return document.createTextNode(t)}function x(){return y(" ")}function w(){return y("")}function k(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function q(t){return function(e){return e.preventDefault(),t.call(this,e)}}function S(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function C(t,e){for(const n in e)S(t,n,e[n])}function N(t){return""===t?void 0:+t}function M(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function O(t,e){t.value=null==e?"":e}function j(t,e,n,l){t.style.setProperty(e,n,l?"important":"")}function E(t,e,n){t.classList[n?"add":"remove"](e)}class D{constructor(t=null){this.a=t,this.e=this.n=null}m(t,e,n=null){this.e||(this.e=v(e.nodeName),this.t=e,this.h(t)),this.i(n)}h(t){this.e.innerHTML=t,this.n=Array.from(this.e.childNodes)}i(t){for(let e=0;e<this.n.length;e+=1)$(this.t,this.n[e],t)}p(t){this.d(),this.h(t),this.i(this.a)}d(){this.n.forEach(h)}}let I;function R(t){I=t}function H(){if(!I)throw new Error("Function called outside component initialization");return I}function T(t){H().$$.on_mount.push(t)}function L(t){H().$$.on_destroy.push(t)}function A(){const t=H();return(e,n)=>{const l=t.$$.callbacks[e];if(l){const i=function(t,e){const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}(e,n);l.slice().forEach(e=>{e.call(t,i)})}}}function P(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(t=>t(e))}const V=[],J=[],_=[],Y=[],B=Promise.resolve();let F=!1;function z(){F||(F=!0,B.then(Q))}function U(){return z(),B}function K(t){_.push(t)}function W(t){Y.push(t)}let X=!1;const G=new Set;function Q(){if(!X){X=!0;do{for(let t=0;t<V.length;t+=1){const e=V[t];R(e),Z(e.$$)}for(V.length=0;J.length;)J.pop()();for(let t=0;t<_.length;t+=1){const e=_[t];G.has(e)||(G.add(e),e())}_.length=0}while(V.length);for(;Y.length;)Y.pop()();F=!1,X=!1,G.clear()}}function Z(t){if(null!==t.fragment){t.update(),i(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(K)}}const tt=new Set;let et;function nt(){et={r:0,c:[],p:et}}function lt(){et.r||i(et.c),et=et.p}function it(t,e){t&&t.i&&(tt.delete(t),t.i(e))}function rt(t,e,n,l){if(t&&t.o){if(tt.has(t))return;tt.add(t),et.c.push(()=>{tt.delete(t),l&&(n&&t.d(1),l())}),t.o(e)}}const at="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function ot(t,e){rt(t,1,1,()=>{e.delete(t.key)})}function st(t,e){const n={},l={},i={$$scope:1};let r=t.length;for(;r--;){const a=t[r],o=e[r];if(o){for(const t in a)t in o||(l[t]=1);for(const t in o)i[t]||(n[t]=o[t],i[t]=1);t[r]=o}else for(const t in a)i[t]=1}for(const t in l)t in n||(n[t]=void 0);return n}function ct(t){return"object"==typeof t&&null!==t?t:{}}function ut(t,e,n){const l=t.$$.props[e];void 0!==l&&(t.$$.bound[l]=n,n(t.$$.ctx[l]))}function dt(t){t&&t.c()}function pt(t,e,l){const{fragment:a,on_mount:o,on_destroy:s,after_update:c}=t.$$;a&&a.m(e,l),K(()=>{const e=o.map(n).filter(r);s?s.push(...e):i(e),t.$$.on_mount=[]}),c.forEach(K)}function ft(t,e){const n=t.$$;null!==n.fragment&&(i(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function mt(e,n,r,a,o,s,c=[-1]){const u=I;R(e);const d=n.props||{},p=e.$$={fragment:null,ctx:null,props:s,update:t,not_equal:o,bound:l(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(u?u.$$.context:[]),callbacks:l(),dirty:c,skip_bound:!1};let f=!1;if(p.ctx=r?r(e,d,(t,n,...l)=>{const i=l.length?l[0]:n;return p.ctx&&o(p.ctx[t],p.ctx[t]=i)&&(!p.skip_bound&&p.bound[t]&&p.bound[t](i),f&&function(t,e){-1===t.$$.dirty[0]&&(V.push(t),z(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}(e,t)),n}):[],p.update(),f=!0,i(p.before_update),p.fragment=!!a&&a(p.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);p.fragment&&p.fragment.l(t),t.forEach(h)}else p.fragment&&p.fragment.c();n.intro&&it(e.$$.fragment),pt(e,n.target,n.anchor),Q()}R(u)}class $t{$destroy(){ft(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const ht=[];function gt(t,e){return{subscribe:vt(t,e).subscribe}}function vt(e,n=t){let l;const i=[];function r(t){if(a(e,t)&&(e=t,l)){const t=!ht.length;for(let t=0;t<i.length;t+=1){const n=i[t];n[1](),ht.push(n,e)}if(t){for(let t=0;t<ht.length;t+=2)ht[t][0](ht[t+1]);ht.length=0}}}return{set:r,update:function(t){r(t(e))},subscribe:function(a,o=t){const s=[a,o];return i.push(s),1===i.length&&(l=n(r)||t),a(e),()=>{const t=i.indexOf(s);-1!==t&&i.splice(t,1),0===i.length&&(l(),l=null)}}}}function bt(e,n,l){const a=!Array.isArray(e),s=a?[e]:e,c=n.length<2;return gt(l,e=>{let l=!1;const u=[];let d=0,p=t;const f=()=>{if(d)return;p();const l=n(a?u[0]:u,e);c?e(l):p=r(l)?l:t},m=s.map((t,e)=>o(t,t=>{u[e]=t,d&=~(1<<e),l&&f()},()=>{d|=1<<e}));return l=!0,f(),function(){i(m),p()}})}function yt(t){let e,n,l;var i=t[0];return i&&(e=new i({}),e.$on("routeEvent",t[5])),{c(){e&&dt(e.$$.fragment),n=w()},m(t,i){e&&pt(e,t,i),$(t,n,i),l=!0},p(t,l){if(i!==(i=t[0])){if(e){nt();const t=e;rt(t.$$.fragment,1,0,()=>{ft(t,1)}),lt()}i?(e=new i({}),e.$on("routeEvent",t[5]),dt(e.$$.fragment),it(e.$$.fragment,1),pt(e,n.parentNode,n)):e=null}},i(t){l||(e&&it(e.$$.fragment,t),l=!0)},o(t){e&&rt(e.$$.fragment,t),l=!1},d(t){t&&h(n),e&&ft(e,t)}}}function xt(t){let e,n,l;var i=t[0];function r(t){return{props:{params:t[1]}}}return i&&(e=new i(r(t)),e.$on("routeEvent",t[4])),{c(){e&&dt(e.$$.fragment),n=w()},m(t,i){e&&pt(e,t,i),$(t,n,i),l=!0},p(t,l){const a={};if(2&l&&(a.params=t[1]),i!==(i=t[0])){if(e){nt();const t=e;rt(t.$$.fragment,1,0,()=>{ft(t,1)}),lt()}i?(e=new i(r(t)),e.$on("routeEvent",t[4]),dt(e.$$.fragment),it(e.$$.fragment,1),pt(e,n.parentNode,n)):e=null}else i&&e.$set(a)},i(t){l||(e&&it(e.$$.fragment,t),l=!0)},o(t){e&&rt(e.$$.fragment,t),l=!1},d(t){t&&h(n),e&&ft(e,t)}}}function wt(t){let e,n,l,i;const r=[xt,yt],a=[];function o(t,e){return t[1]?0:1}return e=o(t),n=a[e]=r[e](t),{c(){n.c(),l=w()},m(t,n){a[e].m(t,n),$(t,l,n),i=!0},p(t,[i]){let s=e;e=o(t),e===s?a[e].p(t,i):(nt(),rt(a[s],1,1,()=>{a[s]=null}),lt(),n=a[e],n||(n=a[e]=r[e](t),n.c()),it(n,1),n.m(l.parentNode,l))},i(t){i||(it(n),i=!0)},o(t){rt(n),i=!1},d(t){a[e].d(t),t&&h(l)}}}function kt(){const t=window.location.href.indexOf("#/");let e=t>-1?window.location.href.substr(t+1):"/";const n=e.indexOf("?");let l="";return n>-1&&(l=e.substr(n+1),e=e.substr(0,n)),{location:e,querystring:l}}const qt=gt(null,(function(t){t(kt());const e=()=>{t(kt())};return window.addEventListener("hashchange",e,!1),function(){window.removeEventListener("hashchange",e,!1)}}));bt(qt,t=>t.location),bt(qt,t=>t.querystring);function St(t){if(!t||t.length<1||"/"!=t.charAt(0)&&0!==t.indexOf("#/"))throw Error("Invalid parameter location");return U().then(()=>{window.location.hash=("#"==t.charAt(0)?"":"#")+t})}function Ct(e,n,l){let i,r=t;s(e,qt,t=>l(6,i=t)),e.$$.on_destroy.push(()=>r());let{routes:a={}}=n,{prefix:o=""}=n;class c{constructor(t,e){if(!e||"function"!=typeof e&&("object"!=typeof e||!0!==e._sveltesparouter))throw Error("Invalid component object");if(!t||"string"==typeof t&&(t.length<1||"/"!=t.charAt(0)&&"*"!=t.charAt(0))||"object"==typeof t&&!(t instanceof RegExp))throw Error('Invalid value for "path" argument');const{pattern:n,keys:l}=function(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var n,l,i,r,a=[],o="",s=t.split("/");for(s[0]||s.shift();i=s.shift();)"*"===(n=i[0])?(a.push("wild"),o+="/(.*)"):":"===n?(l=i.indexOf("?",1),r=i.indexOf(".",1),a.push(i.substring(1,~l?l:~r?r:i.length)),o+=~l&&!~r?"(?:/([^/]+?))?":"/([^/]+?)",~r&&(o+=(~l?"?":"")+"\\"+i.substring(r))):o+="/"+i;return{keys:a,pattern:new RegExp("^"+o+(e?"(?=$|/)":"/?$"),"i")}}(t);this.path=t,"object"==typeof e&&!0===e._sveltesparouter?(this.component=e.route,this.conditions=e.conditions||[],this.userData=e.userData):(this.component=e,this.conditions=[],this.userData=void 0),this._pattern=n,this._keys=l}match(t){o&&t.startsWith(o)&&(t=t.substr(o.length)||"/");const e=this._pattern.exec(t);if(null===e)return null;if(!1===this._keys)return e;const n={};let l=0;for(;l<this._keys.length;)n[this._keys[l]]=e[++l]||null;return n}checkConditions(t){for(let e=0;e<this.conditions.length;e++)if(!this.conditions[e](t))return!1;return!0}}const u=[];a instanceof Map?a.forEach((t,e)=>{u.push(new c(e,t))}):Object.keys(a).forEach(t=>{u.push(new c(t,a[t]))});let d=null,p=null;const f=A(),m=(t,e)=>{U().then(()=>{f(t,e)})};return e.$$set=t=>{"routes"in t&&l(2,a=t.routes),"prefix"in t&&l(3,o=t.prefix)},e.$$.update=()=>{if(65&e.$$.dirty){l(0,d=null);let t=0;for(;!d&&t<u.length;){const e=u[t].match(i.location);if(e){const n={component:u[t].component,name:u[t].component.name,location:i.location,querystring:i.querystring,userData:u[t].userData};if(!u[t].checkConditions(n)){m("conditionsFailed",n);break}l(0,d=u[t].component),e&&"object"==typeof e&&Object.keys(e).length?l(1,p=e):l(1,p=null),m("routeLoaded",n)}t++}}},[d,p,a,o,function(t){P(e,t)},function(t){P(e,t)}]}class Nt extends $t{constructor(t){super(),mt(this,t,Ct,wt,a,{routes:2,prefix:3})}}function Mt(n){let l,i,r=[{key:i="path-"+n[0]},n[1]],a={};for(let t=0;t<r.length;t+=1)a=e(a,r[t]);return{c(){l=b("path"),C(l,a)},m(t,e){$(t,l,e)},p(t,[e]){C(l,a=st(r,[1&e&&i!==(i="path-"+t[0])&&{key:i},2&e&&t[1]]))},i:t,o:t,d(t){t&&h(l)}}}function Ot(t,e,n){let{id:l=""}=e,{data:i={}}=e;return t.$$set=t=>{"id"in t&&n(0,l=t.id),"data"in t&&n(1,i=t.data)},[l,i]}class jt extends $t{constructor(t){super(),mt(this,t,Ot,Mt,a,{id:0,data:1})}}function Et(n){let l,i,r=[{key:i="polygon-"+n[0]},n[1]],a={};for(let t=0;t<r.length;t+=1)a=e(a,r[t]);return{c(){l=b("polygon"),C(l,a)},m(t,e){$(t,l,e)},p(t,[e]){C(l,a=st(r,[1&e&&i!==(i="polygon-"+t[0])&&{key:i},2&e&&t[1]]))},i:t,o:t,d(t){t&&h(l)}}}function Dt(t,e,n){let{id:l=""}=e,{data:i={}}=e;return t.$$set=t=>{"id"in t&&n(0,l=t.id),"data"in t&&n(1,i=t.data)},[l,i]}class It extends $t{constructor(t){super(),mt(this,t,Dt,Et,a,{id:0,data:1})}}function Rt(e){let n;return{c(){n=b("g")},m(t,l){$(t,n,l),n.innerHTML=e[0]},p(t,[e]){1&e&&(n.innerHTML=t[0])},i:t,o:t,d(t){t&&h(n)}}}function Ht(t,e,n){let l,i=870711;let{data:r}=e;function a(t){if(!t||!t.raw)return null;let e=t.raw;const n={};return e=e.replace(/\s(?:xml:)?id=["']?([^"')\s]+)/g,(t,e)=>{const l=(i+=1,"fa-"+i.toString(16));return n[e]=l,` id="${l}"`}),e=e.replace(/#(?:([^'")\s]+)|xpointer\(id\((['"]?)([^')]+)\2\)\))/g,(t,e,l,i)=>{const r=e||i;return r&&n[r]?"#"+n[r]:t}),e}return t.$$set=t=>{"data"in t&&n(1,r=t.data)},t.$$.update=()=>{2&t.$$.dirty&&n(0,l=a(r))},[l,r]}class Tt extends $t{constructor(t){super(),mt(this,t,Ht,Rt,a,{data:1})}}function Lt(t){let e,n,l,i;const r=t[13].default,a=c(r,t,t[12],null);return{c(){e=b("svg"),a&&a.c(),S(e,"version","1.1"),S(e,"class",n="fa-icon "+t[0]+" svelte-1dof0an"),S(e,"x",t[8]),S(e,"y",t[9]),S(e,"width",t[1]),S(e,"height",t[2]),S(e,"aria-label",t[11]),S(e,"role",l=t[11]?"img":"presentation"),S(e,"viewBox",t[3]),S(e,"style",t[10]),E(e,"fa-spin",t[4]),E(e,"fa-pulse",t[6]),E(e,"fa-inverse",t[5]),E(e,"fa-flip-horizontal","horizontal"===t[7]),E(e,"fa-flip-vertical","vertical"===t[7])},m(t,n){$(t,e,n),a&&a.m(e,null),i=!0},p(t,[o]){a&&a.p&&4096&o&&d(a,r,t,t[12],o,null,null),(!i||1&o&&n!==(n="fa-icon "+t[0]+" svelte-1dof0an"))&&S(e,"class",n),(!i||256&o)&&S(e,"x",t[8]),(!i||512&o)&&S(e,"y",t[9]),(!i||2&o)&&S(e,"width",t[1]),(!i||4&o)&&S(e,"height",t[2]),(!i||2048&o)&&S(e,"aria-label",t[11]),(!i||2048&o&&l!==(l=t[11]?"img":"presentation"))&&S(e,"role",l),(!i||8&o)&&S(e,"viewBox",t[3]),(!i||1024&o)&&S(e,"style",t[10]),17&o&&E(e,"fa-spin",t[4]),65&o&&E(e,"fa-pulse",t[6]),33&o&&E(e,"fa-inverse",t[5]),129&o&&E(e,"fa-flip-horizontal","horizontal"===t[7]),129&o&&E(e,"fa-flip-vertical","vertical"===t[7])},i(t){i||(it(a,t),i=!0)},o(t){rt(a,t),i=!1},d(t){t&&h(e),a&&a.d(t)}}}function At(t,e,n){let{class:l}=e,{width:i}=e,{height:r}=e,{box:a}=e,{spin:o=!1}=e,{inverse:s=!1}=e,{pulse:c=!1}=e,{flip:u=null}=e,{x:d}=e,{y:p}=e,{style:f}=e,{label:m}=e,{$$slots:$={},$$scope:h}=e;return t.$$set=t=>{"class"in t&&n(0,l=t.class),"width"in t&&n(1,i=t.width),"height"in t&&n(2,r=t.height),"box"in t&&n(3,a=t.box),"spin"in t&&n(4,o=t.spin),"inverse"in t&&n(5,s=t.inverse),"pulse"in t&&n(6,c=t.pulse),"flip"in t&&n(7,u=t.flip),"x"in t&&n(8,d=t.x),"y"in t&&n(9,p=t.y),"style"in t&&n(10,f=t.style),"label"in t&&n(11,m=t.label),"$$scope"in t&&n(12,h=t.$$scope)},[l,i,r,a,o,s,c,u,d,p,f,m,h,$]}class Pt extends $t{constructor(t){super(),mt(this,t,At,Lt,a,{class:0,width:1,height:2,box:3,spin:4,inverse:5,pulse:6,flip:7,x:8,y:9,style:10,label:11})}}function Vt(t,e,n){const l=t.slice();return l[24]=e[n],l[26]=n,l}function Jt(t,e,n){const l=t.slice();return l[27]=e[n],l[26]=n,l}function _t(t){let e,n,l,i,r=t[0].paths&&Yt(t),a=t[0].polygons&&Ft(t),o=t[0].raw&&Ut(t);return{c(){r&&r.c(),e=x(),a&&a.c(),n=x(),o&&o.c(),l=w()},m(t,s){r&&r.m(t,s),$(t,e,s),a&&a.m(t,s),$(t,n,s),o&&o.m(t,s),$(t,l,s),i=!0},p(t,i){t[0].paths?r?(r.p(t,i),1&i&&it(r,1)):(r=Yt(t),r.c(),it(r,1),r.m(e.parentNode,e)):r&&(nt(),rt(r,1,1,()=>{r=null}),lt()),t[0].polygons?a?(a.p(t,i),1&i&&it(a,1)):(a=Ft(t),a.c(),it(a,1),a.m(n.parentNode,n)):a&&(nt(),rt(a,1,1,()=>{a=null}),lt()),t[0].raw?o?(o.p(t,i),1&i&&it(o,1)):(o=Ut(t),o.c(),it(o,1),o.m(l.parentNode,l)):o&&(nt(),rt(o,1,1,()=>{o=null}),lt())},i(t){i||(it(r),it(a),it(o),i=!0)},o(t){rt(r),rt(a),rt(o),i=!1},d(t){r&&r.d(t),t&&h(e),a&&a.d(t),t&&h(n),o&&o.d(t),t&&h(l)}}}function Yt(t){let e,n,l=t[0].paths,i=[];for(let e=0;e<l.length;e+=1)i[e]=Bt(Jt(t,l,e));const r=t=>rt(i[t],1,1,()=>{i[t]=null});return{c(){for(let t=0;t<i.length;t+=1)i[t].c();e=w()},m(t,l){for(let e=0;e<i.length;e+=1)i[e].m(t,l);$(t,e,l),n=!0},p(t,n){if(1&n){let a;for(l=t[0].paths,a=0;a<l.length;a+=1){const r=Jt(t,l,a);i[a]?(i[a].p(r,n),it(i[a],1)):(i[a]=Bt(r),i[a].c(),it(i[a],1),i[a].m(e.parentNode,e))}for(nt(),a=l.length;a<i.length;a+=1)r(a);lt()}},i(t){if(!n){for(let t=0;t<l.length;t+=1)it(i[t]);n=!0}},o(t){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)rt(i[t]);n=!1},d(t){g(i,t),t&&h(e)}}}function Bt(t){let e,n;return e=new jt({props:{id:t[26],data:t[27]}}),{c(){dt(e.$$.fragment)},m(t,l){pt(e,t,l),n=!0},p(t,n){const l={};1&n&&(l.data=t[27]),e.$set(l)},i(t){n||(it(e.$$.fragment,t),n=!0)},o(t){rt(e.$$.fragment,t),n=!1},d(t){ft(e,t)}}}function Ft(t){let e,n,l=t[0].polygons,i=[];for(let e=0;e<l.length;e+=1)i[e]=zt(Vt(t,l,e));const r=t=>rt(i[t],1,1,()=>{i[t]=null});return{c(){for(let t=0;t<i.length;t+=1)i[t].c();e=w()},m(t,l){for(let e=0;e<i.length;e+=1)i[e].m(t,l);$(t,e,l),n=!0},p(t,n){if(1&n){let a;for(l=t[0].polygons,a=0;a<l.length;a+=1){const r=Vt(t,l,a);i[a]?(i[a].p(r,n),it(i[a],1)):(i[a]=zt(r),i[a].c(),it(i[a],1),i[a].m(e.parentNode,e))}for(nt(),a=l.length;a<i.length;a+=1)r(a);lt()}},i(t){if(!n){for(let t=0;t<l.length;t+=1)it(i[t]);n=!0}},o(t){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)rt(i[t]);n=!1},d(t){g(i,t),t&&h(e)}}}function zt(t){let e,n;return e=new It({props:{id:t[26],data:t[24]}}),{c(){dt(e.$$.fragment)},m(t,l){pt(e,t,l),n=!0},p(t,n){const l={};1&n&&(l.data=t[24]),e.$set(l)},i(t){n||(it(e.$$.fragment,t),n=!0)},o(t){rt(e.$$.fragment,t),n=!1},d(t){ft(e,t)}}}function Ut(t){let e,n,l;function i(e){t[15].call(null,e)}let r={};return void 0!==t[0]&&(r.data=t[0]),e=new Tt({props:r}),J.push(()=>ut(e,"data",i)),{c(){dt(e.$$.fragment)},m(t,n){pt(e,t,n),l=!0},p(t,l){const i={};!n&&1&l&&(n=!0,i.data=t[0],W(()=>n=!1)),e.$set(i)},i(t){l||(it(e.$$.fragment,t),l=!0)},o(t){rt(e.$$.fragment,t),l=!1},d(t){ft(e,t)}}}function Kt(t){let e;const n=t[14].default,l=c(n,t,t[16],null),i=l||function(t){let e,n,l=t[0]&&_t(t);return{c(){l&&l.c(),e=w()},m(t,i){l&&l.m(t,i),$(t,e,i),n=!0},p(t,n){t[0]?l?(l.p(t,n),1&n&&it(l,1)):(l=_t(t),l.c(),it(l,1),l.m(e.parentNode,e)):l&&(nt(),rt(l,1,1,()=>{l=null}),lt())},i(t){n||(it(l),n=!0)},o(t){rt(l),n=!1},d(t){l&&l.d(t),t&&h(e)}}}(t);return{c(){i&&i.c()},m(t,n){i&&i.m(t,n),e=!0},p(t,e){l?l.p&&65536&e&&d(l,n,t,t[16],e,null,null):i&&i.p&&1&e&&i.p(t,e)},i(t){e||(it(i,t),e=!0)},o(t){rt(i,t),e=!1},d(t){i&&i.d(t)}}}function Wt(t){let e,n;return e=new Pt({props:{label:t[6],width:t[7],height:t[8],box:t[10],style:t[9],spin:t[2],flip:t[5],inverse:t[3],pulse:t[4],class:t[1],$$slots:{default:[Kt]},$$scope:{ctx:t}}}),{c(){dt(e.$$.fragment)},m(t,l){pt(e,t,l),n=!0},p(t,[n]){const l={};64&n&&(l.label=t[6]),128&n&&(l.width=t[7]),256&n&&(l.height=t[8]),1024&n&&(l.box=t[10]),512&n&&(l.style=t[9]),4&n&&(l.spin=t[2]),32&n&&(l.flip=t[5]),8&n&&(l.inverse=t[3]),16&n&&(l.pulse=t[4]),2&n&&(l.class=t[1]),65537&n&&(l.$$scope={dirty:n,ctx:t}),e.$set(l)},i(t){n||(it(e.$$.fragment,t),n=!0)},o(t){rt(e.$$.fragment,t),n=!1},d(t){ft(e,t)}}}function Xt(t,e,n){let l,i,r,a,{class:o=""}=e,{data:s}=e,{scale:c=1}=e,{spin:u=!1}=e,{inverse:d=!1}=e,{pulse:p=!1}=e,{flip:f=null}=e,{label:m=null}=e,{self:$=null}=e,{style:h=null}=e;function g(){let t=1;return void 0!==c&&(t=Number(c)),isNaN(t)||t<=0?(console.warn('Invalid prop: prop "scale" should be a number over 0.'),1):1*t}function v(){return $?Math.max($.width,$.height)/16:1}let{$$slots:b={},$$scope:y}=e;return t.$$set=t=>{"class"in t&&n(1,o=t.class),"data"in t&&n(11,s=t.data),"scale"in t&&n(12,c=t.scale),"spin"in t&&n(2,u=t.spin),"inverse"in t&&n(3,d=t.inverse),"pulse"in t&&n(4,p=t.pulse),"flip"in t&&n(5,f=t.flip),"label"in t&&n(6,m=t.label),"self"in t&&n(0,$=t.self),"style"in t&&n(13,h=t.style),"$$scope"in t&&n(16,y=t.$$scope)},t.$$.update=()=>{14336&t.$$.dirty&&(!function(){if(void 0===s)return;const t=function(t){if("iconName"in t&&"icon"in t){let e={},n=t.icon,l=t.iconName,i={width:n[0],height:n[1],paths:[{d:n[4]}]};return e[l]=i,e}return t}(s),[e]=Object.keys(t),l=t[e];l.paths||(l.paths=[]),l.d&&l.paths.push({d:l.d}),l.polygons||(l.polygons=[]),l.points&&l.polygons.push({points:l.points}),n(0,$=l)}(),n(7,l=$?$.width/v()*g():0),n(8,i=$?$.height/v()*g():0),n(9,r=function(){let t="";null!==h&&(t+=h);let e=g();return 1===e?t:(""===t||t.endsWith(";")||(t+="; "),`${t}font-size: ${e}em`)}()),n(10,a=$?`0 0 ${$.width} ${$.height}`:`0 0 ${l} ${i}`))},[$,o,u,d,p,f,m,l,i,r,a,s,c,h,b,function(t){$=t,n(0,$)},y]}class Gt extends $t{constructor(t){super(),mt(this,t,Xt,Wt,a,{class:1,data:11,scale:12,spin:2,inverse:3,pulse:4,flip:5,label:6,self:0,style:13})}}var Qt={check:{width:1792,height:1792,paths:[{d:"M1671 566q0 40-28 68l-724 724-136 136q-28 28-68 28t-68-28l-136-136-362-362q-28-28-28-68t28-68l136-136q28-28 68-28t68 28l294 295 656-657q28-28 68-28t68 28l136 136q28 28 28 68z"}]}},Zt={remove:{width:1408,height:1792,paths:[{d:"M1298 1322q0 40-28 68l-136 136q-28 28-68 28t-68-28l-294-294-294 294q-28 28-68 28t-68-28l-136-136q-28-28-28-68t28-68l294-294-294-294q-28-28-28-68t28-68l136-136q28-28 68-28t68 28l294 294 294-294q28-28 68-28t68 28l136 136q28 28 28 68t-28 68l-294 294 294 294q28 28 28 68z"}]}},te={"arrow-left":{width:1536,height:1792,paths:[{d:"M1536 896v128q0 53-32.5 90.5t-84.5 37.5h-704l293 294q38 36 38 90t-38 90l-75 76q-37 37-90 37-52 0-91-37l-651-652q-37-37-37-90 0-52 37-91l651-650q38-38 91-38 52 0 90 38l75 74q38 38 38 91t-38 91l-293 293h704q52 0 84.5 37.5t32.5 90.5z"}]}},ee={"arrow-right":{width:1536,height:1792,paths:[{d:"M1472 960q0 54-37 91l-651 651q-39 37-91 37-51 0-90-37l-75-75q-38-38-38-91t38-91l293-293h-704q-52 0-84.5-37.5t-32.5-90.5v-128q0-53 32.5-90.5t84.5-37.5h704l-293-294q-38-36-38-90t38-90l75-75q38-38 90-38 53 0 91 38l651 651q37 35 37 90z"}]}},ne={"arrow-up":{width:1664,height:1792,paths:[{d:"M1611 971q0 51-37 90l-75 75q-38 38-91 38-54 0-90-38l-294-293v704q0 52-37.5 84.5t-90.5 32.5h-128q-53 0-90.5-32.5t-37.5-84.5v-704l-294 293q-36 38-90 38t-90-38l-75-75q-38-38-38-90 0-53 38-91l651-651q35-37 90-37 54 0 91 37l651 651q37 39 37 91z"}]}},le={"arrow-down":{width:1664,height:1792,paths:[{d:"M1611 832q0 53-37 90l-651 652q-39 37-91 37-53 0-90-37l-651-652q-38-36-38-90 0-53 38-91l74-75q39-37 91-37 53 0 90 37l294 294v-704q0-52 38-90t90-38h128q52 0 90 38t38 90v704l294-294q37-37 90-37 52 0 91 37l75 75q37 39 37 91z"}]}},ie={"caret-down":{width:1024,height:1792,paths:[{d:"M1024 704q0 26-19 45l-448 448q-19 19-45 19t-45-19l-448-448q-19-19-19-45t19-45 45-19h896q26 0 45 19t19 45z"}]}},re={undo:{width:1536,height:1792,paths:[{d:"M1536 896q0 156-61 298t-164 245-245 164-298 61q-172 0-327-72.5t-264-204.5q-7-10-6.5-22.5t8.5-20.5l137-138q10-9 25-9 16 2 23 12 73 95 179 147t225 52q104 0 198.5-40.5t163.5-109.5 109.5-163.5 40.5-198.5-40.5-198.5-109.5-163.5-163.5-109.5-198.5-40.5q-98 0-188 35.5t-160 101.5l137 138q31 30 14 69-17 40-59 40h-448q-26 0-45-19t-19-45v-448q0-42 40-59 39-17 69 14l130 129q107-101 244.5-156.5t284.5-55.5q156 0 298 61t245 164 164 245 61 298z"}]}};const ae=t=>({}),oe=t=>({});function se(t){let e;return{c(){e=v("span")},m(n,l){$(n,e,l),e.innerHTML=t[6]},p(t,n){64&n&&(e.innerHTML=t[6])},d(t){t&&h(e)}}}function ce(e){let n,l;return n=new Gt({props:{data:ie}}),{c(){dt(n.$$.fragment)},m(t,e){pt(n,t,e),l=!0},p:t,i(t){l||(it(n.$$.fragment,t),l=!0)},o(t){rt(n.$$.fragment,t),l=!1},d(t){ft(n,t)}}}function ue(t){let e,n,l,i,r;const a=t[21].default,o=c(a,t,t[20],null);return{c(){e=v("div"),o&&o.c(),S(e,"class",n="quick-dropdown-menu "+t[3]+" svelte-wxmkik")},m(n,a){$(n,e,a),o&&o.m(e,null),t[23](e),l=!0,i||(r=k(e,"click",t[13]),i=!0)},p(t,i){o&&o.p&&1048576&i&&d(o,a,t,t[20],i,null,null),(!l||8&i&&n!==(n="quick-dropdown-menu "+t[3]+" svelte-wxmkik"))&&S(e,"class",n)},i(t){l||(it(o,t),l=!0)},o(t){rt(o,t),l=!1},d(n){n&&h(e),o&&o.d(n),t[23](null),i=!1,r()}}}function de(t){let e,n,l,r,a,o,s,u,f;const g=t[21].label,b=c(g,t,t[20],oe),y=b||function(t){let e,n=null!=t[6]&&se(t);return{c(){n&&n.c(),e=w()},m(t,l){n&&n.m(t,l),$(t,e,l)},p(t,l){null!=t[6]?n?n.p(t,l):(n=se(t),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(t){n&&n.d(t),t&&h(e)}}}(t);let C=!t[4]&&ce(),N=t[0]&&ue(t);return{c(){e=v("div"),n=v("a"),y&&y.c(),l=x(),C&&C.c(),a=x(),N&&N.c(),S(n,"class",r=p(t[2])+" svelte-wxmkik"),S(n,"id",t[7]),S(n,"href","/"),S(n,"tabindex",pe),E(n,"btn-default",!t[8]),E(n,"btn-danger",t[8]),E(n,"invalid",t[8]&&!t[0]),E(n,"disabled",t[5]),S(e,"class",o="quick-dropdown "+t[9]+" svelte-wxmkik"),S(e,"data-test",t[1])},m(i,r){$(i,e,r),m(e,n),y&&y.m(n,null),m(n,l),C&&C.m(n,null),t[22](n),m(e,a),N&&N.m(e,null),t[24](e),s=!0,u||(f=[k(n,"click",q(t[14])),k(n,"keydown",t[15])],u=!0)},p(t,[l]){b?b.p&&1048576&l&&d(b,g,t,t[20],l,ae,oe):y&&y.p&&64&l&&y.p(t,l),t[4]?C&&(nt(),rt(C,1,1,()=>{C=null}),lt()):C?(C.p(t,l),16&l&&it(C,1)):(C=ce(),C.c(),it(C,1),C.m(n,null)),(!s||4&l&&r!==(r=p(t[2])+" svelte-wxmkik"))&&S(n,"class",r),(!s||128&l)&&S(n,"id",t[7]),260&l&&E(n,"btn-default",!t[8]),260&l&&E(n,"btn-danger",t[8]),261&l&&E(n,"invalid",t[8]&&!t[0]),36&l&&E(n,"disabled",t[5]),t[0]?N?(N.p(t,l),1&l&&it(N,1)):(N=ue(t),N.c(),it(N,1),N.m(e,null)):N&&(nt(),rt(N,1,1,()=>{N=null}),lt()),(!s||512&l&&o!==(o="quick-dropdown "+t[9]+" svelte-wxmkik"))&&S(e,"class",o),(!s||2&l)&&S(e,"data-test",t[1])},i(t){s||(it(y,t),it(C),it(N),s=!0)},o(t){rt(y,t),rt(C),rt(N),s=!1},d(n){n&&h(e),y&&y.d(n),C&&C.d(),t[22](null),N&&N.d(),t[24](null),u=!1,i(f)}}}const pe=0;function fe(t,e,n){let{btnTitle:l=null}=e,{isOpen:i=!1}=e,{dataTest:r=null}=e,{btnClass:a="btn btn-light btn-sm"}=e,{dropdownClass:o="below left"}=e,{anyItemClickCloses:s=!1}=e,{noCaret:c=!1}=e,{icon:u=null}=e,{autofocusFirstItem:d=!1}=e,{disabled:p=!1}=e,{label:f=null}=e,{id:m=null}=e,{invalid:$=!1}=e;const h=A();let g=null,v=null,b=null,{class:y=""}=e,x=null;function w(){n(0,i=!0),setTimeout(()=>{if(d&&null!=b){const t=b.querySelector("input, label, a");null!=t&&t.focus()}h("open"),document.addEventListener("mousedown",q),document.addEventListener("click",S)})}function k(){h("close"),n(0,i=!1),document.removeEventListener("mousedown",q),document.removeEventListener("click",S)}function q(t){x=t.target}function S(){if(null==b||null==x)return;if(!document.body.contains(x))return;b===x||b.contains(x)||k()}L(k);let{$$slots:C={},$$scope:N}=e;return t.$$set=t=>{"btnTitle"in t&&n(16,l=t.btnTitle),"isOpen"in t&&n(0,i=t.isOpen),"dataTest"in t&&n(1,r=t.dataTest),"btnClass"in t&&n(2,a=t.btnClass),"dropdownClass"in t&&n(3,o=t.dropdownClass),"anyItemClickCloses"in t&&n(17,s=t.anyItemClickCloses),"noCaret"in t&&n(4,c=t.noCaret),"icon"in t&&n(18,u=t.icon),"autofocusFirstItem"in t&&n(19,d=t.autofocusFirstItem),"disabled"in t&&n(5,p=t.disabled),"label"in t&&n(6,f=t.label),"id"in t&&n(7,m=t.id),"invalid"in t&&n(8,$=t.invalid),"class"in t&&n(9,y=t.class),"$$scope"in t&&n(20,N=t.$$scope)},t.$$.update=()=>{1&t.$$.dirty&&(i?w():k())},[i,r,a,o,c,p,f,m,$,y,g,v,b,function(){s&&setTimeout(k,0)},function(){i?k():w()},function(t){switch(t.which||t.keyCode){case 13:case 32:case 40:return w(),void t.preventDefault();case 27:case 9:case 38:return void k()}},l,s,u,d,N,C,function(t){J[t?"unshift":"push"](()=>{v=t,n(11,v)})},function(t){J[t?"unshift":"push"](()=>{b=t,n(12,b)})},function(t){J[t?"unshift":"push"](()=>{g=t,n(10,g)})}]}class me extends $t{constructor(t){super(),mt(this,t,fe,de,a,{btnTitle:16,isOpen:0,dataTest:1,btnClass:2,dropdownClass:3,anyItemClickCloses:17,noCaret:4,icon:18,autofocusFirstItem:19,disabled:5,label:6,id:7,invalid:8,class:9})}}function $e(t,e,n){const l=t.slice();return l[4]=e[n],l}function he(t){let e,n;return{c(){e=v("span"),n=v("div"),S(n,"data-test",name),S(n,"class","color-choice svelte-wk0jhd"),j(n,"background",xe(t[0])),S(n,"title","Change color"),S(e,"slot","label")},m(t,l){$(t,e,l),m(e,n)},p(t,e){1&e&&j(n,"background",xe(t[0]))},d(t){t&&h(e)}}}function ge(e){let n,l;return n=new Gt({props:{data:Qt}}),{c(){dt(n.$$.fragment)},m(t,e){pt(n,t,e),l=!0},p:t,i(t){l||(it(n.$$.fragment,t),l=!0)},o(t){rt(n.$$.fragment,t),l=!1},d(t){ft(n,t)}}}function ve(t){let e,n,l,i,r,a=t[0]==t[4]&&ge();function o(...e){return t[3](t[4],...e)}return{c(){e=v("div"),a&&a.c(),n=x(),S(e,"class","color-choice svelte-wk0jhd"),j(e,"background",xe(t[4])),E(e,"selected",t[0]==t[4])},m(t,s){$(t,e,s),a&&a.m(e,null),m(e,n),l=!0,i||(r=k(e,"click",o),i=!0)},p(l,i){(t=l)[0]==t[4]?a?(a.p(t,i),1&i&&it(a,1)):(a=ge(),a.c(),it(a,1),a.m(e,n)):a&&(nt(),rt(a,1,1,()=>{a=null}),lt()),5&i&&E(e,"selected",t[0]==t[4])},i(t){l||(it(a),l=!0)},o(t){rt(a),l=!1},d(t){t&&h(e),a&&a.d(),i=!1,r()}}}function be(t){let e,n,l,i=t[2],r=[];for(let e=0;e<i.length;e+=1)r[e]=ve($e(t,i,e));const a=t=>rt(r[t],1,1,()=>{r[t]=null});return{c(){e=x(),n=v("div");for(let t=0;t<r.length;t+=1)r[t].c();S(n,"class","color-picker-choices svelte-wk0jhd")},m(t,i){$(t,e,i),$(t,n,i);for(let t=0;t<r.length;t+=1)r[t].m(n,null);l=!0},p(t,e){if(7&e){let l;for(i=t[2],l=0;l<i.length;l+=1){const a=$e(t,i,l);r[l]?(r[l].p(a,e),it(r[l],1)):(r[l]=ve(a),r[l].c(),it(r[l],1),r[l].m(n,null))}for(nt(),l=i.length;l<r.length;l+=1)a(l);lt()}},i(t){if(!l){for(let t=0;t<i.length;t+=1)it(r[t]);l=!0}},o(t){r=r.filter(Boolean);for(let t=0;t<r.length;t+=1)rt(r[t]);l=!1},d(t){t&&h(e),t&&h(n),g(r,t)}}}function ye(t){let e,n;return e=new me({props:{btnClass:"color-picker-toggle",noCaret:!0,anyItemClickCloses:!0,$$slots:{default:[be],label:[he]},$$scope:{ctx:t}}}),{c(){dt(e.$$.fragment)},m(t,l){pt(e,t,l),n=!0},p(t,[n]){const l={};129&n&&(l.$$scope={dirty:n,ctx:t}),e.$set(l)},i(t){n||(it(e.$$.fragment,t),n=!0)},o(t){rt(e.$$.fragment,t),n=!1},d(t){ft(e,t)}}}function xe(t){return"transparent"!=t?t:"repeating-linear-gradient(-45deg, transparent, #eee 10px)"}function we(t,e,n){let{value:l="transparent"}=e;function i(t){n(0,l=t)}return t.$$set=t=>{"value"in t&&n(0,l=t.value)},[l,i,["transparent","white","rgb(204, 204, 204)","rgb(160, 164, 160)","rgb(102, 102, 102)","rgb(51, 51, 51)","black","rgb(119, 59, 11)","blue","pink","yellow","orange","purple","teal","green","rgb(40, 40, 184)","rgb(40, 80, 224)","rgb(80, 80, 248)","rgb(120, 124, 248)","rgb(160, 0, 16)","red","rgb(248, 0, 32)","rgb(208, 124, 96)","rgb(248, 208, 176)","rgb(253, 240, 232)","rgb(245, 222, 208)","rgb(220, 201, 187)","rgb(197, 179, 167)","rgb(186, 167, 153)","rgb(146, 129, 119)","rgb(120, 107, 99)","rgb(80, 68, 68)","rgb(122, 80, 55)","rgb(178, 105, 58)","rgb(203, 140, 97)","rgb(238, 187, 155)","rgb(75, 53, 39)"],t=>i(t)]}class ke extends $t{constructor(t){super(),mt(this,t,we,ye,a,{value:0})}}function qe(t){let e,n,l,i,r,a,o;const s=t[5].default,u=c(s,t,t[4],null);return{c(){e=v("div"),n=v("label"),u&&u.c(),l=x(),i=v("input"),S(n,"for",t[1]),S(i,"name",t[1]),S(i,"id",t[1]),S(i,"type","text"),S(i,"class","form-control"),S(e,"class","form-group")},m(s,c){$(s,e,c),m(e,n),u&&u.m(n,null),m(e,l),m(e,i),O(i,t[0]),t[7](i),r=!0,a||(o=k(i,"input",t[6]),a=!0)},p(t,[e]){u&&u.p&&16&e&&d(u,s,t,t[4],e,null,null),(!r||2&e)&&S(n,"for",t[1]),(!r||2&e)&&S(i,"name",t[1]),(!r||2&e)&&S(i,"id",t[1]),1&e&&i.value!==t[0]&&O(i,t[0])},i(t){r||(it(u,t),r=!0)},o(t){rt(u,t),r=!1},d(n){n&&h(e),u&&u.d(n),t[7](null),a=!1,o()}}}function Se(t,e,n){let l,{value:i=null}=e,{name:r="text"}=e,{autofocus:a=!1}=e;T(()=>{a&&l.focus()});let{$$slots:o={},$$scope:s}=e;return t.$$set=t=>{"value"in t&&n(0,i=t.value),"name"in t&&n(1,r=t.name),"autofocus"in t&&n(3,a=t.autofocus),"$$scope"in t&&n(4,s=t.$$scope)},[i,r,l,a,s,o,function(){i=this.value,n(0,i)},function(t){J[t?"unshift":"push"](()=>{l=t,n(2,l)})}]}class Ce extends $t{constructor(t){super(),mt(this,t,Se,qe,a,{value:0,name:1,autofocus:3})}}function Ne(t){let e,n;const l=t[2].default,i=c(l,t,t[1],null),r=i||function(t){let e;return{c(){e=y("Save")},m(t,n){$(t,e,n)},d(t){t&&h(e)}}}();return{c(){e=v("button"),r&&r.c(),S(e,"type","submit"),S(e,"class","btn btn-success"),E(e,"disabled",t[0])},m(t,l){$(t,e,l),r&&r.m(e,null),n=!0},p(t,[n]){i&&i.p&&2&n&&d(i,l,t,t[1],n,null,null),1&n&&E(e,"disabled",t[0])},i(t){n||(it(r,t),n=!0)},o(t){rt(r,t),n=!1},d(t){t&&h(e),r&&r.d(t)}}}function Me(t,e,n){let{disabled:l=!1}=e,{$$slots:i={},$$scope:r}=e;return t.$$set=t=>{"disabled"in t&&n(0,l=t.disabled),"$$scope"in t&&n(1,r=t.$$scope)},[l,r,i]}class Oe extends $t{constructor(t){super(),mt(this,t,Me,Ne,a,{disabled:0})}}const je=t=>({}),Ee=t=>({});function De(t){let e,n,l,i,r,a,o,s,u,p;i=new Oe({props:{disabled:!t[0]}});const f=t[2].buttons,g=c(f,t,t[1],Ee),b=t[2].default,y=c(b,t,t[1],null);return{c(){e=v("form"),n=v("div"),l=v("div"),dt(i.$$.fragment),r=x(),g&&g.c(),a=x(),o=v("div"),y&&y.c(),S(l,"class","card-header flex"),S(o,"class","card-body"),S(n,"class","card")},m(c,d){$(c,e,d),m(e,n),m(n,l),pt(i,l,null),m(l,r),g&&g.m(l,null),m(n,a),m(n,o),y&&y.m(o,null),s=!0,u||(p=k(e,"submit",q(t[3])),u=!0)},p(t,[e]){const n={};1&e&&(n.disabled=!t[0]),i.$set(n),g&&g.p&&2&e&&d(g,f,t,t[1],e,je,Ee),y&&y.p&&2&e&&d(y,b,t,t[1],e,null,null)},i(t){s||(it(i.$$.fragment,t),it(g,t),it(y,t),s=!0)},o(t){rt(i.$$.fragment,t),rt(g,t),rt(y,t),s=!1},d(t){t&&h(e),ft(i),g&&g.d(t),y&&y.d(t),u=!1,p()}}}function Ie(t,e,n){let{hasChanges:l=!0}=e,{$$slots:i={},$$scope:r}=e;return t.$$set=t=>{"hasChanges"in t&&n(0,l=t.hasChanges),"$$scope"in t&&n(1,r=t.$$scope)},[l,r,i,function(e){P(t,e)}]}class Re extends $t{constructor(t){super(),mt(this,t,Ie,De,a,{hasChanges:0})}}function He(t,e,n){const l=document.createElement("canvas");l.width=2*e,l.height=2*n;const i=l.getContext("2d");for(let e=0;e<t.length;e++)for(let n=0;n<t[e].length;n++){const l=t[e][n];null!=l&&"transparent"!=l&&(i.beginPath(),i.rect(2*n,2*e,2,2),i.fillStyle=l,i.fill())}return l.toDataURL("image/png")}function Te(t,e){const n=localStorage.getItem(t),l=null!=n&&"null"!=n&&"undefined"!=n?JSON.parse(n):e,{subscribe:i,set:r,update:a}=vt(l);return{subscribe:i,set:function(e){r(e),localStorage.setItem(t,JSON.stringify(e))}}}var Le=Te("pixel-drawings",{});function Ae(t){let e,n,l,i,r;return{c(){e=v("img"),e.src!==(n=t[1].png)&&S(e,"src",n),S(e,"alt",l=t[1].name),S(e,"title",i=t[1].name),S(e,"style",r="transform: rotate("+t[2]+"deg); "+(null!=t[0]?"max-height: "+t[0]+"px":""))},m(t,n){$(t,e,n)},p(t,a){2&a&&e.src!==(n=t[1].png)&&S(e,"src",n),2&a&&l!==(l=t[1].name)&&S(e,"alt",l),2&a&&i!==(i=t[1].name)&&S(e,"title",i),5&a&&r!==(r="transform: rotate("+t[2]+"deg); "+(null!=t[0]?"max-height: "+t[0]+"px":""))&&S(e,"style",r)},d(t){t&&h(e)}}}function Pe(e){let n,l=null!=e[1]&&null!=e[1].png&&Ae(e);return{c(){l&&l.c(),n=w()},m(t,e){l&&l.m(t,e),$(t,n,e)},p(t,[e]){null!=t[1]&&null!=t[1].png?l?l.p(t,e):(l=Ae(t),l.c(),l.m(n.parentNode,n)):l&&(l.d(1),l=null)},i:t,o:t,d(t){l&&l.d(t),t&&h(n)}}}function Ve(t,e,n){let l;s(t,Le,t=>n(6,l=t));let i,r,{name:a}=e,{height:o=null}=e,{spin:c=!1}=e,u=0;return t.$$set=t=>{"name"in t&&n(3,a=t.name),"height"in t&&n(0,o=t.height),"spin"in t&&n(4,c=t.spin)},t.$$.update=()=>{74&t.$$.dirty&&null!=a&&(n(1,i=l[a]),null!=i&&null==i.png&&n(1,i.png=He(i,i.width,i.height),i)),52&t.$$.dirty&&(c?n(5,r=setTimeout(()=>{n(2,u+=30)},25)):clearTimeout(r))},[o,i,u,a,c]}class Je extends $t{constructor(t){super(),mt(this,t,Ve,Pe,a,{name:3,height:0,spin:4})}}function _e(t,e,n){const l=t.slice();return l[9]=e[n],l}function Ye(t,e,n){const l=t.slice();return l[6]=e[n],l}function Be(t){let e,n,l,i,r,a,o,s=Object.keys(t[2]).sort(),c=[];for(let e=0;e<s.length;e+=1)c[e]=ze(_e(t,s,e));const u=t=>rt(c[t],1,1,()=>{c[t]=null});return{c(){e=v("div"),n=v("a"),l=y("+ New"),r=x();for(let t=0;t<c.length;t+=1)c[t].c();a=x(),S(n,"href",i=We+"/"+t[6].name+"/new"),S(n,"class","sub-nav-item svelte-87qvqb"),E(n,"new",null==t[2][t[1]]),S(e,"class","sub-nav svelte-87qvqb")},m(t,i){$(t,e,i),m(e,n),m(n,l),m(e,r);for(let t=0;t<c.length;t+=1)c[t].m(e,null);m(e,a),o=!0},p(t,l){if(6&l&&E(n,"new",null==t[2][t[1]]),15&l){let n;for(s=Object.keys(t[2]).sort(),n=0;n<s.length;n+=1){const i=_e(t,s,n);c[n]?(c[n].p(i,l),it(c[n],1)):(c[n]=ze(i),c[n].c(),it(c[n],1),c[n].m(e,a))}for(nt(),n=s.length;n<c.length;n+=1)u(n);lt()}},i(t){if(!o){for(let t=0;t<s.length;t+=1)it(c[t]);o=!0}},o(t){c=c.filter(Boolean);for(let t=0;t<c.length;t+=1)rt(c[t]);o=!1},d(t){t&&h(e),g(c,t)}}}function Fe(t){let e,n;return{c(){e=v("img"),e.src!==(n=t[2][t[9]].thumbnail)&&S(e,"src",n),S(e,"class","level-thumbnail svelte-87qvqb")},m(t,n){$(t,e,n)},p(t,l){4&l&&e.src!==(n=t[2][t[9]].thumbnail)&&S(e,"src",n)},d(t){t&&h(e)}}}function ze(t){let e,n,l,i,r,a,o,s,c,u=t[9]+"";n=new Je({props:{name:"art"==t[0]?t[9]:t[2][t[9]][t[6].graphicKey],height:"20"}});let d="levels"==t[0]&&Fe(t);return{c(){e=v("a"),dt(n.$$.fragment),l=x(),i=v("div"),r=v("span"),a=y(u),o=x(),d&&d.c(),S(i,"class","flex-column"),S(e,"class","sub-nav-item svelte-87qvqb"),S(e,"href",s=We+"/"+t[6].name+"/"+t[9]),E(e,"active",t[1]==t[9])},m(t,s){$(t,e,s),pt(n,e,null),m(e,l),m(e,i),m(i,r),m(r,a),m(i,o),d&&d.m(i,null),c=!0},p(t,l){const r={};5&l&&(r.name="art"==t[0]?t[9]:t[2][t[9]][t[6].graphicKey]),n.$set(r),(!c||4&l)&&u!==(u=t[9]+"")&&M(a,u),"levels"==t[0]?d?d.p(t,l):(d=Fe(t),d.c(),d.m(i,null)):d&&(d.d(1),d=null),(!c||4&l&&s!==(s=We+"/"+t[6].name+"/"+t[9]))&&S(e,"href",s),6&l&&E(e,"active",t[1]==t[9])},i(t){c||(it(n.$$.fragment,t),c=!0)},o(t){rt(n.$$.fragment,t),c=!1},d(t){t&&h(e),ft(n),d&&d.d()}}}function Ue(t){let e,n,l,i,r,a,o=t[6].name+"",s=t[6].name==t[0]&&Be(t);return{c(){e=v("a"),n=y(o),i=x(),s&&s.c(),r=w(),S(e,"class","sub-nav-item svelte-87qvqb"),S(e,"href",l=We+"/"+t[6].name+"/new"),E(e,"active",t[0]==t[6].name)},m(t,l){$(t,e,l),m(e,n),$(t,i,l),s&&s.m(t,l),$(t,r,l),a=!0},p(t,n){9&n&&E(e,"active",t[0]==t[6].name),t[6].name==t[0]?s?(s.p(t,n),1&n&&it(s,1)):(s=Be(t),s.c(),it(s,1),s.m(r.parentNode,r)):s&&(nt(),rt(s,1,1,()=>{s=null}),lt())},i(t){a||(it(s),a=!0)},o(t){rt(s),a=!1},d(t){t&&h(e),t&&h(i),s&&s.d(t),t&&h(r)}}}function Ke(t){let e,n,l,i,r,a=t[3],o=[];for(let e=0;e<a.length;e+=1)o[e]=Ue(Ye(t,a,e));const s=t=>rt(o[t],1,1,()=>{o[t]=null}),u=t[5].default,p=c(u,t,t[4],null);return{c(){e=v("div"),n=v("div");for(let t=0;t<o.length;t+=1)o[t].c();l=x(),i=v("div"),p&&p.c(),S(n,"class","sub-nav svelte-87qvqb"),S(i,"class","flex-grow pl-2"),S(e,"class","flex align-top")},m(t,a){$(t,e,a),m(e,n);for(let t=0;t<o.length;t+=1)o[t].m(n,null);m(e,l),m(e,i),p&&p.m(i,null),r=!0},p(t,[e]){if(15&e){let l;for(a=t[3],l=0;l<a.length;l+=1){const i=Ye(t,a,l);o[l]?(o[l].p(i,e),it(o[l],1)):(o[l]=Ue(i),o[l].c(),it(o[l],1),o[l].m(n,null))}for(nt(),l=a.length;l<o.length;l+=1)s(l);lt()}p&&p.p&&16&e&&d(p,u,t,t[4],e,null,null)},i(t){if(!r){for(let t=0;t<a.length;t+=1)it(o[t]);it(p,t),r=!0}},o(t){o=o.filter(Boolean);for(let t=0;t<o.length;t+=1)rt(o[t]);rt(p,t),r=!1},d(t){t&&h(e),g(o,t),p&&p.d(t)}}}const We="#/level-builder";function Xe(t,e,n){let{tab:l}=e,{activeName:i}=e,{store:r}=e;let{$$slots:a={},$$scope:o}=e;return t.$$set=t=>{"tab"in t&&n(0,l=t.tab),"activeName"in t&&n(1,i=t.activeName),"store"in t&&n(2,r=t.store),"$$scope"in t&&n(4,o=t.$$scope)},[l,i,r,[{name:"art"},{name:"blocks",graphicKey:"graphic"},{name:"characters",graphicKey:"graphicStill"},{name:"enemies",graphicKey:"graphicStill"},{name:"levels",graphicKey:null}],o,a]}class Ge extends $t{constructor(t){super(),mt(this,t,Xe,Ke,a,{tab:0,activeName:1,store:2})}}window.logDiffs=!1;const Qe=new class{constructor(){this.emailRegex=/^[^.]([^@<>\s]+)?[^.]@[^@<>\s-][^@<>\s]+\.[a-zA-Z]{1,6}$/,this.doublePeriodRegex=/\.\./,this.nameWithSpaceRegex=/[^\s]+\s+[^\s]+/,this.phoneRegex=/^([+][0-9][-\s.])?[(]?[0-9]{3}[)]?[-\s.]?[0-9]{3}[-\s.]?[0-9]{4,6}$/}date(t,e="M/D/YYYY"){return dayjs(t,e).format(e)===t}dateBefore(t,e,n="M/D/YYYY"){return dayjs(t,n).isBefore(dayjs(e,n))}dateSameOrBefore(t,e,n="M/D/YYYY"){return dayjs(t,n).isSameOrBefore(dayjs(e,n))}dateAfter(t,e,n="M/D/YYYY"){return dayjs(t,n).isAfter(dayjs(e,n))}inFuture(t,e="M/D/YYYY"){return this.dateAfter(dayjs(t,e),dayjs())}dateBetween(t,e,n,l="M/D/YYYY"){return!(!dayjs(t,l).isValid()||!dayjs(e,l).isValid())&&(!dayjs.utc(t,l).isBefore(dayjs(e,l),"days")&&(null==n||!dayjs(n,l).isValid()||!dayjs.utc(t,l).isAfter(dayjs(n,l),"days")))}email(t){return!this.empty(t)&&this.emailRegex.test(t)&&!this.doublePeriodRegex.test(t)}equals(t,e,n=null){return n=(n||[]).concat("id"),!function(t,e){return JSON.stringify(t)!==JSON.stringify(e)}(t,e)}empty(t){return null==(e=t)||0===e.toString().trim().length;var e}int(t){return null!=t&&!isNaN(parseInt(t))&&isFinite(t)&&parseInt(t).toString()==t.toString()}intRange(t,e,n){const l=parseInt(t);return l>=e&&l<=n}year(t){return this.intRange(t,1900,dayjs().add(100,"year"))}length(t,e){return!this.empty(t)&&t.length>=e}name(t){return this.required(t)&&this.length(t,3)}nameWithSpace(t){return this.required(t)&&this.nameWithSpaceRegex.test(t)}numeric(t){return!isNaN(parseFloat(t))&&isFinite(t)}phone(t){return this.phoneRegex.test(t)}regex(t,e){return new RegExp(t).test(e)}required(t){return null!=t&&!this.empty(t)}checked(t){return 1==t}dynamicField(t,e,n,l){if(this.empty(n))return!e;switch(t){case"text":case"textarea":case"select":case"radiogroup":return this.required(n);case"phone":return this.phone(n);case"email":return this.email(n);case"yesno":return!0===n||"true"===n||!1===n||"false"===n;case"checkbox":return!e||!0===n||"true"===n;case"checkboxgroup":return n.length;case"numeric":return this.numeric(n);case"date":return this.date(n,l);case"rating":return this.int(n)&&this.intRange(n,1,5)}return!1}};var Ze={prefix:"fas",iconName:"exchange-alt",icon:[512,512,[],"f362","M0 168v-16c0-13.255 10.745-24 24-24h360V80c0-21.367 25.899-32.042 40.971-16.971l80 80c9.372 9.373 9.372 24.569 0 33.941l-80 80C409.956 271.982 384 261.456 384 240v-48H24c-13.255 0-24-10.745-24-24zm488 152H128v-48c0-21.314-25.862-32.08-40.971-16.971l-80 80c-9.372 9.373-9.372 24.569 0 33.941l80 80C102.057 463.997 128 453.437 128 432v-48h360c13.255 0 24-10.745 24-24v-16c0-13.255-10.745-24-24-24z"]},tn={prefix:"fas",iconName:"fill-drip",icon:[576,512,[],"f576","M512 320s-64 92.65-64 128c0 35.35 28.66 64 64 64s64-28.65 64-64-64-128-64-128zm-9.37-102.94L294.94 9.37C288.69 3.12 280.5 0 272.31 0s-16.38 3.12-22.62 9.37l-81.58 81.58L81.93 4.76c-6.25-6.25-16.38-6.25-22.62 0L36.69 27.38c-6.24 6.25-6.24 16.38 0 22.62l86.19 86.18-94.76 94.76c-37.49 37.48-37.49 98.26 0 135.75l117.19 117.19c18.74 18.74 43.31 28.12 67.87 28.12 24.57 0 49.13-9.37 67.87-28.12l221.57-221.57c12.5-12.5 12.5-32.75.01-45.25zm-116.22 70.97H65.93c1.36-3.84 3.57-7.98 7.43-11.83l13.15-13.15 81.61-81.61 58.6 58.6c12.49 12.49 32.75 12.49 45.24 0s12.49-32.75 0-45.24l-58.6-58.6 58.95-58.95 162.44 162.44-48.34 48.34z"]},en={prefix:"fas",iconName:"paint-brush",icon:[512,512,[],"f1fc","M167.02 309.34c-40.12 2.58-76.53 17.86-97.19 72.3-2.35 6.21-8 9.98-14.59 9.98-11.11 0-45.46-27.67-55.25-34.35C0 439.62 37.93 512 128 512c75.86 0 128-43.77 128-120.19 0-3.11-.65-6.08-.97-9.13l-88.01-73.34zM457.89 0c-15.16 0-29.37 6.71-40.21 16.45C213.27 199.05 192 203.34 192 257.09c0 13.7 3.25 26.76 8.73 38.7l63.82 53.18c7.21 1.8 14.64 3.03 22.39 3.03 62.11 0 98.11-45.47 211.16-256.46 7.38-14.35 13.9-29.85 13.9-45.99C512 20.64 486 0 457.89 0z"]};function nn(t,e,n){const l=t.slice();return l[56]=e[n],l}function ln(t,e,n){const l=t.slice();return l[53]=e[n],l}function rn(e){let n,l,i;return{c(){n=v("button"),n.textContent="Delete",S(n,"type","button"),S(n,"class","btn btn-danger")},m(t,r){$(t,n,r),l||(i=k(n,"click",e[32]),l=!0)},p:t,d(t){t&&h(n),l=!1,i()}}}function an(t){let e,n,l,i,r,a=!t[8]&&rn(t);return{c(){e=v("span"),n=v("input"),l=x(),a&&a.c(),S(n,"type","text"),S(n,"class","form-control width-auto svelte-19cwbrr"),S(n,"id","name"),S(n,"name","name"),S(e,"slot","buttons"),S(e,"class","flex svelte-19cwbrr")},m(o,s){$(o,e,s),m(e,n),O(n,t[0].name),t[31](n),m(e,l),a&&a.m(e,null),i||(r=k(n,"input",t[30]),i=!0)},p(t,l){1&l[0]&&n.value!==t[0].name&&O(n,t[0].name),t[8]?a&&(a.d(1),a=null):a?a.p(t,l):(a=rn(t),a.c(),a.m(e,null))},d(n){n&&h(e),t[31](null),a&&a.d(),i=!1,r()}}}function on(t){let e,n=[0,0],l=[];for(let e=0;e<2;e+=1)l[e]=cn(ln(t,n,e));return{c(){e=v("div");for(let t=0;t<2;t+=1)l[t].c();S(e,"class","ml-2")},m(t,n){$(t,e,n);for(let t=0;t<2;t+=1)l[t].m(e,null)},p(t,i){if(512&i[0]){let r;for(n=[0,0],r=0;r<2;r+=1){const a=ln(t,n,r);l[r]?l[r].p(a,i):(l[r]=cn(a),l[r].c(),l[r].m(e,null))}for(;r<2;r+=1)l[r].d(1)}},d(t){t&&h(e),g(l,t)}}}function sn(t){let e,n;return{c(){e=v("img"),e.src!==(n=t[9])&&S(e,"src",n),S(e,"alt","block repeating preview")},m(t,n){$(t,e,n)},p(t,l){512&l[0]&&e.src!==(n=t[9])&&S(e,"src",n)},d(t){t&&h(e)}}}function cn(t){let e,n,l=[0,0,0],i=[];for(let e=0;e<3;e+=1)i[e]=sn(nn(t,l,e));return{c(){e=v("div");for(let t=0;t<3;t+=1)i[t].c();n=x()},m(t,l){$(t,e,l);for(let t=0;t<3;t+=1)i[t].m(e,null);m(e,n)},p(t,r){if(512&r[0]){let a;for(l=[0,0,0],a=0;a<3;a+=1){const o=nn(t,l,a);i[a]?i[a].p(o,r):(i[a]=sn(o),i[a].c(),i[a].m(e,n))}for(;a<3;a+=1)i[a].d(1)}},d(t){t&&h(e),g(i,t)}}}function un(t){let e,n,l,r,a,o,s,c,u,d,p,f,g,b,w,C,j,D,I,R,H,T,L,A,P,V,_,Y,B,F,z,U,K,X,G,Q,Z,tt,et,nt,lt,at,ot,st,ct,mt,$t,ht,gt,vt,bt,yt,xt,wt,kt,qt,St,Ct,Nt,Mt,Ot,jt,Et,Dt,It,Rt,Ht,Tt,Lt,At,Pt,Vt,Jt,_t,Yt=(t[3].length>0?t[3].length:"")+"",Bt=(t[4].length>0?t[4].length:"")+"";function Ft(e){t[33].call(null,e)}let zt={};void 0!==t[7]&&(zt.value=t[7]),r=new ke({props:zt}),J.push(()=>ut(r,"value",Ft)),c=new Gt({props:{data:en}}),f=new Gt({props:{data:tn}}),I=new Gt({props:{data:re}}),P=new Gt({props:{data:re,flip:"horizontal"}}),U=new Gt({props:{data:Ze}}),G=new Gt({props:{data:Ze,style:"transform: rotate(90deg);"}}),et=new Gt({props:{data:te}}),at=new Gt({props:{data:ee}}),ct=new Gt({props:{data:ne}}),ht=new Gt({props:{data:le}});let Ut=20==t[0].width&&20==t[0].height&&on(t);return{c(){e=x(),n=v("div"),l=v("div"),dt(r.$$.fragment),o=x(),s=v("button"),dt(c.$$.fragment),d=x(),p=v("button"),dt(f.$$.fragment),b=x(),w=v("button"),w.textContent="Start over",C=x(),j=v("div"),D=v("button"),dt(I.$$.fragment),R=x(),H=y(Yt),L=x(),A=v("button"),dt(P.$$.fragment),V=x(),_=y(Bt),B=x(),F=v("div"),z=v("button"),dt(U.$$.fragment),K=x(),X=v("button"),dt(G.$$.fragment),Q=x(),Z=v("div"),tt=v("button"),dt(et.$$.fragment),nt=x(),lt=v("button"),dt(at.$$.fragment),ot=x(),st=v("button"),dt(ct.$$.fragment),mt=x(),$t=v("button"),dt(ht.$$.fragment),gt=x(),vt=v("div"),bt=y("Height\r\n\t\t\t\t"),yt=v("input"),xt=x(),wt=v("div"),kt=y("Width\r\n\t\t\t\t"),qt=v("input"),St=x(),Ct=v("label"),Nt=v("input"),Mt=y("\r\n\t\t\t\tShow grid"),Ot=x(),jt=v("div"),Et=v("canvas"),Rt=x(),Ht=v("div"),Tt=v("div"),Lt=v("img"),Pt=x(),Ut&&Ut.c(),S(s,"type","button"),S(s,"class",u="btn btn-sm btn-"+("paint"==t[1]?"primary":"light")),S(p,"type","button"),S(p,"class",g="btn btn-sm btn-"+("fill"==t[1]?"primary":"light")),S(l,"class","btn-group svelte-19cwbrr"),S(w,"type","button"),S(w,"class","btn btn-light btn-sm"),S(D,"type","button"),D.disabled=T=0==t[3].length,S(D,"class","btn btn-default btn-sm"),S(A,"type","button"),A.disabled=Y=0==t[4].length,S(A,"class","btn btn-default btn-sm"),S(j,"class","btn-group svelte-19cwbrr"),S(z,"type","button"),S(z,"class","btn btn-light btn-sm"),S(z,"title","Flip horizontal"),S(X,"type","button"),S(X,"class","btn btn-light btn-sm"),S(X,"title","Flip vertical"),S(F,"class","btn-group svelte-19cwbrr"),S(tt,"type","button"),S(tt,"class","btn btn-light btn-sm"),S(tt,"title","Move left"),S(lt,"type","button"),S(lt,"class","btn btn-light btn-sm"),S(lt,"title","Move right"),S(st,"type","button"),S(st,"class","btn btn-light btn-sm"),S(st,"title","Move up"),S($t,"type","button"),S($t,"class","btn btn-light btn-sm"),S($t,"title","Move down"),S(Z,"class","btn-group svelte-19cwbrr"),S(yt,"type","number"),S(yt,"placeholder","Height"),S(yt,"class","svelte-19cwbrr"),S(vt,"class","flex-column svelte-19cwbrr"),S(qt,"type","number"),S(qt,"placeholder","Width"),S(qt,"class","svelte-19cwbrr"),S(wt,"class","flex-column svelte-19cwbrr"),S(Nt,"type","checkbox"),S(Nt,"class","svelte-19cwbrr"),S(n,"class","toolbar flex align-center svelte-19cwbrr"),S(Et,"width",Dt=t[0].width*fn),S(Et,"height",It=t[0].height*fn),S(Et,"class","svelte-19cwbrr"),E(Et,"paint-cursor","paint"==t[1]),E(Et,"fill-cursor","fill"==t[1]),Lt.src!==(At=t[9])&&S(Lt,"src",At),S(Lt,"alt","preview"),S(Lt,"class","drop-shadow"),S(Ht,"class","preview flex svelte-19cwbrr"),S(jt,"class","flex my-3 align-top")},m(i,a){$(i,e,a),$(i,n,a),m(n,l),pt(r,l,null),m(l,o),m(l,s),pt(c,s,null),m(l,d),m(l,p),pt(f,p,null),m(n,b),m(n,w),m(n,C),m(n,j),m(j,D),pt(I,D,null),m(D,R),m(D,H),m(j,L),m(j,A),pt(P,A,null),m(A,V),m(A,_),m(n,B),m(n,F),m(F,z),pt(U,z,null),m(F,K),m(F,X),pt(G,X,null),m(n,Q),m(n,Z),m(Z,tt),pt(et,tt,null),m(Z,nt),m(Z,lt),pt(at,lt,null),m(Z,ot),m(Z,st),pt(ct,st,null),m(Z,mt),m(Z,$t),pt(ht,$t,null),m(n,gt),m(n,vt),m(vt,bt),m(vt,yt),O(yt,t[0].height),m(n,xt),m(n,wt),m(wt,kt),m(wt,qt),O(qt,t[0].width),m(n,St),m(n,Ct),m(Ct,Nt),Nt.checked=t[5],m(Ct,Mt),$(i,Ot,a),$(i,jt,a),m(jt,Et),t[39](Et),m(jt,Rt),m(jt,Ht),m(Ht,Tt),m(Tt,Lt),m(Ht,Pt),Ut&&Ut.m(Ht,null),Vt=!0,Jt||(_t=[k(s,"click",t[34]),k(p,"click",t[35]),k(w,"click",t[15]),k(D,"click",t[19]),k(A,"click",t[20]),k(z,"click",t[23]),k(X,"click",t[22]),k(tt,"click",t[24]),k(lt,"click",t[25]),k(st,"click",t[26]),k($t,"click",t[27]),k(yt,"input",t[36]),k(qt,"input",t[37]),k(Nt,"change",t[38]),k(Et,"mousedown",q(t[16])),k(Et,"mouseup",q(t[17])),k(Et,"mousemove",q(t[18])),k(Et,"contextmenu",q(t[29]))],Jt=!0)},p(t,e){const n={};!a&&128&e[0]&&(a=!0,n.value=t[7],W(()=>a=!1)),r.$set(n),(!Vt||2&e[0]&&u!==(u="btn btn-sm btn-"+("paint"==t[1]?"primary":"light")))&&S(s,"class",u),(!Vt||2&e[0]&&g!==(g="btn btn-sm btn-"+("fill"==t[1]?"primary":"light")))&&S(p,"class",g),(!Vt||8&e[0])&&Yt!==(Yt=(t[3].length>0?t[3].length:"")+"")&&M(H,Yt),(!Vt||8&e[0]&&T!==(T=0==t[3].length))&&(D.disabled=T),(!Vt||16&e[0])&&Bt!==(Bt=(t[4].length>0?t[4].length:"")+"")&&M(_,Bt),(!Vt||16&e[0]&&Y!==(Y=0==t[4].length))&&(A.disabled=Y),1&e[0]&&N(yt.value)!==t[0].height&&O(yt,t[0].height),1&e[0]&&N(qt.value)!==t[0].width&&O(qt,t[0].width),32&e[0]&&(Nt.checked=t[5]),(!Vt||1&e[0]&&Dt!==(Dt=t[0].width*fn))&&S(Et,"width",Dt),(!Vt||1&e[0]&&It!==(It=t[0].height*fn))&&S(Et,"height",It),2&e[0]&&E(Et,"paint-cursor","paint"==t[1]),2&e[0]&&E(Et,"fill-cursor","fill"==t[1]),(!Vt||512&e[0]&&Lt.src!==(At=t[9]))&&S(Lt,"src",At),20==t[0].width&&20==t[0].height?Ut?Ut.p(t,e):(Ut=on(t),Ut.c(),Ut.m(Ht,null)):Ut&&(Ut.d(1),Ut=null)},i(t){Vt||(it(r.$$.fragment,t),it(c.$$.fragment,t),it(f.$$.fragment,t),it(I.$$.fragment,t),it(P.$$.fragment,t),it(U.$$.fragment,t),it(G.$$.fragment,t),it(et.$$.fragment,t),it(at.$$.fragment,t),it(ct.$$.fragment,t),it(ht.$$.fragment,t),Vt=!0)},o(t){rt(r.$$.fragment,t),rt(c.$$.fragment,t),rt(f.$$.fragment,t),rt(I.$$.fragment,t),rt(P.$$.fragment,t),rt(U.$$.fragment,t),rt(G.$$.fragment,t),rt(et.$$.fragment,t),rt(at.$$.fragment,t),rt(ct.$$.fragment,t),rt(ht.$$.fragment,t),Vt=!1},d(l){l&&h(e),l&&h(n),ft(r),ft(c),ft(f),ft(I),ft(P),ft(U),ft(G),ft(et),ft(at),ft(ct),ft(ht),l&&h(Ot),l&&h(jt),t[39](null),Ut&&Ut.d(),Jt=!1,i(_t)}}}function dn(t){let e,n;return e=new Re({props:{hasChanges:t[10],$$slots:{default:[un],buttons:[an]},$$scope:{ctx:t}}}),e.$on("submit",t[13]),{c(){dt(e.$$.fragment)},m(t,l){pt(e,t,l),n=!0},p(t,n){const l={};1024&n[0]&&(l.hasChanges=t[10]),1023&n[0]|268435456&n[1]&&(l.$$scope={dirty:n,ctx:t}),e.$set(l)},i(t){n||(it(e.$$.fragment,t),n=!0)},o(t){rt(e.$$.fragment,t),n=!1},d(t){ft(e,t)}}}function pn(t){let e,n,l,i;return e=new Ge({props:{tab:"art",activeName:t[0].name,store:t[11],$$slots:{default:[dn]},$$scope:{ctx:t}}}),{c(){dt(e.$$.fragment)},m(r,a){pt(e,r,a),n=!0,l||(i=k(window,"keyup",t[21]),l=!0)},p(t,n){const l={};1&n[0]&&(l.activeName=t[0].name),2048&n[0]&&(l.store=t[11]),2047&n[0]|268435456&n[1]&&(l.$$scope={dirty:n,ctx:t}),e.$set(l)},i(t){n||(it(e.$$.fragment,t),n=!0)},o(t){rt(e.$$.fragment,t),n=!1},d(t){ft(e,t),l=!1,i()}}}let fn=25;function mn(t){return{x:Math.floor(t.offsetX/fn),y:Math.floor(t.offsetY/fn)}}function $n(t,e){return[...Array(t)].map(t=>hn(e))}function hn(t){return[...Array(t)].map(t=>"transparent")}function gn(t,e,n){return t.length>e&&t[e].length>n?t[e][n]||"transparent":"white"}function vn(t,e,n){let l;const i=Te("pixel-drawings",{});s(t,i,t=>n(11,l=t));let r,{params:a={}}=e;v();let o,c,u,d="paint",p=[],m=[],$=!1,h=!0,g="black";function v(){n(0,r={name:"",width:20,height:20,data:$n(20,20)}),setTimeout(()=>{u.focus()},100)}function b(t){confirm(`Are you sure you want to delete "${t}"?`)&&(delete l[t],i.set(l),St("/level-builder/art/new"))}function y(t,e,n){if(null!=t&&null!=o){null==c&&(c=o.getContext("2d")),c.clearRect(0,0,e*fn,n*fn);for(let l=0;l<n;l++)for(let n=0;n<e;n++)c.beginPath(),c.rect(n*fn,l*fn,fn,fn),c.fillStyle=gn(t,l,n),c.fill(),h&&(c.strokeStyle="#eee",c.stroke())}}function x(){setTimeout(()=>y(r.data,r.width,r.height),10)}function w(t){if(!$)return;const{x:e,y:l}=mn(t);null!=l&&null!=e&&function t(e,l,i){C();const a=r.data[e][l]||"transparent";if(n(0,r.data[e][l]=i,r),"fill"==d)for(let n=e-1;n<=e+1;n++)for(let e=l-1;e<=l+1;e++){if(n<0||n>r.height-1||e<0||e>r.width-1)continue;(r.data[n][e]||"transparent")==a&&t(n,e,i)}}(l,e,g)}function k(){n(3,p=[...p.slice(Math.max(p.length-20,0)),JSON.stringify(r.data)]),n(4,m=[])}function q(){0!=p.length&&(n(4,m=[...m,JSON.stringify(r.data)]),n(0,r.data=JSON.parse(p.pop()),r),n(3,p))}function S(){0!=m.length&&(n(3,p=[...p,JSON.stringify(r.data)]),n(0,r.data=JSON.parse(m.pop()),r),n(4,m))}function C(){if(r.height>r.data.length){const t=r.height-r.data.length;n(0,r.data=r.data.concat($n(t,r.width)),r),console.log("adding rows")}else r.height<r.data.length&&(console.log("chopping off some rows"),r.data.slice(0,r.height));n(0,r.data=r.data.map(t=>{if(r.width>t.length){const e=r.width-t.length;t=t.concat(hn(e)),console.log("adding cols")}else r.width<t.length&&(console.log("chopping off some cols"),t.slice(0,r.width));return t}),r)}let M,O,j,E,D;return t.$$set=t=>{"params"in t&&n(28,a=t.params)},t.$$.update=()=>{268435456&t.$$.dirty[0]&&n(42,M=decodeURIComponent(a.name)||"new"),2048&t.$$.dirty[1]&&("new"==M?v():function(t){l.hasOwnProperty(t)&&(n(3,p=[]),n(4,m=[]),n(0,r=JSON.parse(JSON.stringify(l[t]))),n(0,r.width=r.width||r.data[0].length,r),n(0,r.height=r.height||r.data.length,r),x())}(M)),2048&t.$$.dirty[1]&&n(8,O="new"==M),1&t.$$.dirty[0]&&n(9,j=He(r.data,r.width,r.height)),1&t.$$.dirty[0]&&(E=y(r.data,r.width,r.height)),33&t.$$.dirty[0]&&0!=r.width&&0!=r.height&&h&&x(),2049&t.$$.dirty[0]&&n(10,D=null!=r&&!Qe.equals(r,l[r.name]))},[r,d,o,p,m,h,u,g,O,j,D,l,i,function(){Qe.empty(r.name)?document.getElementById("name").focus():(n(0,r.png=He(r.data,r.width,r.height),r),f(i,l[r.name]=JSON.parse(JSON.stringify(r)),l),St("/level-builder/art/"+encodeURIComponent(r.name)))},b,function(t=!0){t&&k(),n(0,r.data=$n(r.height,r.width),r)},function(t){const e=function(t){const{x:e,y:n}=mn(t);return r.data[n][e]}(t);t.altKey||0!==t.button?n(7,g=e):(k(),$=!0,w(t))},function(t){$=!1},w,q,S,function(t){switch(t.code){case"KeyZ":t.ctrlKey&&q();break;case"KeyY":t.ctrlKey&&S()}},function(){n(0,r.data=r.data.slice(0,r.height).reverse(),r)},function(){n(0,r.data=r.data.map(t=>t.slice(0,r.width).reverse()),r)},function(){k(),C(),n(0,r.data=r.data.map(t=>{const e=t.shift();return[...t,e]}),r)},function(){k(),C(),n(0,r.data=r.data.map(t=>[t.pop(),...t]),r)},function(){k(),C();const t=r.data.shift();n(0,r.data=[...r.data,t],r)},function(){k(),C();const t=r.data.pop();n(0,r.data=[t,...r.data],r)},a,function(e){P(t,e)},function(){r.name=this.value,n(0,r)},function(t){J[t?"unshift":"push"](()=>{u=t,n(6,u)})},()=>b(r.name),function(t){g=t,n(7,g)},()=>n(1,d="paint"),()=>n(1,d="fill"),function(){r.height=N(this.value),n(0,r)},function(){r.width=N(this.value),n(0,r)},function(){h=this.checked,n(5,h)},function(t){J[t?"unshift":"push"](()=>{o=t,n(2,o)})}]}class bn extends $t{constructor(t){super(),mt(this,t,vn,pn,a,{params:28},[-1,-1])}}const yn=t=>({option:32768&t[0]}),xn=t=>({option:t[39]});function wn(t,e,n){const l=t.slice();return l[39]=e[n],l[41]=n,l}const kn=t=>({option:65536&t[0]}),qn=t=>({option:t[39]}),Sn=t=>({option:65536&t[0]}),Cn=t=>({option:t[39]});function Nn(t,e,n){const l=t.slice();return l[39]=e[n],l[41]=n,l}function Mn(t){let e;return{c(){e=y(t[4])},m(t,n){$(t,e,n)},p(t,n){16&n[0]&&M(e,t[4])},d(t){t&&h(e)}}}function On(t){let e,n;const l=t[25].default,i=c(l,t,t[24],qn),r=i||function(t){let e,n,l=t[39].label+"";return{c(){n=w(),e=new D(n)},m(t,i){e.m(l,t,i),$(t,n,i)},p(t,n){65536&n[0]&&l!==(l=t[39].label+"")&&e.p(l)},d(t){t&&h(n),t&&e.d()}}}(t);return{c(){e=v("span"),r&&r.c(),S(e,"class","select-input-text svelte-qly777")},m(t,l){$(t,e,l),r&&r.m(e,null),n=!0},p(t,e){i?i.p&&16842752&e[0]&&d(i,l,t,t[24],e,kn,qn):r&&r.p&&65536&e[0]&&r.p(t,e)},i(t){n||(it(r,t),n=!0)},o(t){rt(r,t),n=!1},d(t){t&&h(e),r&&r.d(t)}}}function jn(t){let e,n,l,i=t[41]>0&&En(t);const r=t[25].default,a=c(r,t,t[24],Cn),o=a||function(t){let e,n,l=t[39].label+"";return{c(){n=w(),e=new D(n)},m(t,i){e.m(l,t,i),$(t,n,i)},p(t,n){65536&n[0]&&l!==(l=t[39].label+"")&&e.p(l)},d(t){t&&h(n),t&&e.d()}}}(t);return{c(){i&&i.c(),e=x(),n=v("span"),o&&o.c(),S(n,"class","select-input-text svelte-qly777")},m(t,r){i&&i.m(t,r),$(t,e,r),$(t,n,r),o&&o.m(n,null),l=!0},p(t,n){t[41]>0?i?i.p(t,n):(i=En(t),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),a?a.p&&16842752&n[0]&&d(a,r,t,t[24],n,Sn,Cn):o&&o.p&&65536&n[0]&&o.p(t,n)},i(t){l||(it(o,t),l=!0)},o(t){rt(o,t),l=!1},d(t){i&&i.d(t),t&&h(e),t&&h(n),o&&o.d(t)}}}function En(t){let e,n,l=t[9]&&t[41]==t[16].length-1?" and":"";return{c(){e=y(","),n=y(l)},m(t,l){$(t,e,l),$(t,n,l)},p(t,e){66048&e[0]&&l!==(l=t[9]&&t[41]==t[16].length-1?" and":"")&&M(n,l)},d(t){t&&h(e),t&&h(n)}}}function Dn(t,e){let n,l,i,r,a;const o=[jn,On],s=[];function c(t,e){return t[3]?0:1}return l=c(e),i=s[l]=o[l](e),{key:t,first:null,c(){n=w(),i.c(),r=w(),this.first=n},m(t,e){$(t,n,e),s[l].m(t,e),$(t,r,e),a=!0},p(t,e){let n=l;l=c(t),l===n?s[l].p(t,e):(nt(),rt(s[n],1,1,()=>{s[n]=null}),lt(),i=s[l],i||(i=s[l]=o[l](t),i.c()),it(i,1),i.m(r.parentNode,r))},i(t){a||(it(i),a=!0)},o(t){rt(i),a=!1},d(t){t&&h(n),s[l].d(t),t&&h(r)}}}function In(t){let e,n,l=(null!=t[5]?t[5]:"")+"";return{c(){e=v("span"),n=y(l),S(e,"class","select-input-text svelte-qly777")},m(t,l){$(t,e,l),m(e,n)},p(t,e){32&e[0]&&l!==(l=(null!=t[5]?t[5]:"")+"")&&M(n,l)},d(t){t&&h(e)}}}function Rn(t){let e,n,l,i=t[6]&&Hn(t),r=t[15],a=[];for(let e=0;e<r.length;e+=1)a[e]=An(wn(t,r,e));const o=t=>rt(a[t],1,1,()=>{a[t]=null});let s=null;return r.length||(s=Tn(t)),{c(){e=v("div"),i&&i.c(),n=x();for(let t=0;t<a.length;t+=1)a[t].c();s&&s.c(),S(e,"class","select-dropdown svelte-qly777")},m(t,r){$(t,e,r),i&&i.m(e,null),m(e,n);for(let t=0;t<a.length;t+=1)a[t].m(e,null);s&&s.m(e,null),l=!0},p(t,l){if(t[6]?i?(i.p(t,l),64&l[0]&&it(i,1)):(i=Hn(t),i.c(),it(i,1),i.m(e,n)):i&&(nt(),rt(i,1,1,()=>{i=null}),lt()),16957442&l[0]){let n;for(r=t[15],n=0;n<r.length;n+=1){const i=wn(t,r,n);a[n]?(a[n].p(i,l),it(a[n],1)):(a[n]=An(i),a[n].c(),it(a[n],1),a[n].m(e,null))}for(nt(),n=r.length;n<a.length;n+=1)o(n);lt(),!r.length&&s?s.p(t,l):r.length?s&&(s.d(1),s=null):(s=Tn(t),s.c(),s.m(e,null))}},i(t){if(!l){it(i);for(let t=0;t<r.length;t+=1)it(a[t]);l=!0}},o(t){rt(i),a=a.filter(Boolean);for(let t=0;t<a.length;t+=1)rt(a[t]);l=!1},d(t){t&&h(e),i&&i.d(),g(a,t),s&&s.d()}}}function Hn(t){let e,n,l,r,a,o,s,c,u;return o=new Gt({props:{data:Zt,class:"fw"}}),{c(){e=v("div"),n=v("div"),l=v("input"),r=x(),a=v("a"),dt(o.$$.fragment),S(l,"type","text"),S(l,"class","form-control"),S(l,"placeholder",t[11]),l.autofocus=!0,S(a,"class","input-group-addon"),S(a,"href","/"),S(a,"tabindex","-1"),S(n,"class","input-group"),S(e,"class","filter svelte-qly777")},m(i,d){$(i,e,d),m(e,n),m(n,l),O(l,t[1]),m(n,r),m(n,a),pt(o,a,null),s=!0,l.focus(),c||(u=[k(l,"input",t[27]),k(l,"keydown",t[19]),k(a,"click",q(t[28]))],c=!0)},p(t,e){(!s||2048&e[0])&&S(l,"placeholder",t[11]),2&e[0]&&l.value!==t[1]&&O(l,t[1])},i(t){s||(it(o.$$.fragment,t),s=!0)},o(t){rt(o.$$.fragment,t),s=!1},d(t){t&&h(e),ft(o),c=!1,i(u)}}}function Tn(t){let e,n=null!=t[1]&&t[1].length>0&&Ln(t);return{c(){n&&n.c(),e=w()},m(t,l){n&&n.m(t,l),$(t,e,l)},p(t,l){null!=t[1]&&t[1].length>0?n?n.p(t,l):(n=Ln(t),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(t){n&&n.d(t),t&&h(e)}}}function Ln(t){let e,n,l,i;return{c(){e=v("div"),n=y('No options match "'),l=y(t[1]),i=y('"'),S(e,"class","alert alert-warning")},m(t,r){$(t,e,r),m(e,n),m(e,l),m(e,i)},p(t,e){2&e[0]&&M(l,t[1])},d(t){t&&h(e)}}}function An(t){let e,n,l,i,r;const a=t[25].default,o=c(a,t,t[24],xn),s=o||function(t){let e,n,l=t[39].label+"";return{c(){n=w(),e=new D(n)},m(t,i){e.m(l,t,i),$(t,n,i)},p(t,n){32768&n[0]&&l!==(l=t[39].label+"")&&e.p(l)},d(t){t&&h(n),t&&e.d()}}}(t);function u(...e){return t[29](t[39],t[41],...e)}return{c(){e=v("div"),s&&s.c(),n=x(),S(e,"class","item svelte-qly777"),E(e,"selected",t[39].selected),E(e,"viewing",t[14]==t[41]),E(e,"disabled",t[39].disabled)},m(t,a){$(t,e,a),s&&s.m(e,null),m(e,n),l=!0,i||(r=k(e,"click",u),i=!0)},p(n,l){t=n,o?o.p&&16809984&l[0]&&d(o,a,t,t[24],l,yn,xn):s&&s.p&&32768&l[0]&&s.p(t,l),32768&l[0]&&E(e,"selected",t[39].selected),16384&l[0]&&E(e,"viewing",t[14]==t[41]),32768&l[0]&&E(e,"disabled",t[39].disabled)},i(t){l||(it(s,t),l=!0)},o(t){rt(s,t),l=!1},d(t){t&&h(e),s&&s.d(t),i=!1,r()}}}function Pn(t){let e,n,l,r,a,o,s,c,u,d,p,f,g,b,y=[],w=new Map,q=(0===t[16].length||!t[3]&&t[16][0].value)&&Mn(t),C=t[16];const N=t=>t[39];for(let e=0;e<C.length;e+=1){let n=Nn(t,C,e),l=N(n);w.set(l,y[e]=Dn(l,n))}let M=(null==t[16]||0===t[16].length)&&In(t);c=new Gt({props:{data:ie,class:"fw"}});let O=t[0]&&!t[7]&&Rn(t);return{c(){e=v("div"),n=v("div"),l=v("div"),q&&q.c(),r=x();for(let t=0;t<y.length;t+=1)y[t].c();a=x(),M&&M.c(),o=x(),s=v("span"),dt(c.$$.fragment),p=x(),O&&O.c(),S(l,"class","input-select-content svelte-qly777"),S(s,"class","dropdown-icon svelte-qly777"),S(n,"class",u="btn btn-light "+t[8]+" svelte-qly777"),S(n,"data-test",d=t[2]+"-btn"),S(n,"tabindex",Vn),E(n,"btn-sm",t[10]),E(n,"open",t[0]),S(e,"class","select svelte-qly777"),S(e,"data-test",t[2]),S(e,"id",t[2]),E(e,"inline",t[9]),E(e,"disabled",t[7])},m(i,u){$(i,e,u),m(e,n),m(n,l),q&&q.m(l,null),m(l,r);for(let t=0;t<y.length;t+=1)y[t].m(l,null);m(l,a),M&&M.m(l,null),m(n,o),m(n,s),pt(c,s,null),t[26](n),m(e,p),O&&O.m(e,null),t[30](e),f=!0,g||(b=[k(n,"click",t[18]),k(n,"focus",t[18]),k(n,"keydown",t[19])],g=!0)},p(t,i){if(0===t[16].length||!t[3]&&t[16][0].value?q?q.p(t,i):(q=Mn(t),q.c(),q.m(l,r)):q&&(q.d(1),q=null),16843272&i[0]){const e=t[16];nt(),y=function(t,e,n,l,i,r,a,o,s,c,u,d){let p=t.length,f=r.length,m=p;const $={};for(;m--;)$[t[m].key]=m;const h=[],g=new Map,v=new Map;for(m=f;m--;){const t=d(i,r,m),o=n(t);let s=a.get(o);s?l&&s.p(t,e):(s=c(o,t),s.c()),g.set(o,h[m]=s),o in $&&v.set(o,Math.abs(m-$[o]))}const b=new Set,y=new Set;function x(t){it(t,1),t.m(o,u),a.set(t.key,t),u=t.first,f--}for(;p&&f;){const e=h[f-1],n=t[p-1],l=e.key,i=n.key;e===n?(u=e.first,p--,f--):g.has(i)?!a.has(l)||b.has(l)?x(e):y.has(i)?p--:v.get(l)>v.get(i)?(y.add(l),x(e)):(b.add(i),p--):(s(n,a),p--)}for(;p--;){const e=t[p];g.has(e.key)||s(e,a)}for(;f;)x(h[f-1]);return h}(y,i,N,1,t,e,w,l,ot,Dn,a,Nn),lt()}null==t[16]||0===t[16].length?M?M.p(t,i):(M=In(t),M.c(),M.m(l,null)):M&&(M.d(1),M=null),(!f||256&i[0]&&u!==(u="btn btn-light "+t[8]+" svelte-qly777"))&&S(n,"class",u),(!f||4&i[0]&&d!==(d=t[2]+"-btn"))&&S(n,"data-test",d),1280&i[0]&&E(n,"btn-sm",t[10]),257&i[0]&&E(n,"open",t[0]),t[0]&&!t[7]?O?(O.p(t,i),129&i[0]&&it(O,1)):(O=Rn(t),O.c(),it(O,1),O.m(e,null)):O&&(nt(),rt(O,1,1,()=>{O=null}),lt()),(!f||4&i[0])&&S(e,"data-test",t[2]),(!f||4&i[0])&&S(e,"id",t[2]),512&i[0]&&E(e,"inline",t[9]),128&i[0]&&E(e,"disabled",t[7])},i(t){if(!f){for(let t=0;t<C.length;t+=1)it(y[t]);it(c.$$.fragment,t),it(O),f=!0}},o(t){for(let t=0;t<y.length;t+=1)rt(y[t]);rt(c.$$.fragment,t),rt(O),f=!1},d(n){n&&h(e),q&&q.d();for(let t=0;t<y.length;t+=1)y[t].d();M&&M.d(),ft(c),t[26](null),O&&O.d(),t[30](null),g=!1,i(b)}}}const Vn=0;function Jn(t,e,n){const l=A();let{name:i=null}=e,{multiple:r=!1}=e,{prefixLabel:a=""}=e,{placeholder:o=""}=e,{options:s=null}=e,{valueProp:c=null}=e,{labelProp:u=null}=e,{value:d=null}=e;const p=d,f=(m="markDirty",H().$$.context.get(m));var m;let{filterable:$=!1}=e,{isOpen:h=!1}=e,{disabled:g=!1}=e,{class:v=""}=e,{inline:b=!1}=e,{sm:y=!1}=e,x=null,w=null,{filter:k=""}=e,{filterPlaceholder:q="Filter"}=e,S=-1;function C(t,e){return null==t?[]:t.map(t=>{const n="string"==typeof t,l=n?{}:{...t};return l.value=n?t:null!=c?t[c]:void 0!==t.value?t.value:t,l.label=n?t:void 0!==t[u]?t[u]:void 0!==t.label?t.label:t,l.selected=r?null!=e&&e.indexOf(l.value)>-1:e==l.value,l.disabled=void 0!==t.disabled&&t.disabled,l})}function N(t,e){r?(n(20,d=t.selected?(d||[]).filter(e=>e!=t.value):(d||[]).concat(t.value)),document.activeElement!=w&&E()):(n(20,d=t.value),O()),null!=e&&n(14,S=e),l("change")}async function M(){if(g)return;n(0,h=!0);const t=r?null!=d&&d.length>0?d[0]:null:d;n(14,S=null!=t?R.findIndex(e=>e.value===t):-1),document.addEventListener("mousedown",j),document.addEventListener("touchstart",j),await U(),h&&E()}function O(){E(),n(0,h=!1),document.removeEventListener("mousedown",j),document.removeEventListener("touchstart",j)}function j(t){null!=t.target.closest&&t.target.closest(".select")===x||O()}function E(){w&&!$&&w.focus()}let{$$slots:D={},$$scope:I}=e;let R,T;return t.$$set=t=>{"name"in t&&n(2,i=t.name),"multiple"in t&&n(3,r=t.multiple),"prefixLabel"in t&&n(4,a=t.prefixLabel),"placeholder"in t&&n(5,o=t.placeholder),"options"in t&&n(21,s=t.options),"valueProp"in t&&n(22,c=t.valueProp),"labelProp"in t&&n(23,u=t.labelProp),"value"in t&&n(20,d=t.value),"filterable"in t&&n(6,$=t.filterable),"isOpen"in t&&n(0,h=t.isOpen),"disabled"in t&&n(7,g=t.disabled),"class"in t&&n(8,v=t.class),"inline"in t&&n(9,b=t.inline),"sm"in t&&n(10,y=t.sm),"filter"in t&&n(1,k=t.filter),"filterPlaceholder"in t&&n(11,q=t.filterPlaceholder),"$$scope"in t&&n(24,I=t.$$scope)},t.$$.update=()=>{1048576&t.$$.dirty[0]&&(null==f||null==d||Qe.equals(d,p)||f()),3145794&t.$$.dirty[0]&&n(15,R=(()=>{const t=C(s,d);return $?function(t,e){if(null==(t=t||null))return null;if(null==e||""===e)return t;const n=e.trim().toLowerCase();return t.filter(t=>JSON.stringify(t).toLowerCase().indexOf(n)>-1)}(t,k):t})()),49216&t.$$.dirty[0]&&(S>R.length-1&&n(14,S=R.length-1),S<-1&&n(14,S=-1)),1048584&t.$$.dirty[0]&&r&&d&&(Array.isArray(d)?n(20,d=C(s,d).filter(t=>t.selected).map(t=>t.value)):n(20,d=[d])),3145736&t.$$.dirty[0]&&n(16,T=C(s,d).filter(t=>r?d&&d.indexOf(t.value)>-1:d==t.value))},[h,k,i,r,a,o,$,g,v,b,y,q,x,w,S,R,T,N,M,function(t){if("Tab"!=t.code)if(h)switch(t.code){case"Escape":t.stopPropagation(),O();break;case"Space":case"Enter":null!=S&&null!=R[S]&&(N(R[S]),t.preventDefault());break;case"ArrowUp":n(14,S--,S),($&&-2==S||!$&&S<=-1)&&O(),t.preventDefault();break;case"ArrowDown":h?S<R.length-1&&n(14,S++,S):M(),t.preventDefault()}else{if("ShiftLeft"==t.code||"ShiftRight"==t.code||"ArrowUp"==t.code)return;M()}else O()},d,s,c,u,I,D,function(t){J[t?"unshift":"push"](()=>{w=t,n(13,w)})},function(){k=this.value,n(1,k)},()=>n(1,k=""),(t,e)=>t.disabled?null:N(t,e),function(t){J[t?"unshift":"push"](()=>{x=t,n(12,x)})}]}class _n extends $t{constructor(t){super(),mt(this,t,Jn,Pn,a,{name:2,multiple:3,prefixLabel:4,placeholder:5,options:21,valueProp:22,labelProp:23,value:20,filterable:6,isOpen:0,disabled:7,class:8,inline:9,sm:10,filter:1,filterPlaceholder:11},[-1,-1])}}function Yn(t){let e,n,l,i,r=t[10].value+"";return e=new Je({props:{name:t[10].value,spin:t[1]}}),{c(){dt(e.$$.fragment),n=x(),l=y(r)},m(t,r){pt(e,t,r),$(t,n,r),$(t,l,r),i=!0},p(t,n){const a={};1024&n&&(a.name=t[10].value),2&n&&(a.spin=t[1]),e.$set(a),(!i||1024&n)&&r!==(r=t[10].value+"")&&M(l,r)},i(t){i||(it(e.$$.fragment,t),i=!0)},o(t){rt(e.$$.fragment,t),i=!1},d(t){ft(e,t),t&&h(n),t&&h(l)}}}function Bn(t){let e,n,l,i,r;return{c(){e=v("a"),n=y("Edit "),l=y(t[0]),i=y(" art"),S(e,"href",r="#/level-builder/art/"+t[0]),S(e,"class","ml-1")},m(t,r){$(t,e,r),m(e,n),m(e,l),m(e,i)},p(t,n){1&n&&M(l,t[0]),1&n&&r!==(r="#/level-builder/art/"+t[0])&&S(e,"href",r)},d(t){t&&h(e)}}}function Fn(t){let e,n,l,i,r,a,o,s;const u=t[6].default,p=c(u,t,t[8],null),f=p||function(t){let e;return{c(){e=y("Graphic")},m(t,n){$(t,e,n)},d(t){t&&h(e)}}}();function g(e){t[7].call(null,e)}let b={inline:!0,name:t[2],options:t[4],filterable:t[4].length>3,placeholder:t[3],$$slots:{default:[Yn,({option:t})=>({10:t}),({option:t})=>t?1024:0]},$$scope:{ctx:t}};void 0!==t[0]&&(b.value=t[0]),r=new _n({props:b}),J.push(()=>ut(r,"value",g));let w=null!=t[0]&&Bn(t);return{c(){e=v("div"),n=v("label"),f&&f.c(),l=x(),i=v("div"),dt(r.$$.fragment),o=x(),w&&w.c(),S(n,"for","graphic"),S(e,"class","form-group")},m(t,a){$(t,e,a),m(e,n),f&&f.m(n,null),m(e,l),m(e,i),pt(r,i,null),m(e,o),w&&w.m(e,null),s=!0},p(t,[n]){p&&p.p&&256&n&&d(p,u,t,t[8],n,null,null);const l={};4&n&&(l.name=t[2]),16&n&&(l.options=t[4]),16&n&&(l.filterable=t[4].length>3),8&n&&(l.placeholder=t[3]),1282&n&&(l.$$scope={dirty:n,ctx:t}),!a&&1&n&&(a=!0,l.value=t[0],W(()=>a=!1)),r.$set(l),null!=t[0]?w?w.p(t,n):(w=Bn(t),w.c(),w.m(e,null)):w&&(w.d(1),w=null)},i(t){s||(it(f,t),it(r.$$.fragment,t),s=!0)},o(t){rt(f,t),rt(r.$$.fragment,t),s=!1},d(t){t&&h(e),f&&f.d(t),ft(r),w&&w.d()}}}function zn(t,e,n){let l;s(t,Le,t=>n(9,l=t));let i,{value:r=null}=e,{filter:a=null}=e,{spin:o=!1}=e,{name:c="graphic-picker"}=e,{placeholder:u="Select art"}=e,{$$slots:d={},$$scope:p}=e;return t.$$set=t=>{"value"in t&&n(0,r=t.value),"filter"in t&&n(5,a=t.filter),"spin"in t&&n(1,o=t.spin),"name"in t&&n(2,c=t.name),"placeholder"in t&&n(3,u=t.placeholder),"$$scope"in t&&n(8,p=t.$$scope)},t.$$.update=()=>{544&t.$$.dirty&&n(4,i=Object.keys(l).filter(t=>null==a||a(l[t])))},[r,o,c,u,i,a,d,function(t){r=t,n(0,r)},p]}class Un extends $t{constructor(t){super(),mt(this,t,zn,Fn,a,{value:0,filter:5,spin:1,name:2,placeholder:3})}}function Kn(t){let e,n,l,i,r,a,o,s;const u=t[3].default,p=c(u,t,t[2],null);return{c(){e=v("div"),n=v("div"),l=v("input"),i=x(),r=v("label"),p&&p.c(),S(l,"name",t[1]),S(l,"id",t[1]),S(l,"type","checkbox"),S(l,"class","form-check-input"),S(r,"class","form-check-label"),S(r,"for",t[1]),S(n,"class","form-check"),S(e,"class","form-group")},m(c,u){$(c,e,u),m(e,n),m(n,l),l.checked=t[0],m(n,i),m(n,r),p&&p.m(r,null),a=!0,o||(s=k(l,"change",t[4]),o=!0)},p(t,[e]){(!a||2&e)&&S(l,"name",t[1]),(!a||2&e)&&S(l,"id",t[1]),1&e&&(l.checked=t[0]),p&&p.p&&4&e&&d(p,u,t,t[2],e,null,null),(!a||2&e)&&S(r,"for",t[1])},i(t){a||(it(p,t),a=!0)},o(t){rt(p,t),a=!1},d(t){t&&h(e),p&&p.d(t),o=!1,s()}}}function Wn(t,e,n){let{checked:l=null}=e,{name:i="check"}=e,{$$slots:r={},$$scope:a}=e;return t.$$set=t=>{"checked"in t&&n(0,l=t.checked),"name"in t&&n(1,i=t.name),"$$scope"in t&&n(2,a=t.$$scope)},[l,i,a,r,function(){l=this.checked,n(0,l)}]}class Xn extends $t{constructor(t){super(),mt(this,t,Wn,Kn,a,{checked:0,name:1})}}function Gn(t){let e,n,l,i,r,a,o;const s=t[6].default,u=c(s,t,t[5],null);return{c(){e=v("div"),n=v("label"),u&&u.c(),l=x(),i=v("input"),S(n,"for",t[1]),S(i,"name",t[1]),S(i,"id",t[1]),S(i,"type","number"),S(i,"min",t[2]),S(i,"max",t[3]),S(i,"step",t[4]),S(i,"class","form-control"),S(e,"class","form-group")},m(s,c){$(s,e,c),m(e,n),u&&u.m(n,null),m(e,l),m(e,i),O(i,t[0]),r=!0,a||(o=k(i,"input",t[7]),a=!0)},p(t,[e]){u&&u.p&&32&e&&d(u,s,t,t[5],e,null,null),(!r||2&e)&&S(n,"for",t[1]),(!r||2&e)&&S(i,"name",t[1]),(!r||2&e)&&S(i,"id",t[1]),(!r||4&e)&&S(i,"min",t[2]),(!r||8&e)&&S(i,"max",t[3]),(!r||16&e)&&S(i,"step",t[4]),1&e&&N(i.value)!==t[0]&&O(i,t[0])},i(t){r||(it(u,t),r=!0)},o(t){rt(u,t),r=!1},d(t){t&&h(e),u&&u.d(t),a=!1,o()}}}function Qn(t,e,n){let{value:l=null}=e,{name:i="num"}=e,{min:r=null}=e,{max:a=null}=e,{step:o=1}=e,{$$slots:s={},$$scope:c}=e;return t.$$set=t=>{"value"in t&&n(0,l=t.value),"name"in t&&n(1,i=t.name),"min"in t&&n(2,r=t.min),"max"in t&&n(3,a=t.max),"step"in t&&n(4,o=t.step),"$$scope"in t&&n(5,c=t.$$scope)},[l,i,r,a,o,c,s,function(){l=N(this.value),n(0,l)}]}class Zn extends $t{constructor(t){super(),mt(this,t,Qn,Gn,a,{value:0,name:1,min:2,max:3,step:4})}}var tl=Te("blocks",{});function el(t){let e;return{c(){e=y("Name")},m(t,n){$(t,e,n)},d(t){t&&h(e)}}}function nl(t){let e;return{c(){e=y("Graphic (must be 20x20)")},m(t,n){$(t,e,n)},d(t){t&&h(e)}}}function ll(t){let e;return{c(){e=y("Solid?")},m(t,n){$(t,e,n)},d(t){t&&h(e)}}}function il(t){let e;return{c(){e=y("Throw things that touch it?")},m(t,n){$(t,e,n)},d(t){t&&h(e)}}}function rl(t){let e;return{c(){e=y("DPS (when players or enemies touch this block, how much damage should they take per second?)")},m(t,n){$(t,e,n)},d(t){t&&h(e)}}}function al(e){let n,l,i;return{c(){n=v("button"),n.textContent="Delete",S(n,"type","button"),S(n,"class","btn btn-danger")},m(t,r){$(t,n,r),l||(i=k(n,"click",e[12]),l=!0)},p:t,d(t){t&&h(n),l=!1,i()}}}function ol(t){let e,n=!t[1]&&al(t);return{c(){e=v("span"),n&&n.c(),S(e,"slot","buttons")},m(t,l){$(t,e,l),n&&n.m(e,null)},p(t,l){t[1]?n&&(n.d(1),n=null):n?n.p(t,l):(n=al(t),n.c(),n.m(e,null))},d(t){t&&h(e),n&&n.d()}}}function sl(t){let e,n,l,i,r,a,o,s,c,u,d,p,f,m,g,v;function b(e){t[7].call(null,e)}let y={name:"name",autofocus:!0,$$slots:{default:[el]},$$scope:{ctx:t}};function w(e){t[8].call(null,e)}void 0!==t[0].name&&(y.value=t[0].name),e=new Ce({props:y}),J.push(()=>ut(e,"value",b));let k={filter:dl,$$slots:{default:[nl]},$$scope:{ctx:t}};function q(e){t[9].call(null,e)}void 0!==t[0].graphic&&(k.value=t[0].graphic),i=new Un({props:k}),J.push(()=>ut(i,"value",w));let S={name:"solid",$$slots:{default:[ll]},$$scope:{ctx:t}};function C(e){t[10].call(null,e)}void 0!==t[0].solid&&(S.checked=t[0].solid),o=new Xn({props:S}),J.push(()=>ut(o,"checked",q));let N={name:"throwOnTouch",$$slots:{default:[il]},$$scope:{ctx:t}};function M(e){t[11].call(null,e)}void 0!==t[0].throwOnTouch&&(N.checked=t[0].throwOnTouch),u=new Xn({props:N}),J.push(()=>ut(u,"checked",C));let O={name:"dps",$$slots:{default:[rl]},$$scope:{ctx:t}};return void 0!==t[0].dps&&(O.value=t[0].dps),f=new Zn({props:O}),J.push(()=>ut(f,"value",M)),{c(){dt(e.$$.fragment),l=x(),dt(i.$$.fragment),a=x(),dt(o.$$.fragment),c=x(),dt(u.$$.fragment),p=x(),dt(f.$$.fragment),g=x()},m(t,n){pt(e,t,n),$(t,l,n),pt(i,t,n),$(t,a,n),pt(o,t,n),$(t,c,n),pt(u,t,n),$(t,p,n),pt(f,t,n),$(t,g,n),v=!0},p(t,l){const a={};65536&l&&(a.$$scope={dirty:l,ctx:t}),!n&&1&l&&(n=!0,a.value=t[0].name,W(()=>n=!1)),e.$set(a);const c={};65536&l&&(c.$$scope={dirty:l,ctx:t}),!r&&1&l&&(r=!0,c.value=t[0].graphic,W(()=>r=!1)),i.$set(c);const p={};65536&l&&(p.$$scope={dirty:l,ctx:t}),!s&&1&l&&(s=!0,p.checked=t[0].solid,W(()=>s=!1)),o.$set(p);const $={};65536&l&&($.$$scope={dirty:l,ctx:t}),!d&&1&l&&(d=!0,$.checked=t[0].throwOnTouch,W(()=>d=!1)),u.$set($);const h={};65536&l&&(h.$$scope={dirty:l,ctx:t}),!m&&1&l&&(m=!0,h.value=t[0].dps,W(()=>m=!1)),f.$set(h)},i(t){v||(it(e.$$.fragment,t),it(i.$$.fragment,t),it(o.$$.fragment,t),it(u.$$.fragment,t),it(f.$$.fragment,t),v=!0)},o(t){rt(e.$$.fragment,t),rt(i.$$.fragment,t),rt(o.$$.fragment,t),rt(u.$$.fragment,t),rt(f.$$.fragment,t),v=!1},d(t){ft(e,t),t&&h(l),ft(i,t),t&&h(a),ft(o,t),t&&h(c),ft(u,t),t&&h(p),ft(f,t),t&&h(g)}}}function cl(t){let e,n;return e=new Re({props:{hasChanges:t[2],$$slots:{default:[sl],buttons:[ol]},$$scope:{ctx:t}}}),e.$on("submit",t[4]),{c(){dt(e.$$.fragment)},m(t,l){pt(e,t,l),n=!0},p(t,n){const l={};4&n&&(l.hasChanges=t[2]),65539&n&&(l.$$scope={dirty:n,ctx:t}),e.$set(l)},i(t){n||(it(e.$$.fragment,t),n=!0)},o(t){rt(e.$$.fragment,t),n=!1},d(t){ft(e,t)}}}function ul(t){let e,n;return e=new Ge({props:{tab:"blocks",activeName:t[0].name,store:t[3],$$slots:{default:[cl]},$$scope:{ctx:t}}}),{c(){dt(e.$$.fragment)},m(t,l){pt(e,t,l),n=!0},p(t,[n]){const l={};1&n&&(l.activeName=t[0].name),8&n&&(l.store=t[3]),65543&n&&(l.$$scope={dirty:n,ctx:t}),e.$set(l)},i(t){n||(it(e.$$.fragment,t),n=!0)},o(t){rt(e.$$.fragment,t),n=!1},d(t){ft(e,t)}}}const dl=t=>20==t.width&&20==t.height;function pl(t,e,n){let l;s(t,tl,t=>n(3,l=t));let i,{params:r={}}=e;function a(t){confirm(`Are you sure you want to delete "${t}"?`)&&(delete l[t],tl.set(l),St("/level-builder/blocks/new"))}let o,c,u;return t.$$set=t=>{"params"in t&&n(6,r=t.params)},t.$$.update=()=>{64&t.$$.dirty&&n(13,o=decodeURIComponent(r.name)||"new"),8192&t.$$.dirty&&("new"==o?n(0,i={name:"",solid:!0,throwOnTouch:!1,dps:0}):function(t){l.hasOwnProperty(t)&&n(0,i=JSON.parse(JSON.stringify(l[t])))}(o)),8192&t.$$.dirty&&n(1,c="new"==o),9&t.$$.dirty&&n(2,u=null!=i&&!Qe.equals(i,l[i.name]))},[i,c,u,l,function(){Qe.empty(i.name)?document.getElementById("name").focus():(f(tl,l[i.name]=JSON.parse(JSON.stringify(i)),l),St("/level-builder/blocks/"+encodeURIComponent(i.name)))},a,r,function(t){i.name=t,n(0,i)},function(t){i.graphic=t,n(0,i)},function(t){i.solid=t,n(0,i)},function(t){i.throwOnTouch=t,n(0,i)},function(t){i.dps=t,n(0,i)},()=>a(i.name)]}class fl extends $t{constructor(t){super(),mt(this,t,pl,ul,a,{params:6})}}var ml=Te("characters",{});function $l(t){let e;return{c(){e=y("Name")},m(t,n){$(t,e,n)},d(t){t&&h(e)}}}function hl(t){let e;return{c(){e=y("Standing still graphic")},m(t,n){$(t,e,n)},d(t){t&&h(e)}}}function gl(t){let e;return{c(){e=y("Spinning graphic")},m(t,n){$(t,e,n)},d(t){t&&h(e)}}}function vl(t){let e;return{c(){e=y("Max velocity")},m(t,n){$(t,e,n)},d(t){t&&h(e)}}}function bl(t){let e;return{c(){e=y("Jump velocity")},m(t,n){$(t,e,n)},d(t){t&&h(e)}}}function yl(t){let e;return{c(){e=y("Gravity multiplier")},m(t,n){$(t,e,n)},d(t){t&&h(e)}}}function xl(t){let e;return{c(){e=y("Fall damage multiplier")},m(t,n){$(t,e,n)},d(t){t&&h(e)}}}function wl(t){let e;return{c(){e=y("Max health")},m(t,n){$(t,e,n)},d(t){t&&h(e)}}}function kl(t){let e;return{c(){e=y("DPS (when in contact with enemies - we will replace this with abilities later)")},m(t,n){$(t,e,n)},d(t){t&&h(e)}}}function ql(t){let e;return{c(){e=y("Can fly?")},m(t,n){$(t,e,n)},d(t){t&&h(e)}}}function Sl(e){let n,l,i;return{c(){n=v("button"),n.textContent="Delete",S(n,"type","button"),S(n,"class","btn btn-danger")},m(t,r){$(t,n,r),l||(i=k(n,"click",e[18]),l=!0)},p:t,d(t){t&&h(n),l=!1,i()}}}function Cl(t){let e,n=!t[1]&&Sl(t);return{c(){e=v("span"),n&&n.c(),S(e,"slot","buttons")},m(t,l){$(t,e,l),n&&n.m(e,null)},p(t,l){t[1]?n&&(n.d(1),n=null):n?n.p(t,l):(n=Sl(t),n.c(),n.m(e,null))},d(t){t&&h(e),n&&n.d()}}}function Nl(t){let e,n,l,i,r,a,o,s,c,u,d,p,f,m,g,v,b,y,w,k,q,S,C,N,M,O,j,E,D,I,R;function H(e){t[8].call(null,e)}let T={name:"name",autofocus:!0,$$slots:{default:[$l]},$$scope:{ctx:t}};function L(e){t[9].call(null,e)}void 0!==t[0].name&&(T.value=t[0].name),e=new Ce({props:T}),J.push(()=>ut(e,"value",H));let A={filter:t[4],$$slots:{default:[hl]},$$scope:{ctx:t}};function P(e){t[10].call(null,e)}void 0!==t[0].graphicStill&&(A.value=t[0].graphicStill),i=new Un({props:A}),J.push(()=>ut(i,"value",L));let V={filter:t[4],spin:!0,$$slots:{default:[gl]},$$scope:{ctx:t}};function _(e){t[11].call(null,e)}void 0!==t[0].graphicSpinning&&(V.value=t[0].graphicSpinning),o=new Un({props:V}),J.push(()=>ut(o,"value",P));let Y={name:"maxVelocity",min:0,$$slots:{default:[vl]},$$scope:{ctx:t}};function B(e){t[12].call(null,e)}void 0!==t[0].maxVelocity&&(Y.value=t[0].maxVelocity),u=new Zn({props:Y}),J.push(()=>ut(u,"value",_));let F={name:"jumpVelocity",min:0,$$slots:{default:[bl]},$$scope:{ctx:t}};function z(e){t[13].call(null,e)}void 0!==t[0].jumpVelocity&&(F.value=t[0].jumpVelocity),f=new Zn({props:F}),J.push(()=>ut(f,"value",B));let U={name:"gravityMultiplier",min:0,max:2,step:.1,$$slots:{default:[yl]},$$scope:{ctx:t}};function K(e){t[14].call(null,e)}void 0!==t[0].gravityMultiplier&&(U.value=t[0].gravityMultiplier),v=new Zn({props:U}),J.push(()=>ut(v,"value",z));let X={name:"fallDamageMultiplier",min:0,max:1,step:.1,$$slots:{default:[xl]},$$scope:{ctx:t}};function G(e){t[15].call(null,e)}void 0!==t[0].fallDamageMultiplier&&(X.value=t[0].fallDamageMultiplier),w=new Zn({props:X}),J.push(()=>ut(w,"value",K));let Q={name:"maxHealth",$$slots:{default:[wl]},$$scope:{ctx:t}};function Z(e){t[16].call(null,e)}void 0!==t[0].maxHealth&&(Q.value=t[0].maxHealth),S=new Zn({props:Q}),J.push(()=>ut(S,"value",G));let tt={name:"dps",$$slots:{default:[kl]},$$scope:{ctx:t}};function et(e){t[17].call(null,e)}void 0!==t[0].dps&&(tt.value=t[0].dps),M=new Zn({props:tt}),J.push(()=>ut(M,"value",Z));let nt={name:"canFly",$$slots:{default:[ql]},$$scope:{ctx:t}};return void 0!==t[0].canFly&&(nt.checked=t[0].canFly),E=new Xn({props:nt}),J.push(()=>ut(E,"checked",et)),{c(){dt(e.$$.fragment),l=x(),dt(i.$$.fragment),a=x(),dt(o.$$.fragment),c=x(),dt(u.$$.fragment),p=x(),dt(f.$$.fragment),g=x(),dt(v.$$.fragment),y=x(),dt(w.$$.fragment),q=x(),dt(S.$$.fragment),N=x(),dt(M.$$.fragment),j=x(),dt(E.$$.fragment),I=x()},m(t,n){pt(e,t,n),$(t,l,n),pt(i,t,n),$(t,a,n),pt(o,t,n),$(t,c,n),pt(u,t,n),$(t,p,n),pt(f,t,n),$(t,g,n),pt(v,t,n),$(t,y,n),pt(w,t,n),$(t,q,n),pt(S,t,n),$(t,N,n),pt(M,t,n),$(t,j,n),pt(E,t,n),$(t,I,n),R=!0},p(t,l){const a={};4194304&l&&(a.$$scope={dirty:l,ctx:t}),!n&&1&l&&(n=!0,a.value=t[0].name,W(()=>n=!1)),e.$set(a);const c={};4194304&l&&(c.$$scope={dirty:l,ctx:t}),!r&&1&l&&(r=!0,c.value=t[0].graphicStill,W(()=>r=!1)),i.$set(c);const p={};4194304&l&&(p.$$scope={dirty:l,ctx:t}),!s&&1&l&&(s=!0,p.value=t[0].graphicSpinning,W(()=>s=!1)),o.$set(p);const $={};4194304&l&&($.$$scope={dirty:l,ctx:t}),!d&&1&l&&(d=!0,$.value=t[0].maxVelocity,W(()=>d=!1)),u.$set($);const h={};4194304&l&&(h.$$scope={dirty:l,ctx:t}),!m&&1&l&&(m=!0,h.value=t[0].jumpVelocity,W(()=>m=!1)),f.$set(h);const g={};4194304&l&&(g.$$scope={dirty:l,ctx:t}),!b&&1&l&&(b=!0,g.value=t[0].gravityMultiplier,W(()=>b=!1)),v.$set(g);const y={};4194304&l&&(y.$$scope={dirty:l,ctx:t}),!k&&1&l&&(k=!0,y.value=t[0].fallDamageMultiplier,W(()=>k=!1)),w.$set(y);const x={};4194304&l&&(x.$$scope={dirty:l,ctx:t}),!C&&1&l&&(C=!0,x.value=t[0].maxHealth,W(()=>C=!1)),S.$set(x);const q={};4194304&l&&(q.$$scope={dirty:l,ctx:t}),!O&&1&l&&(O=!0,q.value=t[0].dps,W(()=>O=!1)),M.$set(q);const N={};4194304&l&&(N.$$scope={dirty:l,ctx:t}),!D&&1&l&&(D=!0,N.checked=t[0].canFly,W(()=>D=!1)),E.$set(N)},i(t){R||(it(e.$$.fragment,t),it(i.$$.fragment,t),it(o.$$.fragment,t),it(u.$$.fragment,t),it(f.$$.fragment,t),it(v.$$.fragment,t),it(w.$$.fragment,t),it(S.$$.fragment,t),it(M.$$.fragment,t),it(E.$$.fragment,t),R=!0)},o(t){rt(e.$$.fragment,t),rt(i.$$.fragment,t),rt(o.$$.fragment,t),rt(u.$$.fragment,t),rt(f.$$.fragment,t),rt(v.$$.fragment,t),rt(w.$$.fragment,t),rt(S.$$.fragment,t),rt(M.$$.fragment,t),rt(E.$$.fragment,t),R=!1},d(t){ft(e,t),t&&h(l),ft(i,t),t&&h(a),ft(o,t),t&&h(c),ft(u,t),t&&h(p),ft(f,t),t&&h(g),ft(v,t),t&&h(y),ft(w,t),t&&h(q),ft(S,t),t&&h(N),ft(M,t),t&&h(j),ft(E,t),t&&h(I)}}}function Ml(t){let e,n;return e=new Re({props:{hasChanges:t[2],$$slots:{default:[Nl],buttons:[Cl]},$$scope:{ctx:t}}}),e.$on("submit",t[5]),{c(){dt(e.$$.fragment)},m(t,l){pt(e,t,l),n=!0},p(t,n){const l={};4&n&&(l.hasChanges=t[2]),4194307&n&&(l.$$scope={dirty:n,ctx:t}),e.$set(l)},i(t){n||(it(e.$$.fragment,t),n=!0)},o(t){rt(e.$$.fragment,t),n=!1},d(t){ft(e,t)}}}function Ol(t){let e,n;return e=new Ge({props:{tab:"characters",activeName:t[0].name,store:t[3],$$slots:{default:[Ml]},$$scope:{ctx:t}}}),{c(){dt(e.$$.fragment)},m(t,l){pt(e,t,l),n=!0},p(t,[n]){const l={};1&n&&(l.activeName=t[0].name),8&n&&(l.store=t[3]),4194311&n&&(l.$$scope={dirty:n,ctx:t}),e.$set(l)},i(t){n||(it(e.$$.fragment,t),n=!0)},o(t){rt(e.$$.fragment,t),n=!1},d(t){ft(e,t)}}}function jl(t,e,n){let l;s(t,ml,t=>n(3,l=t));let i,{params:r={}}=e;function a(t){confirm(`Are you sure you want to delete "${t}"?`)&&(delete l[t],ml.set(l),St("/level-builder/characters/new"))}let o,c,u;return t.$$set=t=>{"params"in t&&n(7,r=t.params)},t.$$.update=()=>{128&t.$$.dirty&&n(19,o=decodeURIComponent(r.name)||"new"),524288&t.$$.dirty&&("new"==o?n(0,i={graphicStill:null,graphicSpinning:null,name:"",maxHealth:100,maxVelocity:20,jumpVelocity:15,gravityMultiplier:1,fallDamageMultiplier:1,dps:120}):function(t){l.hasOwnProperty(t)&&n(0,i=JSON.parse(JSON.stringify(l[t])))}(o)),524288&t.$$.dirty&&n(1,c="new"==o),9&t.$$.dirty&&n(2,u=null!=i&&!Qe.equals(i,l[i.name]))},[i,c,u,l,t=>20!=t.width||20!=t.height,function(){Qe.empty(i.name)?document.getElementById("name").focus():(f(ml,l[i.name]=JSON.parse(JSON.stringify(i)),l),St("/level-builder/characters/"+encodeURIComponent(i.name)))},a,r,function(t){i.name=t,n(0,i)},function(t){i.graphicStill=t,n(0,i)},function(t){i.graphicSpinning=t,n(0,i)},function(t){i.maxVelocity=t,n(0,i)},function(t){i.jumpVelocity=t,n(0,i)},function(t){i.gravityMultiplier=t,n(0,i)},function(t){i.fallDamageMultiplier=t,n(0,i)},function(t){i.maxHealth=t,n(0,i)},function(t){i.dps=t,n(0,i)},function(t){i.canFly=t,n(0,i)},()=>a(i.name)]}class El extends $t{constructor(t){super(),mt(this,t,jl,Ol,a,{params:7})}}var Dl=Te("enemies",{});function Il(t){let e;return{c(){e=y("Name")},m(t,n){$(t,e,n)},d(t){t&&h(e)}}}function Rl(t){let e;return{c(){e=y("Standing still graphic")},m(t,n){$(t,e,n)},d(t){t&&h(e)}}}function Hl(t){let e;return{c(){e=y("Max velocity")},m(t,n){$(t,e,n)},d(t){t&&h(e)}}}function Tl(t){let e;return{c(){e=y("Jump velocity")},m(t,n){$(t,e,n)},d(t){t&&h(e)}}}function Ll(t){let e;return{c(){e=y("Gravity multiplier")},m(t,n){$(t,e,n)},d(t){t&&h(e)}}}function Al(t){let e;return{c(){e=y("Fall damage multiplier")},m(t,n){$(t,e,n)},d(t){t&&h(e)}}}function Pl(t){let e;return{c(){e=y("Max health")},m(t,n){$(t,e,n)},d(t){t&&h(e)}}}function Vl(t){let e;return{c(){e=y("Score (How many points you get when this enemy dies)")},m(t,n){$(t,e,n)},d(t){t&&h(e)}}}function Jl(t){let e;return{c(){e=y("DPS (when in contact with player - we will replace this with abilities later)")},m(t,n){$(t,e,n)},d(t){t&&h(e)}}}function _l(e){let n,l,i;return{c(){n=v("button"),n.textContent="Delete",S(n,"type","button"),S(n,"class","btn btn-danger")},m(t,r){$(t,n,r),l||(i=k(n,"click",e[16]),l=!0)},p:t,d(t){t&&h(n),l=!1,i()}}}function Yl(t){let e,n=!t[1]&&_l(t);return{c(){e=v("span"),n&&n.c(),S(e,"slot","buttons")},m(t,l){$(t,e,l),n&&n.m(e,null)},p(t,l){t[1]?n&&(n.d(1),n=null):n?n.p(t,l):(n=_l(t),n.c(),n.m(e,null))},d(t){t&&h(e),n&&n.d()}}}function Bl(t){let e,n,l,i,r,a,o,s,c,u,d,p,f,m,g,v,b,y,w,k,q,S,C,N,M,O,j,E;function D(e){t[7].call(null,e)}let I={name:"name",autofocus:!0,$$slots:{default:[Il]},$$scope:{ctx:t}};function R(e){t[8].call(null,e)}void 0!==t[0].name&&(I.value=t[0].name),e=new Ce({props:I}),J.push(()=>ut(e,"value",D));let H={filter:Ul,$$slots:{default:[Rl]},$$scope:{ctx:t}};function T(e){t[9].call(null,e)}void 0!==t[0].graphicStill&&(H.value=t[0].graphicStill),i=new Un({props:H}),J.push(()=>ut(i,"value",R));let L={name:"maxVelocity",min:0,$$slots:{default:[Hl]},$$scope:{ctx:t}};function A(e){t[10].call(null,e)}void 0!==t[0].maxVelocity&&(L.value=t[0].maxVelocity),o=new Zn({props:L}),J.push(()=>ut(o,"value",T));let P={name:"jumpVelocity",min:0,$$slots:{default:[Tl]},$$scope:{ctx:t}};function V(e){t[11].call(null,e)}void 0!==t[0].jumpVelocity&&(P.value=t[0].jumpVelocity),u=new Zn({props:P}),J.push(()=>ut(u,"value",A));let _={name:"gravityMultiplier",min:0,max:2,step:.1,$$slots:{default:[Ll]},$$scope:{ctx:t}};function Y(e){t[12].call(null,e)}void 0!==t[0].gravityMultiplier&&(_.value=t[0].gravityMultiplier),f=new Zn({props:_}),J.push(()=>ut(f,"value",V));let B={name:"fallDamageMultiplier",min:0,max:1,step:.1,$$slots:{default:[Al]},$$scope:{ctx:t}};function F(e){t[13].call(null,e)}void 0!==t[0].fallDamageMultiplier&&(B.value=t[0].fallDamageMultiplier),v=new Zn({props:B}),J.push(()=>ut(v,"value",Y));let z={name:"maxHealth",$$slots:{default:[Pl]},$$scope:{ctx:t}};function U(e){t[14].call(null,e)}void 0!==t[0].maxHealth&&(z.value=t[0].maxHealth),w=new Zn({props:z}),J.push(()=>ut(w,"value",F));let K={name:"score",$$slots:{default:[Vl]},$$scope:{ctx:t}};function X(e){t[15].call(null,e)}void 0!==t[0].score&&(K.value=t[0].score),S=new Zn({props:K}),J.push(()=>ut(S,"value",U));let G={name:"dps",$$slots:{default:[Jl]},$$scope:{ctx:t}};return void 0!==t[0].dps&&(G.value=t[0].dps),M=new Zn({props:G}),J.push(()=>ut(M,"value",X)),{c(){dt(e.$$.fragment),l=x(),dt(i.$$.fragment),a=x(),dt(o.$$.fragment),c=x(),dt(u.$$.fragment),p=x(),dt(f.$$.fragment),g=x(),dt(v.$$.fragment),y=x(),dt(w.$$.fragment),q=x(),dt(S.$$.fragment),N=x(),dt(M.$$.fragment),j=x()},m(t,n){pt(e,t,n),$(t,l,n),pt(i,t,n),$(t,a,n),pt(o,t,n),$(t,c,n),pt(u,t,n),$(t,p,n),pt(f,t,n),$(t,g,n),pt(v,t,n),$(t,y,n),pt(w,t,n),$(t,q,n),pt(S,t,n),$(t,N,n),pt(M,t,n),$(t,j,n),E=!0},p(t,l){const a={};1048576&l&&(a.$$scope={dirty:l,ctx:t}),!n&&1&l&&(n=!0,a.value=t[0].name,W(()=>n=!1)),e.$set(a);const c={};1048576&l&&(c.$$scope={dirty:l,ctx:t}),!r&&1&l&&(r=!0,c.value=t[0].graphicStill,W(()=>r=!1)),i.$set(c);const p={};1048576&l&&(p.$$scope={dirty:l,ctx:t}),!s&&1&l&&(s=!0,p.value=t[0].maxVelocity,W(()=>s=!1)),o.$set(p);const $={};1048576&l&&($.$$scope={dirty:l,ctx:t}),!d&&1&l&&(d=!0,$.value=t[0].jumpVelocity,W(()=>d=!1)),u.$set($);const h={};1048576&l&&(h.$$scope={dirty:l,ctx:t}),!m&&1&l&&(m=!0,h.value=t[0].gravityMultiplier,W(()=>m=!1)),f.$set(h);const g={};1048576&l&&(g.$$scope={dirty:l,ctx:t}),!b&&1&l&&(b=!0,g.value=t[0].fallDamageMultiplier,W(()=>b=!1)),v.$set(g);const y={};1048576&l&&(y.$$scope={dirty:l,ctx:t}),!k&&1&l&&(k=!0,y.value=t[0].maxHealth,W(()=>k=!1)),w.$set(y);const x={};1048576&l&&(x.$$scope={dirty:l,ctx:t}),!C&&1&l&&(C=!0,x.value=t[0].score,W(()=>C=!1)),S.$set(x);const q={};1048576&l&&(q.$$scope={dirty:l,ctx:t}),!O&&1&l&&(O=!0,q.value=t[0].dps,W(()=>O=!1)),M.$set(q)},i(t){E||(it(e.$$.fragment,t),it(i.$$.fragment,t),it(o.$$.fragment,t),it(u.$$.fragment,t),it(f.$$.fragment,t),it(v.$$.fragment,t),it(w.$$.fragment,t),it(S.$$.fragment,t),it(M.$$.fragment,t),E=!0)},o(t){rt(e.$$.fragment,t),rt(i.$$.fragment,t),rt(o.$$.fragment,t),rt(u.$$.fragment,t),rt(f.$$.fragment,t),rt(v.$$.fragment,t),rt(w.$$.fragment,t),rt(S.$$.fragment,t),rt(M.$$.fragment,t),E=!1},d(t){ft(e,t),t&&h(l),ft(i,t),t&&h(a),ft(o,t),t&&h(c),ft(u,t),t&&h(p),ft(f,t),t&&h(g),ft(v,t),t&&h(y),ft(w,t),t&&h(q),ft(S,t),t&&h(N),ft(M,t),t&&h(j)}}}function Fl(t){let e,n;return e=new Re({props:{hasChanges:t[2],$$slots:{default:[Bl],buttons:[Yl]},$$scope:{ctx:t}}}),e.$on("submit",t[4]),{c(){dt(e.$$.fragment)},m(t,l){pt(e,t,l),n=!0},p(t,n){const l={};4&n&&(l.hasChanges=t[2]),1048579&n&&(l.$$scope={dirty:n,ctx:t}),e.$set(l)},i(t){n||(it(e.$$.fragment,t),n=!0)},o(t){rt(e.$$.fragment,t),n=!1},d(t){ft(e,t)}}}function zl(t){let e,n;return e=new Ge({props:{tab:"enemies",activeName:t[0].name,store:t[3],$$slots:{default:[Fl]},$$scope:{ctx:t}}}),{c(){dt(e.$$.fragment)},m(t,l){pt(e,t,l),n=!0},p(t,[n]){const l={};1&n&&(l.activeName=t[0].name),8&n&&(l.store=t[3]),1048583&n&&(l.$$scope={dirty:n,ctx:t}),e.$set(l)},i(t){n||(it(e.$$.fragment,t),n=!0)},o(t){rt(e.$$.fragment,t),n=!1},d(t){ft(e,t)}}}const Ul=t=>20!=t.width||20!=t.height;function Kl(t,e,n){let l;s(t,Dl,t=>n(3,l=t));let i,{params:r={}}=e;function a(t){confirm(`Are you sure you want to delete "${t}"?`)&&(delete l[t],Dl.set(l),St("/level-builder/enemies/new"))}let o,c,u;return t.$$set=t=>{"params"in t&&n(6,r=t.params)},t.$$.update=()=>{64&t.$$.dirty&&n(17,o=decodeURIComponent(r.name)||"new"),131072&t.$$.dirty&&("new"==o?n(0,i={graphicStill:null,name:"",maxHealth:100,maxVelocity:20,jumpVelocity:15,gravityMultiplier:1,fallDamageMultiplier:1,dps:120,score:1}):function(t){l.hasOwnProperty(t)&&n(0,i=JSON.parse(JSON.stringify(l[t])))}(o)),131072&t.$$.dirty&&n(1,c="new"==o),9&t.$$.dirty&&n(2,u=null!=i&&!Qe.equals(i,l[i.name]))},[i,c,u,l,function(){Qe.empty(i.name)?document.getElementById("name").focus():(f(Dl,l[i.name]=JSON.parse(JSON.stringify(i)),l),St("/level-builder/enemies/"+encodeURIComponent(i.name)))},a,r,function(t){i.name=t,n(0,i)},function(t){i.graphicStill=t,n(0,i)},function(t){i.maxVelocity=t,n(0,i)},function(t){i.jumpVelocity=t,n(0,i)},function(t){i.gravityMultiplier=t,n(0,i)},function(t){i.fallDamageMultiplier=t,n(0,i)},function(t){i.maxHealth=t,n(0,i)},function(t){i.score=t,n(0,i)},function(t){i.dps=t,n(0,i)},()=>a(i.name)]}class Wl extends $t{constructor(t){super(),mt(this,t,Kl,zl,a,{params:6})}}function Xl(t){let e,n,l,i,r=t[7].value+"";return e=new Je({props:{name:t[2][t[7].value].graphicStill}}),{c(){dt(e.$$.fragment),n=x(),l=y(r)},m(t,r){pt(e,t,r),$(t,n,r),$(t,l,r),i=!0},p(t,n){const a={};132&n&&(a.name=t[2][t[7].value].graphicStill),e.$set(a),(!i||128&n)&&r!==(r=t[7].value+"")&&M(l,r)},i(t){i||(it(e.$$.fragment,t),i=!0)},o(t){rt(e.$$.fragment,t),i=!1},d(t){ft(e,t),t&&h(n),t&&h(l)}}}function Gl(t){let e,n,l,i,r,a,o;const s=t[3].default,u=c(s,t,t[5],null),p=u||function(t){let e;return{c(){e=y("Characters")},m(t,n){$(t,e,n)},d(t){t&&h(e)}}}();function f(e){t[4].call(null,e)}let g={multiple:!0,options:t[1],inline:!0,filterable:t[1].length>2,$$slots:{default:[Xl,({option:t})=>({7:t}),({option:t})=>t?128:0]},$$scope:{ctx:t}};return void 0!==t[0]&&(g.value=t[0]),r=new _n({props:g}),J.push(()=>ut(r,"value",f)),{c(){e=v("div"),n=v("label"),p&&p.c(),l=x(),i=v("div"),dt(r.$$.fragment),S(n,"for","graphic"),S(e,"class","form-group svelte-1773jdu")},m(t,a){$(t,e,a),m(e,n),p&&p.m(n,null),m(e,l),m(e,i),pt(r,i,null),o=!0},p(t,[e]){u&&u.p&&32&e&&d(u,s,t,t[5],e,null,null);const n={};2&e&&(n.options=t[1]),2&e&&(n.filterable=t[1].length>2),164&e&&(n.$$scope={dirty:e,ctx:t}),!a&&1&e&&(a=!0,n.value=t[0],W(()=>a=!1)),r.$set(n)},i(t){o||(it(p,t),it(r.$$.fragment,t),o=!0)},o(t){rt(p,t),rt(r.$$.fragment,t),o=!1},d(t){t&&h(e),p&&p.d(t),ft(r)}}}function Ql(t,e,n){let l;s(t,ml,t=>n(2,l=t));let i,{value:r=[]}=e,{$$slots:a={},$$scope:o}=e;return t.$$set=t=>{"value"in t&&n(0,r=t.value),"$$scope"in t&&n(5,o=t.$$scope)},t.$$.update=()=>{4&t.$$.dirty&&n(1,i=Object.keys(l))},[r,i,l,a,function(t){r=t,n(0,r)},o]}class Zl extends $t{constructor(t){super(),mt(this,t,Ql,Gl,a,{value:0})}}function ti(e){let n,l,i,r,a,o,s,c=e[0]>0?`(${e[2]}%)`:"I am dead.";return{c(){n=v("div"),l=v("div"),i=x(),r=v("div"),a=y(e[1]),o=x(),s=y(c),S(l,"class","filled svelte-1ofh1kv"),j(l,"width",e[2]+"%"),j(l,"background-color",e[3]),S(r,"class","text svelte-1ofh1kv"),S(n,"class","health-bar svelte-1ofh1kv")},m(t,e){$(t,n,e),m(n,l),m(n,i),m(n,r),m(r,a),m(r,o),m(r,s)},p(t,[e]){4&e&&j(l,"width",t[2]+"%"),8&e&&j(l,"background-color",t[3]),2&e&&M(a,t[1]),5&e&&c!==(c=t[0]>0?`(${t[2]}%)`:"I am dead.")&&M(s,c)},i:t,o:t,d(t){t&&h(n)}}}function ei(t,e,n){let l,i,r,{percent:a=100}=e,{health:o=100}=e,{maxHealth:s=100}=e;return t.$$set=t=>{"percent"in t&&n(4,a=t.percent),"health"in t&&n(0,o=t.health),"maxHealth"in t&&n(5,s=t.maxHealth)},t.$$.update=()=>{1&t.$$.dirty&&n(1,l=o>0?Math.round(o):0),33&t.$$.dirty&&n(4,a=Math.round(o/s*100,2)),16&t.$$.dirty&&n(2,i=a>0?a:0),16&t.$$.dirty&&n(3,r=a>75?"rgba(24, 197, 33, 0.5)":a>25?"rgba(245, 189, 36, 0.5)":"rgba(223, 22, 22, 0.5)")},[o,l,i,r,a,s]}class ni extends $t{constructor(t){super(),mt(this,t,ei,ti,a,{percent:4,health:0,maxHealth:5})}}function li(t){let e,n;return{c(){e=v("img"),S(e,"class","graphic drop-shadow svelte-1o14b8v"),e.src!==(n=t[6].png)&&S(e,"src",n),S(e,"alt",t[0]),j(e,"width",t[6].width*ri+"px"),j(e,"height",t[6].height*ri+"px"),j(e,"transform","scaleX("+t[5]+") rotate("+t[7]+"deg)"),E(e,"dead",t[4]<=0)},m(t,n){$(t,e,n)},p(t,l){64&l&&e.src!==(n=t[6].png)&&S(e,"src",n),1&l&&S(e,"alt",t[0]),64&l&&j(e,"width",t[6].width*ri+"px"),64&l&&j(e,"height",t[6].height*ri+"px"),160&l&&j(e,"transform","scaleX("+t[5]+") rotate("+t[7]+"deg)"),16&l&&E(e,"dead",t[4]<=0)},d(t){t&&h(e)}}}function ii(t){let e,n,l,i;n=new ni({props:{health:t[4],maxHealth:t[1]}});let r=null!=t[6]&&li(t);return{c(){e=v("div"),dt(n.$$.fragment),l=x(),r&&r.c(),S(e,"class","player svelte-1o14b8v"),j(e,"left",t[3]+"px"),j(e,"bottom",t[2]+"px")},m(t,a){$(t,e,a),pt(n,e,null),m(e,l),r&&r.m(e,null),i=!0},p(t,[l]){const a={};16&l&&(a.health=t[4]),2&l&&(a.maxHealth=t[1]),n.$set(a),null!=t[6]?r?r.p(t,l):(r=li(t),r.c(),r.m(e,null)):r&&(r.d(1),r=null),(!i||8&l)&&j(e,"left",t[3]+"px"),(!i||4&l)&&j(e,"bottom",t[2]+"px")},i(t){i||(it(n.$$.fragment,t),i=!0)},o(t){rt(n.$$.fragment,t),i=!1},d(t){t&&h(e),ft(n),r&&r.d()}}}const ri=2;function ai(t,e,n){let l;s(t,Le,t=>n(15,l=t));let i,r,{name:a}=e,{maxHealth:o}=e,{graphicStill:c}=e,{graphicSpinning:u}=e,{vx:d=0}=e,{vy:p=0}=e,{y:f=0}=e,{x:m=0}=e,{health:$}=e,{spinning:h=!1}=e,g=1,v=0,b=null;return t.$$set=t=>{"name"in t&&n(0,a=t.name),"maxHealth"in t&&n(1,o=t.maxHealth),"graphicStill"in t&&n(8,c=t.graphicStill),"graphicSpinning"in t&&n(9,u=t.graphicSpinning),"vx"in t&&n(10,d=t.vx),"vy"in t&&n(11,p=t.vy),"y"in t&&n(2,f=t.y),"x"in t&&n(3,m=t.x),"health"in t&&n(4,$=t.health),"spinning"in t&&n(12,h=t.spinning)},t.$$.update=()=>{37632&t.$$.dirty&&n(6,i=h&&null!=u?l[u]:null!=c?l[c]:null),1024&t.$$.dirty&&0!=d&&n(5,g=d>0?1:-1),28672&t.$$.dirty&&(h?n(14,b=setTimeout(()=>{n(13,v+=30)},25)):clearTimeout(b)),14336&t.$$.dirty&&n(7,r=h?v:-1*(5+(p>0?3*p:1.5*p)))},[a,o,f,m,$,g,i,r,c,u,d,p,h]}class oi extends $t{constructor(t){super(),mt(this,t,ai,ii,a,{name:0,maxHealth:1,graphicStill:8,graphicSpinning:9,vx:10,vy:11,y:2,x:3,health:4,spinning:12})}}function si(e){let n;return{c(){n=v("canvas"),S(n,"width",e[0]),S(n,"height",e[1]),S(n,"class","svelte-q52jml")},m(t,l){$(t,n,l),e[6](n)},p(t,[e]){1&e&&S(n,"width",t[0]),2&e&&S(n,"height",t[1])},i:t,o:t,d(t){t&&h(n),e[6](null)}}}function ci(t,e,n){let l,i,r;s(t,tl,t=>n(9,l=t)),s(t,Dl,t=>n(10,i=t)),s(t,Le,t=>n(11,r=t));let{width:a=0}=e,{height:o=0}=e,{blocks:c=[]}=e,{enemies:u=null}=e,{playing:d=!1}=e;const p=A(),f={};let m,$;function h(t,e,n){let l=r[t],i=l.png,a=f[t];const s=()=>{const t=()=>$.drawImage(a,e,o-n-2*l.height);d?setTimeout(t,100):t()};if(null==a&&(a=new Image,a.src=i,f[t]=a),a.complete)s();else{const t=a.onload;a.onload=()=>{"function"==typeof t&&t(),s()}}}return t.$$set=t=>{"width"in t&&n(0,a=t.width),"height"in t&&n(1,o=t.height),"blocks"in t&&n(3,c=t.blocks),"enemies"in t&&n(4,u=t.enemies),"playing"in t&&n(5,d=t.playing)},t.$$.update=()=>{4&t.$$.dirty&&null!=m&&n(8,$=m.getContext("2d")),1823&t.$$.dirty&&null!=c&&null!=a&&null!=o&&null!=$&&($.clearRect(0,0,a,o),c.forEach(t=>h(l[t.name].graphic,t.x,t.y)),null!=u&&u.forEach(t=>h(i[t.name].graphicStill,t.x,t.y)),p("draw",m))},[a,o,m,c,u,d,function(t){J[t?"unshift":"push"](()=>{m=t,n(2,m)})}]}class ui extends $t{constructor(t){super(),mt(this,t,ci,si,a,{width:0,height:1,blocks:3,enemies:4,playing:5})}}function di(t){let e,n,l,r;return{c(){e=v("img"),e.src!==(n=t[0].thumbnail)&&S(e,"src",n),S(e,"alt","level preview"),S(e,"class","level-preview svelte-10ex0b8"),j(e,"background",t[0].background),E(e,"grabbing",t[1])},m(n,i){$(n,e,i),l||(r=[k(e,"mousedown",q(t[2])),k(e,"mousemove",q(t[4])),k(e,"mouseup",q(t[3]))],l=!0)},p(t,l){1&l&&e.src!==(n=t[0].thumbnail)&&S(e,"src",n),1&l&&j(e,"background",t[0].background),2&l&&E(e,"grabbing",t[1])},d(t){t&&h(e),l=!1,i(r)}}}function pi(e){let n,l=e[0]&&di(e);return{c(){l&&l.c(),n=w()},m(t,e){l&&l.m(t,e),$(t,n,e)},p(t,[e]){t[0]?l?l.p(t,e):(l=di(t),l.c(),l.m(n.parentNode,n)):l&&(l.d(1),l=null)},i:t,o:t,d(t){l&&l.d(t),t&&h(n)}}}function fi(t,e,n){let{level:l}=e;const i=A();let r=!1;return t.$$set=t=>{"level"in t&&n(0,l=t.level)},[l,r,function(t){n(1,r=!0)},function(t){n(1,r=!1)},function(t){r&&i("pan",t.offsetX)}]}class mi extends $t{constructor(t){super(),mt(this,t,fi,pi,a,{level:0})}}function $i(t){let e,n,l,i,r,a,o,s,c=t[35].name+"",u=t[35].dps+"",d=t[35].solid?"solid":"background";return e=new Je({props:{name:t[9][t[35].name].graphic,height:"40"}}),{c(){dt(e.$$.fragment),n=x(),l=y(c),i=y(": "),r=y(u),a=y(" dps, "),o=y(d)},m(t,c){pt(e,t,c),$(t,n,c),$(t,l,c),$(t,i,c),$(t,r,c),$(t,a,c),$(t,o,c),s=!0},p(t,n){const i={};512&n[0]|16&n[1]&&(i.name=t[9][t[35].name].graphic),e.$set(i),(!s||16&n[1])&&c!==(c=t[35].name+"")&&M(l,c),(!s||16&n[1])&&u!==(u=t[35].dps+"")&&M(r,u),(!s||16&n[1])&&d!==(d=t[35].solid?"solid":"background")&&M(o,d)},i(t){s||(it(e.$$.fragment,t),s=!0)},o(t){rt(e.$$.fragment,t),s=!1},d(t){ft(e,t),t&&h(n),t&&h(l),t&&h(i),t&&h(r),t&&h(a),t&&h(o)}}}function hi(t){let e,n,l,i,r,a,o,s,c,u,d,p,f=t[35].name+"",g=t[35].dps+"",b=t[35].maxVelocity+"",w=t[35].score+"";return e=new Je({props:{name:t[10][t[35].name].graphicStill,height:"40"}}),{c(){dt(e.$$.fragment),n=x(),l=v("strong"),i=y(f),r=x(),a=y(g),o=y(" dps, "),s=y(b),c=y(" max velocity, worth "),u=y(w),d=y(" score")},m(t,f){pt(e,t,f),$(t,n,f),$(t,l,f),m(l,i),$(t,r,f),$(t,a,f),$(t,o,f),$(t,s,f),$(t,c,f),$(t,u,f),$(t,d,f),p=!0},p(t,n){const l={};1024&n[0]|16&n[1]&&(l.name=t[10][t[35].name].graphicStill),e.$set(l),(!p||16&n[1])&&f!==(f=t[35].name+"")&&M(i,f),(!p||16&n[1])&&g!==(g=t[35].dps+"")&&M(a,g),(!p||16&n[1])&&b!==(b=t[35].maxVelocity+"")&&M(s,b),(!p||16&n[1])&&w!==(w=t[35].score+"")&&M(u,w)},i(t){p||(it(e.$$.fragment,t),p=!0)},o(t){rt(e.$$.fragment,t),p=!1},d(t){ft(e,t),t&&h(n),t&&h(l),t&&h(r),t&&h(a),t&&h(o),t&&h(s),t&&h(c),t&&h(u),t&&h(d)}}}function gi(t){let e,n,l,r,a,o,s,c,u,d,p,f,g,b,y,w,C;function N(e){t[18].call(null,e)}n=new mi({props:{level:{background:t[3],thumbnail:t[0]}}}),n.$on("pan",t[12]);let M={name:"selected-block",inline:!0,placeholder:"Select a block to place",options:Object.keys(t[9]).map(t[17]),valueProp:"name",$$slots:{default:[$i,({option:t})=>({35:t}),({option:t})=>[0,t?16:0]]},$$scope:{ctx:t}};function O(e){t[21].call(null,e)}void 0!==t[4]&&(M.value=t[4]),o=new _n({props:M}),J.push(()=>ut(o,"value",N)),o.$on("change",t[19]);let E={name:"selected-block",inline:!0,placeholder:"Select an enemy to place",options:Object.keys(t[10]).map(t[20]),valueProp:"name",$$slots:{default:[hi,({option:t})=>({35:t}),({option:t})=>[0,t?16:0]]},$$scope:{ctx:t}};return void 0!==t[5]&&(E.value=t[5]),d=new _n({props:E}),J.push(()=>ut(d,"value",O)),d.$on("change",t[22]),b=new ui({props:{blocks:t[1],enemies:t[2],width:t[7],height:t[8]}}),b.$on("draw",t[11]),{c(){e=v("div"),dt(n.$$.fragment),l=x(),r=v("div"),a=v("div"),dt(o.$$.fragment),c=x(),u=v("div"),dt(d.$$.fragment),f=x(),g=v("div"),dt(b.$$.fragment),S(a,"class","svelte-1l9uq66"),S(u,"class","svelte-1l9uq66"),S(r,"class","tool-picker svelte-1l9uq66"),S(g,"class","level-container svelte-1l9uq66"),j(g,"background",t[3]),j(g,"height",t[8]+25+"px"),S(e,"class","drawing-tool svelte-1l9uq66")},m(i,s){$(i,e,s),pt(n,e,null),m(e,l),m(e,r),m(r,a),pt(o,a,null),m(r,c),m(r,u),pt(d,u,null),m(e,f),m(e,g),pt(b,g,null),t[23](g),y=!0,w||(C=[k(g,"mousedown",t[13]),k(g,"mouseup",t[15]),k(g,"mousemove",t[14]),k(g,"contextmenu",q(t[16]))],w=!0)},p(t,e){const l={};9&e[0]&&(l.level={background:t[3],thumbnail:t[0]}),n.$set(l);const i={};512&e[0]&&(i.options=Object.keys(t[9]).map(t[17])),512&e[0]|48&e[1]&&(i.$$scope={dirty:e,ctx:t}),!s&&16&e[0]&&(s=!0,i.value=t[4],W(()=>s=!1)),o.$set(i);const r={};1024&e[0]&&(r.options=Object.keys(t[10]).map(t[20])),1024&e[0]|48&e[1]&&(r.$$scope={dirty:e,ctx:t}),!p&&32&e[0]&&(p=!0,r.value=t[5],W(()=>p=!1)),d.$set(r);const a={};2&e[0]&&(a.blocks=t[1]),4&e[0]&&(a.enemies=t[2]),128&e[0]&&(a.width=t[7]),256&e[0]&&(a.height=t[8]),b.$set(a),(!y||8&e[0])&&j(g,"background",t[3]),(!y||256&e[0])&&j(g,"height",t[8]+25+"px")},i(t){y||(it(n.$$.fragment,t),it(o.$$.fragment,t),it(d.$$.fragment,t),it(b.$$.fragment,t),y=!0)},o(t){rt(n.$$.fragment,t),rt(o.$$.fragment,t),rt(d.$$.fragment,t),rt(b.$$.fragment,t),y=!1},d(l){l&&h(e),ft(n),ft(o),ft(d),ft(b),t[23](null),w=!1,i(C)}}}function vi(t,e,n){let l,i;s(t,tl,t=>n(9,l=t)),s(t,Dl,t=>n(10,i=t));let r,{background:a=null}=e,{thumbnail:o}=e,{blocks:c=[]}=e,{enemies:u=[]}=e,d=null,p=null,f=!1;function m(t){if(f){const{x:e,y:r}=$(t);!function(t,e){if(function(t,e){n(1,c=c.filter(n=>n.x!=t||n.y!=e)),n(2,u=u.filter(n=>n.x!=t||n.y!=e))}(t,e),null!=d){l[d];n(1,c=[...c,{name:d,x:t,y:e,width:40,height:40}])}else if(null!=p){const l=i[p];n(2,u=[...u,{name:p,x:t,y:e,width:l.width,height:l.height}])}}(e,r)}}function $(t){return{x:40*Math.floor(t.offsetX/40),y:40*Math.floor((h-t.offsetY)/40)}}let h,g,v;return t.$$set=t=>{"background"in t&&n(3,a=t.background),"thumbnail"in t&&n(0,o=t.thumbnail),"blocks"in t&&n(1,c=t.blocks),"enemies"in t&&n(2,u=t.enemies)},t.$$.update=()=>{2&t.$$.dirty[0]&&null!=c&&c.some(t=>null!=t.png)&&n(1,c=c.map(t=>{const{png:e,...n}=t;return n})),2&t.$$.dirty[0]&&n(25,g=c.length>0?Math.max(...c.map(t=>t.x+t.width)):0),33554432&t.$$.dirty[0]&&n(7,v=Math.max(800,g+500))},n(8,h=600),[o,c,u,a,d,p,r,v,h,l,i,function(t){const e=t.detail;n(0,o=function(t,e,n){const l=document.createElement("canvas");return l.width=e,l.height=n,l.getContext("2d").drawImage(t,0,0,e,n),l.toDataURL("image/png")}(e,v/8,h/8))},function(t){const e=8*t.detail,n=Math.max(e-r.clientWidth/2,0);r.scroll(n,0)},function(t){(t.altKey||0!==t.button)&&(n(4,d=function(t){const{x:e,y:n}=$(t),l=c.find(t=>t.x==e&&t.y==n);return null==l?null:l.name}(t)),n(5,p=function(t){const{x:e,y:n}=$(t),l=u.find(t=>t.x==e&&t.y==n);return null==l?null:l.name}(t))),f=0===t.button,m(t)},m,function(t){f=!1},function(e){P(t,e)},t=>l[t],function(t){d=t,n(4,d)},()=>n(5,p=null),t=>i[t],function(t){p=t,n(5,p)},()=>n(4,d=null),function(t){J[t?"unshift":"push"](()=>{r=t,n(6,r)})}]}class bi extends $t{constructor(t){super(),mt(this,t,vi,gi,a,{background:3,thumbnail:0,blocks:1,enemies:2},[-1,-1])}}var yi=Te("levels",{});function xi(t){let e,n;return e=new Ge({props:{tab:"levels",activeName:t[0].name,store:t[3],$$slots:{default:[Mi]},$$scope:{ctx:t}}}),{c(){dt(e.$$.fragment)},m(t,l){pt(e,t,l),n=!0},p(t,n){const l={};1&n&&(l.activeName=t[0].name),8&n&&(l.store=t[3]),65543&n&&(l.$$scope={dirty:n,ctx:t}),e.$set(l)},i(t){n||(it(e.$$.fragment,t),n=!0)},o(t){rt(e.$$.fragment,t),n=!1},d(t){ft(e,t)}}}function wi(t){let e;return{c(){e=y("Name")},m(t,n){$(t,e,n)},d(t){t&&h(e)}}}function ki(t){let e;return{c(){e=y("Which characters can play this level?")},m(t,n){$(t,e,n)},d(t){t&&h(e)}}}function qi(t){let e;return{c(){e=y("Background (any css background value)")},m(t,n){$(t,e,n)},d(t){t&&h(e)}}}function Si(e){let n,l,i;return{c(){n=v("button"),n.textContent="Delete",S(n,"type","button"),S(n,"class","btn btn-danger")},m(t,r){$(t,n,r),l||(i=k(n,"click",e[5]),l=!0)},p:t,d(t){t&&h(n),l=!1,i()}}}function Ci(t){let e,n=!t[1]&&Si(t);return{c(){e=v("span"),n&&n.c(),S(e,"slot","buttons")},m(t,l){$(t,e,l),n&&n.m(e,null)},p(t,l){t[1]?n&&(n.d(1),n=null):n?n.p(t,l):(n=Si(t),n.c(),n.m(e,null))},d(t){t&&h(e),n&&n.d()}}}function Ni(t){let e,n,l,i,r,a,o,s,c,u,d,p,f,m,g;function v(e){t[7].call(null,e)}let b={name:"name",autofocus:!0,$$slots:{default:[wi]},$$scope:{ctx:t}};function y(e){t[8].call(null,e)}void 0!==t[0].name&&(b.value=t[0].name),e=new Ce({props:b}),J.push(()=>ut(e,"value",v));let w={name:"playableCharacters",$$slots:{default:[ki]},$$scope:{ctx:t}};function k(e){t[9].call(null,e)}void 0!==t[0].playableCharacters&&(w.value=t[0].playableCharacters),i=new Zl({props:w}),J.push(()=>ut(i,"value",y));let q={name:"background",$$slots:{default:[qi]},$$scope:{ctx:t}};function S(e){t[10].call(null,e)}function C(e){t[11].call(null,e)}function N(e){t[12].call(null,e)}void 0!==t[0].background&&(q.value=t[0].background),o=new Ce({props:q}),J.push(()=>ut(o,"value",k));let M={background:t[0].background};return void 0!==t[0].thumbnail&&(M.thumbnail=t[0].thumbnail),void 0!==t[0].blocks&&(M.blocks=t[0].blocks),void 0!==t[0].enemies&&(M.enemies=t[0].enemies),u=new bi({props:M}),J.push(()=>ut(u,"thumbnail",S)),J.push(()=>ut(u,"blocks",C)),J.push(()=>ut(u,"enemies",N)),{c(){dt(e.$$.fragment),l=x(),dt(i.$$.fragment),a=x(),dt(o.$$.fragment),c=x(),dt(u.$$.fragment),m=x()},m(t,n){pt(e,t,n),$(t,l,n),pt(i,t,n),$(t,a,n),pt(o,t,n),$(t,c,n),pt(u,t,n),$(t,m,n),g=!0},p(t,l){const a={};65536&l&&(a.$$scope={dirty:l,ctx:t}),!n&&1&l&&(n=!0,a.value=t[0].name,W(()=>n=!1)),e.$set(a);const c={};65536&l&&(c.$$scope={dirty:l,ctx:t}),!r&&1&l&&(r=!0,c.value=t[0].playableCharacters,W(()=>r=!1)),i.$set(c);const m={};65536&l&&(m.$$scope={dirty:l,ctx:t}),!s&&1&l&&(s=!0,m.value=t[0].background,W(()=>s=!1)),o.$set(m);const $={};1&l&&($.background=t[0].background),!d&&1&l&&(d=!0,$.thumbnail=t[0].thumbnail,W(()=>d=!1)),!p&&1&l&&(p=!0,$.blocks=t[0].blocks,W(()=>p=!1)),!f&&1&l&&(f=!0,$.enemies=t[0].enemies,W(()=>f=!1)),u.$set($)},i(t){g||(it(e.$$.fragment,t),it(i.$$.fragment,t),it(o.$$.fragment,t),it(u.$$.fragment,t),g=!0)},o(t){rt(e.$$.fragment,t),rt(i.$$.fragment,t),rt(o.$$.fragment,t),rt(u.$$.fragment,t),g=!1},d(t){ft(e,t),t&&h(l),ft(i,t),t&&h(a),ft(o,t),t&&h(c),ft(u,t),t&&h(m)}}}function Mi(t){let e,n;return e=new Re({props:{hasChanges:t[2],$$slots:{default:[Ni],buttons:[Ci]},$$scope:{ctx:t}}}),e.$on("submit",t[4]),{c(){dt(e.$$.fragment)},m(t,l){pt(e,t,l),n=!0},p(t,n){const l={};4&n&&(l.hasChanges=t[2]),65539&n&&(l.$$scope={dirty:n,ctx:t}),e.$set(l)},i(t){n||(it(e.$$.fragment,t),n=!0)},o(t){rt(e.$$.fragment,t),n=!1},d(t){ft(e,t)}}}function Oi(t){let e,n,l=null!=t[0]&&xi(t);return{c(){l&&l.c(),e=w()},m(t,i){l&&l.m(t,i),$(t,e,i),n=!0},p(t,[n]){null!=t[0]?l?(l.p(t,n),1&n&&it(l,1)):(l=xi(t),l.c(),it(l,1),l.m(e.parentNode,e)):l&&(nt(),rt(l,1,1,()=>{l=null}),lt())},i(t){n||(it(l),n=!0)},o(t){rt(l),n=!1},d(t){l&&l.d(t),t&&h(e)}}}function ji(t,e,n){let l;s(t,yi,t=>n(3,l=t));let i,r,a,o,{params:c={}}=e;return t.$$set=t=>{"params"in t&&n(6,c=t.params)},t.$$.update=()=>{64&t.$$.dirty&&n(13,r=decodeURIComponent(c.name)||"new"),8192&t.$$.dirty&&("new"==r?async function(){n(0,i=null),await U(),n(0,i={name:"",playableCharacters:[],background:"rgb(135, 206, 235)",blocks:[],enemies:[]})}():async function(t){l.hasOwnProperty(t)&&(n(0,i=null),await U(),n(0,i=JSON.parse(JSON.stringify(l[t]))))}(r)),8192&t.$$.dirty&&n(1,a="new"==r),9&t.$$.dirty&&n(2,o=null!=i&&!Qe.equals(i,l[i.name]))},[i,a,o,l,function(){Qe.empty(i.name)?document.getElementById("name").focus():(f(yi,l[i.name]=JSON.parse(JSON.stringify(i)),l),St("/level-builder/levels/"+encodeURIComponent(i.name)))},function(){confirm(`Are you sure you want to delete "${i.name}"?`)&&(delete l[i.name],yi.set(l),St("/level-builder/levels/new"))},c,function(t){i.name=t,n(0,i)},function(t){i.playableCharacters=t,n(0,i)},function(t){i.background=t,n(0,i)},function(t){i.thumbnail=t,n(0,i)},function(t){i.blocks=t,n(0,i)},function(t){i.enemies=t,n(0,i)}]}class Ei extends $t{constructor(t){super(),mt(this,t,ji,Oi,a,{params:6})}}function Di(e){let n,l;return n=new Nt({props:{routes:e[0],prefix:Ii}}),{c(){dt(n.$$.fragment)},m(t,e){pt(n,t,e),l=!0},p:t,i(t){l||(it(n.$$.fragment,t),l=!0)},o(t){rt(n.$$.fragment,t),l=!1},d(t){ft(n,t)}}}const Ii="/level-builder";function Ri(t,e,n){let{params:l={}}=e;const i={"/art/:name?":bn,"/blocks/:name?":fl,"/characters/:name?":El,"/enemies/:name?":Wl,"/levels/:name?":Ei};let r;return t.$$set=t=>{"params"in t&&n(1,l=t.params)},t.$$.update=()=>{2&t.$$.dirty&&(r=l.tab||"art")},[i,l]}class Hi extends $t{constructor(t){super(),mt(this,t,Ri,Di,a,{params:1})}}function Ti(e){let n,l,i,r,a,o,s,c,u,d,p,f,g=e[0].name+"";return{c(){n=v("div"),l=v("p"),i=y("Level: "),r=y(g),a=x(),o=v("p"),s=y("Score: "),c=y(e[1]),u=x(),d=v("p"),p=y("Enemies left: "),f=y(e[2]),S(l,"class","svelte-1ivfn85"),S(o,"class","svelte-1ivfn85"),S(d,"class","svelte-1ivfn85"),S(n,"class","svelte-1ivfn85")},m(t,e){$(t,n,e),m(n,l),m(l,i),m(l,r),m(n,a),m(n,o),m(o,s),m(o,c),m(n,u),m(n,d),m(d,p),m(d,f)},p(t,[e]){1&e&&g!==(g=t[0].name+"")&&M(r,g),2&e&&M(c,t[1]),4&e&&M(f,t[2])},i:t,o:t,d(t){t&&h(n)}}}function Li(t,e,n){let{level:l={}}=e,{score:i=0}=e,{enemyCount:r=0}=e;return t.$$set=t=>{"level"in t&&n(0,l=t.level),"score"in t&&n(1,i=t.score),"enemyCount"in t&&n(2,r=t.enemyCount)},[l,i,r]}class Ai extends $t{constructor(t){super(),mt(this,t,Li,Ti,a,{level:0,score:1,enemyCount:2})}}function Pi(t,e,n){const l=t.slice();return l[1]=e[n],l}function Vi(e){let n,l,i,r,a,o,s,c,u=e[1].key+"",d=e[1].action+"";return{c(){n=v("tr"),l=v("td"),i=y(u),r=x(),a=v("td"),o=y("= "),s=y(d),c=x(),S(l,"class","svelte-1d0wu93"),S(a,"class","svelte-1d0wu93")},m(t,e){$(t,n,e),m(n,l),m(l,i),m(n,r),m(n,a),m(a,o),m(a,s),m(n,c)},p:t,d(t){t&&h(n)}}}function Ji(e){let n,l,i=e[0],r=[];for(let t=0;t<i.length;t+=1)r[t]=Vi(Pi(e,i,t));return{c(){n=v("div"),l=v("table");for(let t=0;t<r.length;t+=1)r[t].c();S(l,"class","svelte-1d0wu93"),S(n,"class","instructions svelte-1d0wu93")},m(t,e){$(t,n,e),m(n,l);for(let t=0;t<r.length;t+=1)r[t].m(l,null)},p(t,[e]){if(1&e){let n;for(i=t[0],n=0;n<i.length;n+=1){const a=Pi(t,i,n);r[n]?r[n].p(a,e):(r[n]=Vi(a),r[n].c(),r[n].m(l,null))}for(;n<r.length;n+=1)r[n].d(1);r.length=i.length}},i:t,o:t,d(t){t&&h(n),g(r,t)}}}function _i(t){return[[{key:"Left + Right Arrow",action:"Move"},{key:"Space",action:"Jump"},{key:"R",action:"Spin Attack / Shield"},{key:"Q",action:"Heal"},{key:"Enter",action:"Restart"},{key:"P",action:"Pause"}]]}class Yi extends $t{constructor(t){super(),mt(this,t,_i,Ji,a,{})}}function Bi(t){let e,n,l;const i=t[6].default,r=c(i,t,t[5],null);return{c(){e=v("div"),n=v("div"),r&&r.c(),j(n,"position","absolute"),j(n,"left",-t[0]+"px"),j(n,"bottom",-t[1]+"px"),j(n,"height",t[3]+"px"),S(e,"class","viewport svelte-cjx02"),j(e,"width",t[2]+"px"),j(e,"height",t[3]+"px"),j(e,"background",t[4])},m(t,i){$(t,e,i),m(e,n),r&&r.m(n,null),l=!0},p(t,[a]){r&&r.p&&32&a&&d(r,i,t,t[5],a,null,null),(!l||1&a)&&j(n,"left",-t[0]+"px"),(!l||2&a)&&j(n,"bottom",-t[1]+"px"),(!l||8&a)&&j(n,"height",t[3]+"px"),(!l||4&a)&&j(e,"width",t[2]+"px"),(!l||8&a)&&j(e,"height",t[3]+"px"),(!l||16&a)&&j(e,"background",t[4])},i(t){l||(it(r,t),l=!0)},o(t){rt(r,t),l=!1},d(t){t&&h(e),r&&r.d(t)}}}function Fi(t,e,n){let{x:l=0}=e,{y:i=0}=e,{width:r=0}=e,{height:a=0}=e,{background:o=null}=e,{$$slots:s={},$$scope:c}=e;return t.$$set=t=>{"x"in t&&n(0,l=t.x),"y"in t&&n(1,i=t.y),"width"in t&&n(2,r=t.width),"height"in t&&n(3,a=t.height),"background"in t&&n(4,o=t.background),"$$scope"in t&&n(5,c=t.$$scope)},[l,i,r,a,o,c,s]}class zi extends $t{constructor(t){super(),mt(this,t,Fi,Bi,a,{x:0,y:1,width:2,height:3,background:4})}}function Ui(t){let e,n,l,i,r,a,o,s,c,u,d=t[1].name+"";return{c(){e=v("div"),n=v("h1"),l=y(d),i=y(" is dead now. You really let him down."),r=x(),a=v("h1"),o=y("Final score: "),s=y(t[0]),c=x(),u=v("p"),u.textContent="Press enter or space to restart.",S(n,"class","svelte-1ogvx1s"),S(a,"class","svelte-1ogvx1s"),S(u,"class","svelte-1ogvx1s"),S(e,"class","game-over svelte-1ogvx1s")},m(t,d){$(t,e,d),m(e,n),m(n,l),m(n,i),m(e,r),m(e,a),m(a,o),m(a,s),m(e,c),m(e,u)},p(t,e){2&e&&d!==(d=t[1].name+"")&&M(l,d),1&e&&M(s,t[0])},d(t){t&&h(e)}}}function Ki(e){let n,l=e[1]&&Ui(e);return{c(){l&&l.c(),n=w()},m(t,e){l&&l.m(t,e),$(t,n,e)},p(t,[e]){t[1]?l?l.p(t,e):(l=Ui(t),l.c(),l.m(n.parentNode,n)):l&&(l.d(1),l=null)},i:t,o:t,d(t){l&&l.d(t),t&&h(n)}}}function Wi(t,e,n){let{score:l=0}=e,{player:i}=e;return t.$$set=t=>{"score"in t&&n(0,l=t.score),"player"in t&&n(1,i=t.player)},[l,i]}class Xi extends $t{constructor(t){super(),mt(this,t,Wi,Ki,a,{score:0,player:1})}}const Gi=(t,e)=>Qi(t,e)&&Zi(t,e),Qi=(t,e)=>t.x<e.x+e.width&&t.x+t.width>e.x,Zi=(t,e)=>t.y+t.height>=e.y&&t.y<=e.y+e.height,tr=(t,e)=>t.y+t.height>e.y&&t.y<e.y+e.height;const{window:er}=at;function nr(t,e,n){const l=t.slice();return l[28]=e[n],l}function lr(t){let e,n;return e=new Xi({props:{score:t[4],player:t[6]}}),{c(){dt(e.$$.fragment)},m(t,l){pt(e,t,l),n=!0},p(t,n){const l={};16&n[0]&&(l.score=t[4]),64&n[0]&&(l.player=t[6]),e.$set(l)},i(t){n||(it(e.$$.fragment,t),n=!0)},o(t){rt(e.$$.fragment,t),n=!1},d(t){ft(e,t)}}}function ir(t){let n,l;const i=[t[9],{background:t[0].background}];let r={$$slots:{default:[ar]},$$scope:{ctx:t}};for(let t=0;t<i.length;t+=1)r=e(r,i[t]);return n=new zi({props:r}),{c(){dt(n.$$.fragment)},m(t,e){pt(n,t,e),l=!0},p(t,e){const l=513&e[0]?st(i,[512&e[0]&&ct(t[9]),1&e[0]&&{background:t[0].background}]):{};206&e[0]|1&e[1]&&(l.$$scope={dirty:e,ctx:t}),n.$set(l)},i(t){l||(it(n.$$.fragment,t),l=!0)},o(t){rt(n.$$.fragment,t),l=!1},d(t){ft(n,t)}}}function rr(t){let n,l;const i=[t[28]];let r={};for(let t=0;t<i.length;t+=1)r=e(r,i[t]);return n=new oi({props:r}),{c(){dt(n.$$.fragment)},m(t,e){pt(n,t,e),l=!0},p(t,e){const l=128&e[0]?st(i,[ct(t[28])]):{};n.$set(l)},i(t){l||(it(n.$$.fragment,t),l=!0)},o(t){rt(n.$$.fragment,t),l=!1},d(t){ft(n,t)}}}function ar(t){let n,l,i,r,a;n=new ui({props:{blocks:t[1],width:t[2],height:t[3],playing:!0}});let o=t[7],s=[];for(let e=0;e<o.length;e+=1)s[e]=rr(nr(t,o,e));const c=t=>rt(s[t],1,1,()=>{s[t]=null}),u=[t[6]];let d={};for(let t=0;t<u.length;t+=1)d=e(d,u[t]);return r=new oi({props:d}),{c(){dt(n.$$.fragment),l=x();for(let t=0;t<s.length;t+=1)s[t].c();i=x(),dt(r.$$.fragment)},m(t,e){pt(n,t,e),$(t,l,e);for(let n=0;n<s.length;n+=1)s[n].m(t,e);$(t,i,e),pt(r,t,e),a=!0},p(t,e){const l={};if(2&e[0]&&(l.blocks=t[1]),4&e[0]&&(l.width=t[2]),8&e[0]&&(l.height=t[3]),n.$set(l),128&e[0]){let n;for(o=t[7],n=0;n<o.length;n+=1){const l=nr(t,o,n);s[n]?(s[n].p(l,e),it(s[n],1)):(s[n]=rr(l),s[n].c(),it(s[n],1),s[n].m(i.parentNode,i))}for(nt(),n=o.length;n<s.length;n+=1)c(n);lt()}const a=64&e[0]?st(u,[ct(t[6])]):{};r.$set(a)},i(t){if(!a){it(n.$$.fragment,t);for(let t=0;t<o.length;t+=1)it(s[t]);it(r.$$.fragment,t),a=!0}},o(t){rt(n.$$.fragment,t),s=s.filter(Boolean);for(let t=0;t<s.length;t+=1)rt(s[t]);rt(r.$$.fragment,t),a=!1},d(t){ft(n,t),t&&h(l),g(s,t),t&&h(i),ft(r,t)}}}function or(t){let e,n,l,r,a,o,s,c,u,d=t[8]&&lr(t),p=null!=t[0]&&null!=t[6]&&ir(t);return r=new Ai({props:{level:t[0],score:t[4],enemyCount:(t[7]||[]).filter(sr).length}}),o=new Yi({}),{c(){e=v("div"),d&&d.c(),n=x(),p&&p.c(),l=x(),dt(r.$$.fragment),a=x(),dt(o.$$.fragment),S(e,"class","game-window svelte-1ihy09s")},m(i,f){$(i,e,f),d&&d.m(e,null),m(e,n),p&&p.m(e,null),m(e,l),pt(r,e,null),m(e,a),pt(o,e,null),t[13](e),s=!0,c||(u=[k(er,"keydown",t[10]),k(er,"keyup",t[11])],c=!0)},p(t,i){t[8]?d?(d.p(t,i),256&i[0]&&it(d,1)):(d=lr(t),d.c(),it(d,1),d.m(e,n)):d&&(nt(),rt(d,1,1,()=>{d=null}),lt()),null!=t[0]&&null!=t[6]?p?(p.p(t,i),65&i[0]&&it(p,1)):(p=ir(t),p.c(),it(p,1),p.m(e,l)):p&&(nt(),rt(p,1,1,()=>{p=null}),lt());const a={};1&i[0]&&(a.level=t[0]),16&i[0]&&(a.score=t[4]),128&i[0]&&(a.enemyCount=(t[7]||[]).filter(sr).length),r.$set(a)},i(t){s||(it(d),it(p),it(r.$$.fragment,t),it(o.$$.fragment,t),s=!0)},o(t){rt(d),rt(p),rt(r.$$.fragment,t),rt(o.$$.fragment,t),s=!1},d(n){n&&h(e),d&&d.d(),p&&p.d(),ft(r),ft(o),t[13](null),c=!1,i(u)}}}const sr=t=>t.alive;function cr(t,e,n){let l,i,r;s(t,tl,t=>n(21,l=t)),s(t,Le,t=>n(22,i=t)),s(t,Dl,t=>n(23,r=t));let a,o,c,u,d,p,{level:f=null}=e,{character:m=null}=e,$=0,h=0,g=0,v=!1,b=!0,y=null,x={width:window.innerWidth,height:600},w=!1,k=!1;function q(){n(4,g=0),n(6,d={...m,health:m.maxHealth,tvx:m.maxVelocity,width:2*i[m.graphicStill].width,height:2*i[m.graphicStill].height,x:o[0].x,y:o[0].y+o[0].height+100,vx:0,vy:0,spinning:!1,tick(){d.grounded?n(6,w&&!k?d.vx-=d.tvx/5:k&&!w?d.vx+=d.tvx/5:d.vx=0,d):w&&!k?n(6,d.vx-=d.tvx/10,d):k&&!w&&n(6,d.vx+=d.tvx/10,d),Math.abs(d.vx)>d.tvx&&n(6,d.vx=d.tvx*(d.vx<0?-1:1),d)}}),n(7,p=f.enemies.map(t=>{const e=r[t.name];return function(t,e,n,l){return{...t,...e,width:n,height:l,health:t.maxHealth,tvx:t.maxVelocity,vx:0,vy:0,grounded:!1,alive:!0,tick(t,e){t.grounded&&(Math.abs(e.x-t.x)<400?(e.x==t.x?t.vx=0:e.x<t.x?t.vx=-t.tvx:t.vx=t.tvx,e.y>t.y+t.height&&(t.vy=t.jumpVelocity,t.y+=1)):t.vx=0)},onDeath(){}}}(e,t,2*i[e.graphicStill].width,2*i[e.graphicStill].height)})),n(8,v=!1),null==y&&S()}function S(){if(!v){n(6,d=C(d,!0)),d.tick();const t=x.width/2,e=x.height/2;n(9,x.x=d.x<t?0:d.x>a-t&&a>x.width?a-x.width:d.x-t,x),n(9,x.y=d.y<e?0:d.y-e,x);for(let t=0;t<p.length;t++)p[t].alive&&(n(7,p[t]=C(p[t]),p),p[t].tick(p[t],d),Gi(d,p[t])&&(d.spinning?(n(7,p[t].gettingHit=!0,p),n(7,p[t].health-=d.dps/60,p)):n(6,d.health-=p[t].dps/60,d)),p[t].health<=0&&(n(7,p[t].alive=!1,p),p[t].onDeath(),n(4,g+=p[t].score)));d.health<=0&&n(8,v=!0)}b&&(y=window.requestAnimationFrame(S))}function C(t,e=!1){const n=o.filter(e=>e.solid&&((t,e)=>t.y>=e.y+e.height&&Qi(t,e))(t,e)).map(t=>t.y+t.height),l=n.length>0?Math.max(...n):-500;if(t.y+=t.vy,t.grounded=t.y<=l,t.grounded?(t.vy<0&&(t.health+=t.vy/10*t.fallDamageMultiplier,t.vy=0),t.y=l):t.y<-200?t.health=0:t.vy-=1,0!=t.vx)if(t.vx>0){let e=t.x+t.vx;const n=o.find(n=>{const l=e+t.width,i=t.x+t.width;return n.solid&&l>n.x&&i<=n.x&&tr(n,t)});null!=n?e=n.x-t.width:e>a-t.width&&(e=a-t.width),t.x=e}else if(t.vx<0){let e=t.x+t.vx;const n=o.find(n=>{const l=n.x+n.width;return n.solid&&t.x>=l&&e<l&&tr(n,t)});null!=n?e=n.x+n.width:e<0&&(e=0),t.x=e<0?0:e}for(let e=0;e<c.length;e++)Gi(t,c[e])&&(t.health-=c[e].dps/60,c[e].throwOnTouch&&(t.vy=20));return t}return T(()=>{n(1,o=f.blocks.sort((t,e)=>t.x>e.x?1:e.x>t.x||t.y>e.y?-1:e.y>t.y?1:0).map(t=>({...t,solid:l[t.name].solid,png:i[l[t.name].graphic].png,dps:l[t.name].dps,throwOnTouch:l[t.name].throwOnTouch}))),a=Math.max(...o.map(t=>t.x+t.width)),c=o.filter(t=>t.dps>0),n(2,$=Math.max(...o.map(t=>t.x+t.width))),n(3,h=600),q()}),L(()=>{b=!1,window.cancelAnimationFrame(y)}),t.$$set=t=>{"level"in t&&n(0,f=t.level),"character"in t&&n(12,m=t.character)},[f,o,$,h,g,u,d,p,v,x,function(t){if(!v)switch(t.code){case"ArrowLeft":w=!0;break;case"ArrowRight":k=!0;break;case"Space":(d.grounded||d.canFly)&&n(6,d.vy=d.jumpVelocity,d);break;case"KeyR":n(6,d.spinning=!0,d);break;case"KeyQ":n(6,d.health=d.maxHealth,d)}},function(t){switch(t.code){case"ArrowLeft":w=!1;break;case"ArrowRight":k=!1;break;case"Space":v&&q();break;case"KeyR":n(6,d.spinning=!1,d);break;case"Enter":case"NumpadEnter":q();break;case"KeyP":break;default:console.log(t.code)}},m,function(t){J[t?"unshift":"push"](()=>{u=t,n(5,u)})}]}class ur extends $t{constructor(t){super(),mt(this,t,cr,or,a,{level:0,character:12},[-1,-1])}}function dr(t,e,n){const l=t.slice();return l[4]=e[n],l}function pr(t,e,n){const l=t.slice();return l[3]=e[n],l}function fr(t){let e,n,l=t[0],i=[];for(let e=0;e<l.length;e+=1)i[e]=hr(pr(t,l,e));const r=t=>rt(i[t],1,1,()=>{i[t]=null});return{c(){e=v("div");for(let t=0;t<i.length;t+=1)i[t].c();S(e,"class","list-group")},m(t,l){$(t,e,l);for(let t=0;t<i.length;t+=1)i[t].m(e,null);n=!0},p(t,n){if(39&n){let a;for(l=t[0],a=0;a<l.length;a+=1){const r=pr(t,l,a);i[a]?(i[a].p(r,n),it(i[a],1)):(i[a]=hr(r),i[a].c(),it(i[a],1),i[a].m(e,null))}for(nt(),a=l.length;a<i.length;a+=1)r(a);lt()}},i(t){if(!n){for(let t=0;t<l.length;t+=1)it(i[t]);n=!0}},o(t){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)rt(i[t]);n=!1},d(t){t&&h(e),g(i,t)}}}function mr(t){let e,n,l,i,r,a,o,s,c,u,d,p,f,g,b,w,q;return g=new ur({props:{level:t[1][t[3]],character:t[2][t[4]]}}),{c(){e=v("div"),n=v("button"),n.textContent="< Change level",l=x(),i=v("a"),r=y("Edit "),a=y(t[3]),s=x(),c=v("a"),u=y("Edit "),d=y(t[4]),f=x(),dt(g.$$.fragment),S(n,"type","button"),S(n,"class","btn btn-info"),S(i,"href",o="#/level-builder/levels/"+encodeURIComponent(t[3])),S(i,"class","btn btn-secondary"),S(i,"role","button"),S(c,"href",p="#/level-builder/characters/"+encodeURIComponent(t[4])),S(c,"class","btn btn-secondary"),S(c,"role","button"),S(e,"class","mb-2")},m(o,p){$(o,e,p),m(e,n),m(e,l),m(e,i),m(i,r),m(i,a),m(e,s),m(e,c),m(c,u),m(c,d),$(o,f,p),pt(g,o,p),b=!0,w||(q=k(n,"click",t[6]),w=!0)},p(t,e){(!b||8&e)&&M(a,t[3]),(!b||8&e&&o!==(o="#/level-builder/levels/"+encodeURIComponent(t[3])))&&S(i,"href",o),(!b||16&e)&&M(d,t[4]),(!b||16&e&&p!==(p="#/level-builder/characters/"+encodeURIComponent(t[4])))&&S(c,"href",p);const n={};10&e&&(n.level=t[1][t[3]]),20&e&&(n.character=t[2][t[4]]),g.$set(n)},i(t){b||(it(g.$$.fragment,t),b=!0)},o(t){rt(g.$$.fragment,t),b=!1},d(t){t&&h(e),t&&h(f),ft(g,t),w=!1,q()}}}function $r(t){let e,n,l,i,r,a,o,s,c=t[4]+"";function u(...e){return t[7](t[3],t[4],...e)}return n=new Je({props:{name:t[2][t[4]].graphicStill}}),{c(){e=v("button"),dt(n.$$.fragment),l=x(),i=y(c),r=x(),S(e,"class","btn btn-secondary mr-1")},m(t,c){$(t,e,c),pt(n,e,null),m(e,l),m(e,i),m(e,r),a=!0,o||(s=k(e,"click",u),o=!0)},p(e,l){t=e;const r={};7&l&&(r.name=t[2][t[4]].graphicStill),n.$set(r),(!a||3&l)&&c!==(c=t[4]+"")&&M(i,c)},i(t){a||(it(n.$$.fragment,t),a=!0)},o(t){rt(n.$$.fragment,t),a=!1},d(t){t&&h(e),ft(n),o=!1,s()}}}function hr(t){let e,n,l,i,r,a,o,s,c,u,d=t[3]+"",p=t[1][t[3]].playableCharacters,f=[];for(let e=0;e<p.length;e+=1)f[e]=$r(dr(t,p,e));const b=t=>rt(f[t],1,1,()=>{f[t]=null});return{c(){e=v("div"),n=v("h4"),l=y(d),i=x(),r=v("img"),o=x(),s=v("div");for(let t=0;t<f.length;t+=1)f[t].c();c=x(),S(n,"class","mb-0"),r.src!==(a=t[1][t[3]].thumbnail)&&S(r,"src",a),j(r,"background",t[1][t[3]].background),S(r,"alt","level preview"),S(s,"class","flex-row"),S(e,"class","list-group-item")},m(t,a){$(t,e,a),m(e,n),m(n,l),m(e,i),m(e,r),m(e,o),m(e,s);for(let t=0;t<f.length;t+=1)f[t].m(s,null);m(e,c),u=!0},p(t,e){if((!u||1&e)&&d!==(d=t[3]+"")&&M(l,d),(!u||3&e&&r.src!==(a=t[1][t[3]].thumbnail))&&S(r,"src",a),(!u||3&e)&&j(r,"background",t[1][t[3]].background),39&e){let n;for(p=t[1][t[3]].playableCharacters,n=0;n<p.length;n+=1){const l=dr(t,p,n);f[n]?(f[n].p(l,e),it(f[n],1)):(f[n]=$r(l),f[n].c(),it(f[n],1),f[n].m(s,null))}for(nt(),n=p.length;n<f.length;n+=1)b(n);lt()}},i(t){if(!u){for(let t=0;t<p.length;t+=1)it(f[t]);u=!0}},o(t){f=f.filter(Boolean);for(let t=0;t<f.length;t+=1)rt(f[t]);u=!1},d(t){t&&h(e),g(f,t)}}}function gr(t){let e,n,l,i;const r=[mr,fr],a=[];function o(t,e){return null!=t[3]?0:1}return e=o(t),n=a[e]=r[e](t),{c(){n.c(),l=w()},m(t,n){a[e].m(t,n),$(t,l,n),i=!0},p(t,[i]){let s=e;e=o(t),e===s?a[e].p(t,i):(nt(),rt(a[s],1,1,()=>{a[s]=null}),lt(),n=a[e],n||(n=a[e]=r[e](t),n.c()),it(n,1),n.m(l.parentNode,l))},i(t){i||(it(n),i=!0)},o(t){rt(n),i=!1},d(t){a[e].d(t),t&&h(l)}}}function vr(t,e,n){let l,i,r,a;function o(t,e){n(3,r=t),n(4,a=e)}s(t,yi,t=>n(1,l=t)),s(t,ml,t=>n(2,i=t));let c;return t.$$.update=()=>{2&t.$$.dirty&&n(0,c=Object.keys(l).sort())},[c,l,i,r,a,o,()=>n(3,r=null),(t,e)=>o(t,e)]}class br extends $t{constructor(t){super(),mt(this,t,vr,gr,a,{})}}function yr(t){let e;return{c(){e=v("li"),e.innerHTML='<a class="nav-link" href="#/play">Play!</a>',S(e,"class","nav-item")},m(t,n){$(t,e,n)},d(t){t&&h(e)}}}function xr(t){let e,n,l,i,r,a,o,s=t[0]&&yr();return a=new Nt({props:{routes:t[1]}}),{c(){e=v("ul"),n=v("li"),n.innerHTML='<a class="nav-link" href="#/level-builder/art/new">Level Builder</a>',l=x(),s&&s.c(),i=x(),r=v("main"),dt(a.$$.fragment),S(n,"class","nav-item"),S(e,"class","nav")},m(t,c){$(t,e,c),m(e,n),m(e,l),s&&s.m(e,null),$(t,i,c),$(t,r,c),pt(a,r,null),o=!0},p(t,[n]){t[0]?s||(s=yr(),s.c(),s.m(e,null)):s&&(s.d(1),s=null)},i(t){o||(it(a.$$.fragment,t),o=!0)},o(t){rt(a.$$.fragment,t),o=!1},d(t){t&&h(e),s&&s.d(),t&&h(i),t&&h(r),ft(a)}}}function wr(t,e,n){let l;s(t,yi,t=>n(2,l=t));const i={"/level-builder/:tab?/:name?":Hi,"/play":br,"*":Hi};let r;return t.$$.update=()=>{4&t.$$.dirty&&n(0,r=Object.keys(l).length>0)},[r,i]}return new class extends $t{constructor(t){super(),mt(this,t,wr,xr,a,{})}}({target:document.body,props:{name:"world"}})}();
//# sourceMappingURL=bundle.js.map

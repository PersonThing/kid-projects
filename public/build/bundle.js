var app=function(){"use strict";function t(){}function e(t,e){for(const n in e)t[n]=e[n];return t}function n(t){return t()}function l(){return Object.create(null)}function r(t){t.forEach(n)}function c(t){return"function"==typeof t}function o(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function i(e,...n){if(null==e)return t;const l=e.subscribe(...n);return l.unsubscribe?()=>l.unsubscribe():l}function s(t,e,n){t.$$.on_destroy.push(i(e,n))}function a(t,e,n,l){if(t){const r=u(t,e,n,l);return t[0](r)}}function u(t,n,l,r){return t[1]&&r?e(l.ctx.slice(),t[1](r(n))):l.ctx}function f(t,e,n,l,r,c,o){const i=function(t,e,n,l){if(t[2]&&l){const r=t[2](l(n));if(void 0===e.dirty)return r;if("object"==typeof r){const t=[],n=Math.max(e.dirty.length,r.length);for(let l=0;l<n;l+=1)t[l]=e.dirty[l]|r[l];return t}return e.dirty|r}return e.dirty}(e,l,r,c);if(i){const r=u(e,n,l,o);t.p(r,i)}}function p(t,e,n=e){return t.set(n),e}function $(t,e){t.appendChild(e)}function m(t,e,n){t.insertBefore(e,n||null)}function d(t){t.parentNode.removeChild(t)}function h(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function g(t){return document.createElement(t)}function v(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function y(t){return document.createTextNode(t)}function b(){return y(" ")}function x(){return y("")}function w(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function k(t){return function(e){return e.preventDefault(),t.call(this,e)}}function S(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function O(t){return""===t?void 0:+t}function N(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function M(t,e){t.value=null==e?"":e}function C(t,e,n,l){t.style.setProperty(e,n,l?"important":"")}function j(t,e,n){t.classList[n?"add":"remove"](e)}let E;function D(t){E=t}function _(){if(!E)throw new Error("Function called outside component initialization");return E}function H(){const t=_();return(e,n)=>{const l=t.$$.callbacks[e];if(l){const r=function(t,e){const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}(e,n);l.slice().forEach(e=>{e.call(t,r)})}}}function A(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(t=>t(e))}const J=[],V=[],R=[],I=[],T=Promise.resolve();let q=!1;function F(){q||(q=!0,T.then(B))}function K(){return F(),T}function L(t){R.push(t)}function P(t){I.push(t)}let U=!1;const z=new Set;function B(){if(!U){U=!0;do{for(let t=0;t<J.length;t+=1){const e=J[t];D(e),G(e.$$)}for(J.length=0;V.length;)V.pop()();for(let t=0;t<R.length;t+=1){const e=R[t];z.has(e)||(z.add(e),e())}R.length=0}while(J.length);for(;I.length;)I.pop()();q=!1,U=!1,z.clear()}}function G(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(L)}}const W=new Set;let X;function Y(){X={r:0,c:[],p:X}}function Q(){X.r||r(X.c),X=X.p}function Z(t,e){t&&t.i&&(W.delete(t),t.i(e))}function tt(t,e,n,l){if(t&&t.o){if(W.has(t))return;W.add(t),X.c.push(()=>{W.delete(t),l&&(n&&t.d(1),l())}),t.o(e)}}const et="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function nt(t,e){const n={},l={},r={$$scope:1};let c=t.length;for(;c--;){const o=t[c],i=e[c];if(i){for(const t in o)t in i||(l[t]=1);for(const t in i)r[t]||(n[t]=i[t],r[t]=1);t[c]=i}else for(const t in o)r[t]=1}for(const t in l)t in n||(n[t]=void 0);return n}function lt(t){return"object"==typeof t&&null!==t?t:{}}function rt(t,e,n){const l=t.$$.props[e];void 0!==l&&(t.$$.bound[l]=n,n(t.$$.ctx[l]))}function ct(t){t&&t.c()}function ot(t,e,l){const{fragment:o,on_mount:i,on_destroy:s,after_update:a}=t.$$;o&&o.m(e,l),L(()=>{const e=i.map(n).filter(c);s?s.push(...e):r(e),t.$$.on_mount=[]}),a.forEach(L)}function it(t,e){const n=t.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function st(e,n,c,o,i,s,a=[-1]){const u=E;D(e);const f=n.props||{},p=e.$$={fragment:null,ctx:null,props:s,update:t,not_equal:i,bound:l(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(u?u.$$.context:[]),callbacks:l(),dirty:a,skip_bound:!1};let $=!1;if(p.ctx=c?c(e,f,(t,n,...l)=>{const r=l.length?l[0]:n;return p.ctx&&i(p.ctx[t],p.ctx[t]=r)&&(!p.skip_bound&&p.bound[t]&&p.bound[t](r),$&&function(t,e){-1===t.$$.dirty[0]&&(J.push(t),F(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}(e,t)),n}):[],p.update(),$=!0,r(p.before_update),p.fragment=!!o&&o(p.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);p.fragment&&p.fragment.l(t),t.forEach(d)}else p.fragment&&p.fragment.c();n.intro&&Z(e.$$.fragment),ot(e,n.target,n.anchor),B()}D(u)}class at{$destroy(){it(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const ut=[];function ft(t,e){return{subscribe:pt(t,e).subscribe}}function pt(e,n=t){let l;const r=[];function c(t){if(o(e,t)&&(e=t,l)){const t=!ut.length;for(let t=0;t<r.length;t+=1){const n=r[t];n[1](),ut.push(n,e)}if(t){for(let t=0;t<ut.length;t+=2)ut[t][0](ut[t+1]);ut.length=0}}}return{set:c,update:function(t){c(t(e))},subscribe:function(o,i=t){const s=[o,i];return r.push(s),1===r.length&&(l=n(c)||t),o(e),()=>{const t=r.indexOf(s);-1!==t&&r.splice(t,1),0===r.length&&(l(),l=null)}}}}function $t(e,n,l){const o=!Array.isArray(e),s=o?[e]:e,a=n.length<2;return ft(l,e=>{let l=!1;const u=[];let f=0,p=t;const $=()=>{if(f)return;p();const l=n(o?u[0]:u,e);a?e(l):p=c(l)?l:t},m=s.map((t,e)=>i(t,t=>{u[e]=t,f&=~(1<<e),l&&$()},()=>{f|=1<<e}));return l=!0,$(),function(){r(m),p()}})}function mt(t){let e,n,l;var r=t[0];return r&&(e=new r({}),e.$on("routeEvent",t[5])),{c(){e&&ct(e.$$.fragment),n=x()},m(t,r){e&&ot(e,t,r),m(t,n,r),l=!0},p(t,l){if(r!==(r=t[0])){if(e){Y();const t=e;tt(t.$$.fragment,1,0,()=>{it(t,1)}),Q()}r?(e=new r({}),e.$on("routeEvent",t[5]),ct(e.$$.fragment),Z(e.$$.fragment,1),ot(e,n.parentNode,n)):e=null}},i(t){l||(e&&Z(e.$$.fragment,t),l=!0)},o(t){e&&tt(e.$$.fragment,t),l=!1},d(t){t&&d(n),e&&it(e,t)}}}function dt(t){let e,n,l;var r=t[0];function c(t){return{props:{params:t[1]}}}return r&&(e=new r(c(t)),e.$on("routeEvent",t[4])),{c(){e&&ct(e.$$.fragment),n=x()},m(t,r){e&&ot(e,t,r),m(t,n,r),l=!0},p(t,l){const o={};if(2&l&&(o.params=t[1]),r!==(r=t[0])){if(e){Y();const t=e;tt(t.$$.fragment,1,0,()=>{it(t,1)}),Q()}r?(e=new r(c(t)),e.$on("routeEvent",t[4]),ct(e.$$.fragment),Z(e.$$.fragment,1),ot(e,n.parentNode,n)):e=null}else r&&e.$set(o)},i(t){l||(e&&Z(e.$$.fragment,t),l=!0)},o(t){e&&tt(e.$$.fragment,t),l=!1},d(t){t&&d(n),e&&it(e,t)}}}function ht(t){let e,n,l,r;const c=[dt,mt],o=[];function i(t,e){return t[1]?0:1}return e=i(t),n=o[e]=c[e](t),{c(){n.c(),l=x()},m(t,n){o[e].m(t,n),m(t,l,n),r=!0},p(t,[r]){let s=e;e=i(t),e===s?o[e].p(t,r):(Y(),tt(o[s],1,1,()=>{o[s]=null}),Q(),n=o[e],n||(n=o[e]=c[e](t),n.c()),Z(n,1),n.m(l.parentNode,l))},i(t){r||(Z(n),r=!0)},o(t){tt(n),r=!1},d(t){o[e].d(t),t&&d(l)}}}function gt(){const t=window.location.href.indexOf("#/");let e=t>-1?window.location.href.substr(t+1):"/";const n=e.indexOf("?");let l="";return n>-1&&(l=e.substr(n+1),e=e.substr(0,n)),{location:e,querystring:l}}const vt=ft(null,(function(t){t(gt());const e=()=>{t(gt())};return window.addEventListener("hashchange",e,!1),function(){window.removeEventListener("hashchange",e,!1)}}));$t(vt,t=>t.location),$t(vt,t=>t.querystring);function yt(t){if(!t||t.length<1||"/"!=t.charAt(0)&&0!==t.indexOf("#/"))throw Error("Invalid parameter location");return K().then(()=>{window.location.hash=("#"==t.charAt(0)?"":"#")+t})}function bt(e,n,l){let r,c=t;s(e,vt,t=>l(6,r=t)),e.$$.on_destroy.push(()=>c());let{routes:o={}}=n,{prefix:i=""}=n;class a{constructor(t,e){if(!e||"function"!=typeof e&&("object"!=typeof e||!0!==e._sveltesparouter))throw Error("Invalid component object");if(!t||"string"==typeof t&&(t.length<1||"/"!=t.charAt(0)&&"*"!=t.charAt(0))||"object"==typeof t&&!(t instanceof RegExp))throw Error('Invalid value for "path" argument');const{pattern:n,keys:l}=function(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var n,l,r,c,o=[],i="",s=t.split("/");for(s[0]||s.shift();r=s.shift();)"*"===(n=r[0])?(o.push("wild"),i+="/(.*)"):":"===n?(l=r.indexOf("?",1),c=r.indexOf(".",1),o.push(r.substring(1,~l?l:~c?c:r.length)),i+=~l&&!~c?"(?:/([^/]+?))?":"/([^/]+?)",~c&&(i+=(~l?"?":"")+"\\"+r.substring(c))):i+="/"+r;return{keys:o,pattern:new RegExp("^"+i+(e?"(?=$|/)":"/?$"),"i")}}(t);this.path=t,"object"==typeof e&&!0===e._sveltesparouter?(this.component=e.route,this.conditions=e.conditions||[],this.userData=e.userData):(this.component=e,this.conditions=[],this.userData=void 0),this._pattern=n,this._keys=l}match(t){i&&t.startsWith(i)&&(t=t.substr(i.length)||"/");const e=this._pattern.exec(t);if(null===e)return null;if(!1===this._keys)return e;const n={};let l=0;for(;l<this._keys.length;)n[this._keys[l]]=e[++l]||null;return n}checkConditions(t){for(let e=0;e<this.conditions.length;e++)if(!this.conditions[e](t))return!1;return!0}}const u=[];o instanceof Map?o.forEach((t,e)=>{u.push(new a(e,t))}):Object.keys(o).forEach(t=>{u.push(new a(t,o[t]))});let f=null,p=null;const $=H(),m=(t,e)=>{K().then(()=>{$(t,e)})};return e.$$set=t=>{"routes"in t&&l(2,o=t.routes),"prefix"in t&&l(3,i=t.prefix)},e.$$.update=()=>{if(65&e.$$.dirty){l(0,f=null);let t=0;for(;!f&&t<u.length;){const e=u[t].match(r.location);if(e){const n={component:u[t].component,name:u[t].component.name,location:r.location,querystring:r.querystring,userData:u[t].userData};if(!u[t].checkConditions(n)){m("conditionsFailed",n);break}l(0,f=u[t].component),e&&"object"==typeof e&&Object.keys(e).length?l(1,p=e):l(1,p=null),m("routeLoaded",n)}t++}}},[f,p,o,i,function(t){A(e,t)},function(t){A(e,t)}]}class xt extends at{constructor(t){super(),st(this,t,bt,ht,o,{routes:2,prefix:3})}}function wt(t,e,n){const l=document.createElement("canvas");l.width=2*e,l.height=2*n;const r=l.getContext("2d");for(let e=0;e<t.length;e++)for(let n=0;n<t[e].length;n++){const l=t[e][n];null!=l&&"transparent"!=l&&(r.beginPath(),r.rect(2*n,2*e,2,2),r.fillStyle=l,r.fill())}return l.toDataURL("image/png")}function kt(t,e){const n=localStorage.getItem(t),l=null!=n&&"null"!=n&&"undefined"!=n?JSON.parse(n):e,{subscribe:r,set:c,update:o}=pt(l);return{subscribe:r,set:function(e){c(e),localStorage.setItem(t,JSON.stringify(e))}}}var St=kt("pixel-drawings",{});function Ot(t){let e,n,l,r;return{c(){e=g("img"),e.src!==(n=t[0].png)&&S(e,"src",n),S(e,"alt",l=t[0].name),S(e,"title",r=t[0].name),C(e,"transform","rotate("+t[1]+"deg)")},m(t,n){m(t,e,n)},p(t,c){1&c&&e.src!==(n=t[0].png)&&S(e,"src",n),1&c&&l!==(l=t[0].name)&&S(e,"alt",l),1&c&&r!==(r=t[0].name)&&S(e,"title",r),2&c&&C(e,"transform","rotate("+t[1]+"deg)")},d(t){t&&d(e)}}}function Nt(e){let n,l=null!=e[0]&&null!=e[0].png&&Ot(e);return{c(){l&&l.c(),n=x()},m(t,e){l&&l.m(t,e),m(t,n,e)},p(t,[e]){null!=t[0]&&null!=t[0].png?l?l.p(t,e):(l=Ot(t),l.c(),l.m(n.parentNode,n)):l&&(l.d(1),l=null)},i:t,o:t,d(t){l&&l.d(t),t&&d(n)}}}function Mt(t,e,n){let l;s(t,St,t=>n(5,l=t));let r,c,{name:o}=e,{spin:i=!1}=e,a=0;return t.$$set=t=>{"name"in t&&n(2,o=t.name),"spin"in t&&n(3,i=t.spin)},t.$$.update=()=>{37&t.$$.dirty&&null!=o&&(n(0,r=l[o]),null!=r&&null==r.png&&n(0,r.png=wt(r,r.width,r.height),r)),26&t.$$.dirty&&(i?n(4,c=setTimeout(()=>{n(1,a+=30)},25)):clearTimeout(c))},[r,a,o,i]}class Ct extends at{constructor(t){super(),st(this,t,Mt,Nt,o,{name:2,spin:3})}}function jt(t,e,n){const l=t.slice();return l[9]=e[n],l}function Et(t,e,n){const l=t.slice();return l[6]=e[n],l}function Dt(t){let e,n,l,r,c,o,i,s=Object.keys(t[2]),a=[];for(let e=0;e<s.length;e+=1)a[e]=_t(jt(t,s,e));const u=t=>tt(a[t],1,1,()=>{a[t]=null});return{c(){e=g("div"),n=g("a"),l=y("+ New"),c=b();for(let t=0;t<a.length;t+=1)a[t].c();o=b(),S(n,"href",r=Jt+"/"+t[6].name+"/new"),S(n,"class","list-group-item list-group-item-action svelte-1711lkh"),j(n,"list-group-item-success",null==t[2][t[1]]),S(e,"class","list-group sub-nav svelte-1711lkh")},m(t,r){m(t,e,r),$(e,n),$(n,l),$(e,c);for(let t=0;t<a.length;t+=1)a[t].m(e,null);$(e,o),i=!0},p(t,l){if(6&l&&j(n,"list-group-item-success",null==t[2][t[1]]),14&l){let n;for(s=Object.keys(t[2]),n=0;n<s.length;n+=1){const r=jt(t,s,n);a[n]?(a[n].p(r,l),Z(a[n],1)):(a[n]=_t(r),a[n].c(),Z(a[n],1),a[n].m(e,o))}for(Y(),n=s.length;n<a.length;n+=1)u(n);Q()}},i(t){if(!i){for(let t=0;t<s.length;t+=1)Z(a[t]);i=!0}},o(t){a=a.filter(Boolean);for(let t=0;t<a.length;t+=1)tt(a[t]);i=!1},d(t){t&&d(e),h(a,t)}}}function _t(t){let e,n,l,r,c,o,i=t[9]+"";return n=new Ct({props:{name:t[2][t[9]][t[6].graphicKey]}}),{c(){e=g("a"),ct(n.$$.fragment),l=b(),r=y(i),S(e,"class","list-group-item list-group-item-action svelte-1711lkh"),S(e,"href",c=Jt+"/"+t[6].name+"/"+t[9]),j(e,"active",t[1]==t[9])},m(t,c){m(t,e,c),ot(n,e,null),$(e,l),$(e,r),o=!0},p(t,l){const s={};4&l&&(s.name=t[2][t[9]][t[6].graphicKey]),n.$set(s),(!o||4&l)&&i!==(i=t[9]+"")&&N(r,i),(!o||4&l&&c!==(c=Jt+"/"+t[6].name+"/"+t[9]))&&S(e,"href",c),6&l&&j(e,"active",t[1]==t[9])},i(t){o||(Z(n.$$.fragment,t),o=!0)},o(t){tt(n.$$.fragment,t),o=!1},d(t){t&&d(e),it(n)}}}function Ht(t){let e,n,l,r,c,o,i=t[6].name+"",s=t[6].name==t[0]&&Dt(t);return{c(){e=g("a"),n=y(i),r=b(),s&&s.c(),c=x(),S(e,"class","list-group-item list-group-item-action"),S(e,"href",l=Jt+"/"+t[6].name+"/new"),j(e,"active",t[0]==t[6].name)},m(t,l){m(t,e,l),$(e,n),m(t,r,l),s&&s.m(t,l),m(t,c,l),o=!0},p(t,n){9&n&&j(e,"active",t[0]==t[6].name),t[6].name==t[0]?s?(s.p(t,n),1&n&&Z(s,1)):(s=Dt(t),s.c(),Z(s,1),s.m(c.parentNode,c)):s&&(Y(),tt(s,1,1,()=>{s=null}),Q())},i(t){o||(Z(s),o=!0)},o(t){tt(s),o=!1},d(t){t&&d(e),t&&d(r),s&&s.d(t),t&&d(c)}}}function At(t){let e,n,l,r,c,o,i,s,u,p=t[3],v=[];for(let e=0;e<p.length;e+=1)v[e]=Ht(Et(t,p,e));const x=t=>tt(v[t],1,1,()=>{v[t]=null}),w=t[5].default,k=a(w,t,t[4],null);return{c(){e=g("div"),n=g("div"),l=g("div"),r=g("a"),c=y("Art"),o=b();for(let t=0;t<v.length;t+=1)v[t].c();i=b(),s=g("div"),k&&k.c(),S(r,"class","list-group-item list-group-item-action"),S(r,"href",Jt),j(r,"active","art"==t[0]),S(l,"class","list-group"),S(s,"class","flex-grow"),S(e,"class","flex align-top")},m(t,a){m(t,e,a),$(e,n),$(n,l),$(l,r),$(r,c),$(l,o);for(let t=0;t<v.length;t+=1)v[t].m(l,null);$(e,i),$(e,s),k&&k.m(s,null),u=!0},p(t,[e]){if(1&e&&j(r,"active","art"==t[0]),15&e){let n;for(p=t[3],n=0;n<p.length;n+=1){const r=Et(t,p,n);v[n]?(v[n].p(r,e),Z(v[n],1)):(v[n]=Ht(r),v[n].c(),Z(v[n],1),v[n].m(l,null))}for(Y(),n=p.length;n<v.length;n+=1)x(n);Q()}k&&k.p&&16&e&&f(k,w,t,t[4],e,null,null)},i(t){if(!u){for(let t=0;t<p.length;t+=1)Z(v[t]);Z(k,t),u=!0}},o(t){v=v.filter(Boolean);for(let t=0;t<v.length;t+=1)tt(v[t]);tt(k,t),u=!1},d(t){t&&d(e),h(v,t),k&&k.d(t)}}}const Jt="#/level-builder";function Vt(t,e,n){let{tab:l}=e,{activeName:r}=e,{store:c}=e;let{$$slots:o={},$$scope:i}=e;return t.$$set=t=>{"tab"in t&&n(0,l=t.tab),"activeName"in t&&n(1,r=t.activeName),"store"in t&&n(2,c=t.store),"$$scope"in t&&n(4,i=t.$$scope)},[l,r,c,[{name:"blocks",graphicKey:"graphic"},{name:"characters",graphicKey:"graphicStill"},{name:"enemies",graphicKey:"graphicStill"},{name:"levels",graphicKey:null}],i,o]}class Rt extends at{constructor(t){super(),st(this,t,Vt,At,o,{tab:0,activeName:1,store:2})}}function It(t,e,n){const l=t.slice();return l[46]=e[n],l}function Tt(t,e,n){const l=t.slice();return l[43]=e[n],l}function qt(t,e,n){const l=t.slice();return l[52]=e[n],l}function Ft(t,e,n){const l=t.slice();return l[49]=e[n],l}function Kt(t,e,n){const l=t.slice();return l[55]=e[n],l}function Lt(t,e,n){const l=t.slice();return l[58]=e[n],l}function Pt(t){let e,n=t[9],l=[];for(let e=0;e<n.length;e+=1)l[e]=Ut(Lt(t,n,e));return{c(){e=g("div");for(let t=0;t<l.length;t+=1)l[t].c()},m(t,n){m(t,e,n);for(let t=0;t<l.length;t+=1)l[t].m(e,null)},p(t,r){if(25166337&r[0]){let c;for(n=t[9],c=0;c<n.length;c+=1){const o=Lt(t,n,c);l[c]?l[c].p(o,r):(l[c]=Ut(o),l[c].c(),l[c].m(e,null))}for(;c<l.length;c+=1)l[c].d(1);l.length=n.length}},d(t){t&&d(e),h(l,t)}}}function Ut(t){let e,n,l,c,o,i,s,a,u,f=t[58]+"";function p(...e){return t[29](t[58],...e)}function h(...e){return t[30](t[58],...e)}return{c(){e=g("div"),n=g("button"),l=y(f),o=b(),i=g("button"),i.textContent="x",s=b(),S(n,"type","button"),S(n,"class",c="btn btn-sm btn-"+(t[58]==t[0]?"primary active":"secondary")),S(i,"type","button"),S(i,"class","btn btn-sm btn-secondary"),S(e,"class","btn-group mr-1 mb-1")},m(t,r){m(t,e,r),$(e,n),$(n,l),$(e,o),$(e,i),$(e,s),a||(u=[w(n,"click",p),w(i,"click",h)],a=!0)},p(e,r){t=e,512&r[0]&&f!==(f=t[58]+"")&&N(l,f),513&r[0]&&c!==(c="btn btn-sm btn-"+(t[58]==t[0]?"primary active":"secondary"))&&S(n,"class",c)},d(t){t&&d(e),a=!1,r(u)}}}function zt(t){let e,n,l;function r(...e){return t[36](t[55],...e)}return{c(){e=g("button"),S(e,"type","button"),C(e,"background","transparent"!=t[55]?t[55]:"linear-gradient(110deg, rgba(200,200,200,1) 45%, rgba(255,255,255,1) 55%, rgba(255,255,255,1) 100%)"),S(e,"class","svelte-1a4yczt"),j(e,"active",t[55]==t[1])},m(t,c){m(t,e,c),n||(l=w(e,"click",r),n=!0)},p(n,l){t=n,16386&l[0]&&j(e,"active",t[55]==t[1])},d(t){t&&d(e),n=!1,l()}}}function Bt(t){let e,n=[0,0],l=[];for(let e=0;e<2;e+=1)l[e]=Wt(Ft(t,n,e));return{c(){e=g("div");for(let t=0;t<2;t+=1)l[t].c();S(e,"class","ml-3")},m(t,n){m(t,e,n);for(let t=0;t<2;t+=1)l[t].m(e,null)},p(t,r){if(1024&r[0]){let c;for(n=[0,0],c=0;c<2;c+=1){const o=Ft(t,n,c);l[c]?l[c].p(o,r):(l[c]=Wt(o),l[c].c(),l[c].m(e,null))}for(;c<2;c+=1)l[c].d(1)}},d(t){t&&d(e),h(l,t)}}}function Gt(t){let e,n;return{c(){e=g("img"),e.src!==(n=t[10])&&S(e,"src",n),S(e,"alt","block repeating preview")},m(t,n){m(t,e,n)},p(t,l){1024&l[0]&&e.src!==(n=t[10])&&S(e,"src",n)},d(t){t&&d(e)}}}function Wt(t){let e,n,l=[0,0,0,0],r=[];for(let e=0;e<4;e+=1)r[e]=Gt(qt(t,l,e));return{c(){e=g("div");for(let t=0;t<4;t+=1)r[t].c();n=b()},m(t,l){m(t,e,l);for(let t=0;t<4;t+=1)r[t].m(e,null);$(e,n)},p(t,c){if(1024&c[0]){let o;for(l=[0,0,0,0],o=0;o<4;o+=1){const i=qt(t,l,o);r[o]?r[o].p(i,c):(r[o]=Gt(i),r[o].c(),r[o].m(e,n))}for(;o<4;o+=1)r[o].d(1)}},d(t){t&&d(e),h(r,t)}}}function Xt(t){let e,n,l,r,c,o;return{c(){e=v("rect"),S(e,"y",n=t[43]*t[2]),S(e,"x",l=t[46]*t[2]),C(e,"fill",te(t[8],t[43],t[46])),S(e,"width",t[2]),S(e,"height",t[2]),S(e,"data-row",r=t[43]),S(e,"data-column",c=t[46]),S(e,"stroke",o=t[7]?"#eee":null)},m(t,n){m(t,e,n)},p(t,i){2052&i[0]&&n!==(n=t[43]*t[2])&&S(e,"y",n),4100&i[0]&&l!==(l=t[46]*t[2])&&S(e,"x",l),6400&i[0]&&C(e,"fill",te(t[8],t[43],t[46])),4&i[0]&&S(e,"width",t[2]),4&i[0]&&S(e,"height",t[2]),2048&i[0]&&r!==(r=t[43])&&S(e,"data-row",r),4096&i[0]&&c!==(c=t[46])&&S(e,"data-column",c),128&i[0]&&o!==(o=t[7]?"#eee":null)&&S(e,"stroke",o)},d(t){t&&d(e)}}}function Yt(t){let e,n=t[12],l=[];for(let e=0;e<n.length;e+=1)l[e]=Xt(It(t,n,e));return{c(){for(let t=0;t<l.length;t+=1)l[t].c();e=x()},m(t,n){for(let e=0;e<l.length;e+=1)l[e].m(t,n);m(t,e,n)},p(t,r){if(6532&r[0]){let c;for(n=t[12],c=0;c<n.length;c+=1){const o=It(t,n,c);l[c]?l[c].p(o,r):(l[c]=Xt(o),l[c].c(),l[c].m(e.parentNode,e))}for(;c<l.length;c+=1)l[c].d(1);l.length=n.length}},d(t){h(l,t),t&&d(e)}}}function Qt(t){let e,n,l,c,o,i,s,a,u,f,p,x,C,j,E,D,_,H,A,J,V,R,I,T,q,F,K,L,P,U,z,B,G,W,X,Y,Q,Z,tt,et,nt,lt,rt,ct,ot,it,st,at,ut,ft,pt,$t,mt,dt,ht,gt,vt=t[5].length+"",yt=t[6].length+"",bt=t[9].length&&Pt(t),xt=t[14],wt=[];for(let e=0;e<xt.length;e+=1)wt[e]=zt(Kt(t,xt,e));let kt=20==t[4]&&20==t[3]&&Bt(t),St=t[11],Ot=[];for(let e=0;e<St.length;e+=1)Ot[e]=Yt(Tt(t,St,e));return{c(){bt&&bt.c(),e=b(),n=g("div"),l=g("button"),l.textContent="Save",c=b(),o=g("button"),o.textContent="Reset",i=b(),s=g("div"),a=g("button"),a.textContent="Flip horizontal",u=b(),f=g("button"),f.textContent="Flip vertical",p=b(),x=g("div"),C=g("button"),j=y("Undo "),E=y(vt),_=b(),H=g("button"),A=y("Redo "),J=y(yt),R=b(),I=g("div"),T=y("Grid size\r\n\t\t\t"),q=g("input"),F=b(),K=g("div"),L=y("Height\r\n\t\t\t"),P=g("input"),U=b(),z=g("div"),B=y("Width\r\n\t\t\t"),G=g("input"),W=b(),X=g("label"),Y=g("input"),Q=y("\r\n\t\t\tShow grid"),Z=b(),tt=g("div"),et=g("div"),nt=g("div");for(let t=0;t<wt.length;t+=1)wt[t].c();lt=b(),rt=g("div"),ct=g("div"),ot=y("Preview at in-game size / repeated next to same graphic:\r\n\t\t\t\t"),it=g("div"),st=g("div"),at=g("img"),ft=b(),kt&&kt.c(),pt=b(),$t=v("svg");for(let t=0;t<Ot.length;t+=1)Ot[t].c();S(l,"type","button"),S(l,"class","btn btn-success btn-sm mr-2"),S(o,"type","button"),S(o,"class","btn btn-secondary btn-sm"),S(a,"type","button"),S(a,"class","btn btn-secondary btn-sm"),S(f,"type","button"),S(f,"class","btn btn-secondary btn-sm"),S(s,"class","btn-group"),S(C,"type","button"),C.disabled=D=0==t[5].length,S(C,"class","btn btn-default btn-sm"),S(H,"type","button"),H.disabled=V=0==t[6].length,S(H,"class","btn btn-default btn-sm"),S(x,"class","btn-group"),S(q,"type","number"),S(q,"min","15"),S(q,"max","50"),S(q,"step","5"),S(q,"class","svelte-1a4yczt"),S(P,"type","number"),S(P,"placeholder","Height"),S(P,"class","svelte-1a4yczt"),S(G,"type","number"),S(G,"placeholder","Width"),S(G,"class","svelte-1a4yczt"),S(Y,"type","checkbox"),S(n,"class","flex my-3 svelte-1a4yczt"),S(nt,"class","color-picker svelte-1a4yczt"),S(et,"class","controls"),at.src!==(ut=t[10])&&S(at,"src",ut),S(at,"alt","preview"),S(it,"class","p-3 preview-bg flex svelte-1a4yczt"),S(ct,"class","my-1"),S($t,"class","preview-bg svelte-1a4yczt"),S($t,"width",mt=t[4]*(t[2]+1)),S($t,"height",dt=t[3]*(t[2]+1)),S(rt,"class","flex-grow "),S(tt,"class","flex align-top")},m(r,d){bt&&bt.m(r,d),m(r,e,d),m(r,n,d),$(n,l),$(n,c),$(n,o),$(n,i),$(n,s),$(s,a),$(s,u),$(s,f),$(n,p),$(n,x),$(x,C),$(C,j),$(C,E),$(x,_),$(x,H),$(H,A),$(H,J),$(n,R),$(n,I),$(I,T),$(I,q),M(q,t[2]),$(n,F),$(n,K),$(K,L),$(K,P),M(P,t[3]),$(n,U),$(n,z),$(z,B),$(z,G),M(G,t[4]),$(n,W),$(n,X),$(X,Y),Y.checked=t[7],$(X,Q),m(r,Z,d),m(r,tt,d),$(tt,et),$(et,nt);for(let t=0;t<wt.length;t+=1)wt[t].m(nt,null);$(tt,lt),$(tt,rt),$(rt,ct),$(ct,ot),$(ct,it),$(it,st),$(st,at),$(it,ft),kt&&kt.m(it,null),$(rt,pt),$(rt,$t);for(let t=0;t<Ot.length;t+=1)Ot[t].m($t,null);ht||(gt=[w(l,"click",t[31]),w(o,"click",t[15]),w(a,"click",t[27]),w(f,"click",t[26]),w(C,"click",t[19]),w(H,"click",t[20]),w(q,"input",t[32]),w(P,"input",t[33]),w(G,"input",t[34]),w(Y,"change",t[35]),w($t,"mousedown",t[16]),w($t,"mouseup",t[17]),w($t,"contextmenu",k(t[28])),w($t,"mousemove",t[37])],ht=!0)},p(t,n){if(t[9].length?bt?bt.p(t,n):(bt=Pt(t),bt.c(),bt.m(e.parentNode,e)):bt&&(bt.d(1),bt=null),32&n[0]&&vt!==(vt=t[5].length+"")&&N(E,vt),32&n[0]&&D!==(D=0==t[5].length)&&(C.disabled=D),64&n[0]&&yt!==(yt=t[6].length+"")&&N(J,yt),64&n[0]&&V!==(V=0==t[6].length)&&(H.disabled=V),4&n[0]&&O(q.value)!==t[2]&&M(q,t[2]),8&n[0]&&O(P.value)!==t[3]&&M(P,t[3]),16&n[0]&&O(G.value)!==t[4]&&M(G,t[4]),128&n[0]&&(Y.checked=t[7]),2113538&n[0]){let e;for(xt=t[14],e=0;e<xt.length;e+=1){const l=Kt(t,xt,e);wt[e]?wt[e].p(l,n):(wt[e]=zt(l),wt[e].c(),wt[e].m(nt,null))}for(;e<wt.length;e+=1)wt[e].d(1);wt.length=xt.length}if(1024&n[0]&&at.src!==(ut=t[10])&&S(at,"src",ut),20==t[4]&&20==t[3]?kt?kt.p(t,n):(kt=Bt(t),kt.c(),kt.m(it,null)):kt&&(kt.d(1),kt=null),6532&n[0]){let e;for(St=t[11],e=0;e<St.length;e+=1){const l=Tt(t,St,e);Ot[e]?Ot[e].p(l,n):(Ot[e]=Yt(l),Ot[e].c(),Ot[e].m($t,null))}for(;e<Ot.length;e+=1)Ot[e].d(1);Ot.length=St.length}20&n[0]&&mt!==(mt=t[4]*(t[2]+1))&&S($t,"width",mt),12&n[0]&&dt!==(dt=t[3]*(t[2]+1))&&S($t,"height",dt)},d(t){bt&&bt.d(t),t&&d(e),t&&d(n),t&&d(Z),t&&d(tt),h(wt,t),kt&&kt.d(),h(Ot,t),ht=!1,r(gt)}}}function Zt(t){let e,n,l,r;return e=new Rt({props:{tab:"art",$$slots:{default:[Qt]},$$scope:{ctx:t}}}),{c(){ct(e.$$.fragment)},m(c,o){ot(e,c,o),n=!0,l||(r=w(window,"keyup",t[25]),l=!0)},p(t,n){const l={};8191&n[0]|1073741824&n[1]&&(l.$$scope={dirty:n,ctx:t}),e.$set(l)},i(t){n||(Z(e.$$.fragment,t),n=!0)},o(t){tt(e.$$.fragment,t),n=!1},d(t){it(e,t),l=!1,r()}}}function te(t,e,n){return t.length>e&&t[e].length>n?t[e][n]||"transparent":"white"}function ee(t,e,n){let l;const r=kt("pixel-drawings",{});s(t,r,t=>n(39,l=t));let c=null;let o="black",i=25,a=20,u=20,f=[],$=[],m=!0,d=[],h=!1;function g(t=!0){t&&y(),n(8,d=b(a)),n(0,c=null)}function v(t){if(!h)return;const e=t.dataset.row,l=t.dataset.column;null!=e&&null!=l&&function(t,e,l=o){if(t>d.length){const t=a-d.length;n(8,d=d.concat(b(t)))}n(8,d[t][e]=l,d)}(e,l)}function y(){n(5,f=[...f.slice(Math.max(f.length-20,0)),JSON.stringify(d)]),n(6,$=[])}function b(t){return[...Array(t)].map(t=>function(t){return[...Array(t)].map(t=>"transparent")}(u))}function x(){0!=f.length&&(n(6,$=[...$,JSON.stringify(d)]),n(8,d=JSON.parse(f.pop())),n(5,f))}function w(){0!=$.length&&(n(5,f=[...f,JSON.stringify(d)]),n(8,d=JSON.parse($.pop())),n(6,$))}function k(t){n(1,o=t)}function S(){const t=prompt("Give us a name",c||"");null!=t&&0!=t.trim().length&&(p(r,l[t]={name:t,gridSize:i,width:u,height:a,data:d,showGrid:m,png:wt(d,u,a)},l),n(0,c=t))}function N(t){let e=JSON.parse(JSON.stringify(l[t]));n(8,d=e.data),n(2,i=e.gridSize),n(4,u=e.width||e.data[0].length),n(3,a=e.height||e.data.length),n(7,m=e.showGrid||m),n(5,f=[]),n(6,$=[]),n(0,c=t)}function M(t){confirm(`Are you sure you want to delete ${t}?`)&&l.hasOwnProperty(t)&&(delete l[t],r.set(l))}g(!1);let C,j,E,D;return t.$$.update=()=>{256&t.$$.dirty[1]&&n(9,C=Object.keys(l)),280&t.$$.dirty[0]&&n(10,j=wt(d,u,a)),8&t.$$.dirty[0]&&n(11,E=[...Array(a)].map((t,e)=>e)),16&t.$$.dirty[0]&&n(12,D=[...Array(u)].map((t,e)=>e))},[c,o,i,a,u,f,$,m,d,C,j,E,D,r,["transparent","white","rgb(204, 204, 204)","rgb(160, 164, 160)","rgb(102, 102, 102)","rgb(51, 51, 51)","black","rgb(119, 59, 11)","blue","pink","yellow","orange","red","purple","teal","green","rgb(40, 40, 184)","rgb(40, 80, 224)","rgb(80, 80, 248)","rgb(120, 124, 248)","rgb(160, 0, 16)","rgb(248, 0, 32)","rgb(208, 124, 96)","rgb(248, 208, 176)","red","rgb(253, 240, 232)","rgb(245, 222, 208)","rgb(220, 201, 187)","rgb(197, 179, 167)","rgb(186, 167, 153)","rgb(146, 129, 119)","rgb(120, 107, 99)","rgb(80, 68, 68)","rgb(122, 80, 55)","rgb(178, 105, 58)","rgb(203, 140, 97)","rgb(238, 187, 155)","rgb(75, 53, 39)"],g,function(t){t.altKey||0!==t.button?n(1,o=t.target.style.fill):(y(),h=!0,v(t.target))},function(t){h=!1},v,x,w,k,S,N,M,function(t){switch(t.code){case"KeyZ":t.ctrlKey&&x();break;case"KeyY":t.ctrlKey&&w()}},function(){n(8,d=d.slice(0,a).reverse())},function(){n(8,d=d.map(t=>t.slice(0,u).reverse()))},function(e){A(t,e)},t=>N(t),t=>M(t),()=>S(),function(){i=O(this.value),n(2,i)},function(){a=O(this.value),n(3,a)},function(){u=O(this.value),n(4,u)},function(){m=this.checked,n(7,m)},t=>k(t),t=>v(t.target)]}class ne extends at{constructor(t){super(),st(this,t,ee,Zt,o,{},[-1,-1])}}function le(t,e,n){const l=t.slice();return l[8]=e[n],l}function re(t){let e,n,l,r,c,o;function i(...e){return t[6](t[8],...e)}return n=new Ct({props:{name:t[8],spin:t[1]}}),{c(){e=g("div"),ct(n.$$.fragment),l=b(),S(e,"class","svelte-1u0b3hs"),j(e,"active",t[0]==t[8])},m(t,s){m(t,e,s),ot(n,e,null),$(e,l),r=!0,c||(o=w(e,"click",i),c=!0)},p(l,r){t=l;const c={};4&r&&(c.name=t[8]),2&r&&(c.spin=t[1]),n.$set(c),5&r&&j(e,"active",t[0]==t[8])},i(t){r||(Z(n.$$.fragment,t),r=!0)},o(t){tt(n.$$.fragment,t),r=!1},d(t){t&&d(e),it(n),c=!1,o()}}}function ce(t){let e,n,l,r,c;const o=t[5].default,i=a(o,t,t[4],null),s=i||function(t){let e;return{c(){e=y("Graphic")},m(t,n){m(t,e,n)},d(t){t&&d(e)}}}();let u=t[2],p=[];for(let e=0;e<u.length;e+=1)p[e]=re(le(t,u,e));const v=t=>tt(p[t],1,1,()=>{p[t]=null});return{c(){e=g("div"),n=g("label"),s&&s.c(),l=b(),r=g("div");for(let t=0;t<p.length;t+=1)p[t].c();S(n,"for","graphic"),S(r,"class","options svelte-1u0b3hs"),S(e,"class","form-group svelte-1u0b3hs")},m(t,o){m(t,e,o),$(e,n),s&&s.m(n,null),$(e,l),$(e,r);for(let t=0;t<p.length;t+=1)p[t].m(r,null);c=!0},p(t,[e]){if(i&&i.p&&16&e&&f(i,o,t,t[4],e,null,null),7&e){let n;for(u=t[2],n=0;n<u.length;n+=1){const l=le(t,u,n);p[n]?(p[n].p(l,e),Z(p[n],1)):(p[n]=re(l),p[n].c(),Z(p[n],1),p[n].m(r,null))}for(Y(),n=u.length;n<p.length;n+=1)v(n);Q()}},i(t){if(!c){Z(s,t);for(let t=0;t<u.length;t+=1)Z(p[t]);c=!0}},o(t){tt(s,t),p=p.filter(Boolean);for(let t=0;t<p.length;t+=1)tt(p[t]);c=!1},d(t){t&&d(e),s&&s.d(t),h(p,t)}}}function oe(t,e,n){let l;s(t,St,t=>n(7,l=t));let{value:r=null}=e,{filter:c=null}=e,{spin:o=!1}=e,{$$slots:i={},$$scope:a}=e;let u;return t.$$set=t=>{"value"in t&&n(0,r=t.value),"filter"in t&&n(3,c=t.filter),"spin"in t&&n(1,o=t.spin),"$$scope"in t&&n(4,a=t.$$scope)},t.$$.update=()=>{136&t.$$.dirty&&n(2,u=Object.keys(l).filter(t=>null==c||c(l[t])))},[r,o,u,c,a,i,t=>n(0,r=t)]}class ie extends at{constructor(t){super(),st(this,t,oe,ce,o,{value:0,filter:3,spin:1})}}function se(t){let e,n,l,r,c,o,i;const s=t[3].default,u=a(s,t,t[2],null);return{c(){e=g("div"),n=g("label"),u&&u.c(),l=b(),r=g("input"),S(n,"for",t[1]),S(r,"name",t[1]),S(r,"id",t[1]),S(r,"type","text"),S(r,"class","form-control"),S(e,"class","form-group")},m(s,a){m(s,e,a),$(e,n),u&&u.m(n,null),$(e,l),$(e,r),M(r,t[0]),c=!0,o||(i=w(r,"input",t[4]),o=!0)},p(t,[e]){u&&u.p&&4&e&&f(u,s,t,t[2],e,null,null),(!c||2&e)&&S(n,"for",t[1]),(!c||2&e)&&S(r,"name",t[1]),(!c||2&e)&&S(r,"id",t[1]),1&e&&r.value!==t[0]&&M(r,t[0])},i(t){c||(Z(u,t),c=!0)},o(t){tt(u,t),c=!1},d(t){t&&d(e),u&&u.d(t),o=!1,i()}}}function ae(t,e,n){let{value:l=null}=e,{name:r="text"}=e,{$$slots:c={},$$scope:o}=e;return t.$$set=t=>{"value"in t&&n(0,l=t.value),"name"in t&&n(1,r=t.name),"$$scope"in t&&n(2,o=t.$$scope)},[l,r,o,c,function(){l=this.value,n(0,l)}]}class ue extends at{constructor(t){super(),st(this,t,ae,se,o,{value:0,name:1})}}function fe(t){let e,n,l,r,c,o,i,s;const u=t[3].default,p=a(u,t,t[2],null);return{c(){e=g("div"),n=g("div"),l=g("input"),r=b(),c=g("label"),p&&p.c(),S(l,"name",t[1]),S(l,"id",t[1]),S(l,"type","checkbox"),S(l,"class","form-check-input"),S(c,"class","form-check-label"),S(c,"for",t[1]),S(n,"class","form-check"),S(e,"class","form-group")},m(a,u){m(a,e,u),$(e,n),$(n,l),l.checked=t[0],$(n,r),$(n,c),p&&p.m(c,null),o=!0,i||(s=w(l,"change",t[4]),i=!0)},p(t,[e]){(!o||2&e)&&S(l,"name",t[1]),(!o||2&e)&&S(l,"id",t[1]),1&e&&(l.checked=t[0]),p&&p.p&&4&e&&f(p,u,t,t[2],e,null,null),(!o||2&e)&&S(c,"for",t[1])},i(t){o||(Z(p,t),o=!0)},o(t){tt(p,t),o=!1},d(t){t&&d(e),p&&p.d(t),i=!1,s()}}}function pe(t,e,n){let{checked:l=null}=e,{name:r="check"}=e,{$$slots:c={},$$scope:o}=e;return t.$$set=t=>{"checked"in t&&n(0,l=t.checked),"name"in t&&n(1,r=t.name),"$$scope"in t&&n(2,o=t.$$scope)},[l,r,o,c,function(){l=this.checked,n(0,l)}]}class $e extends at{constructor(t){super(),st(this,t,pe,fe,o,{checked:0,name:1})}}function me(t){let e,n,l,r,c,o,i;const s=t[6].default,u=a(s,t,t[5],null);return{c(){e=g("div"),n=g("label"),u&&u.c(),l=b(),r=g("input"),S(n,"for",t[1]),S(r,"name",t[1]),S(r,"id",t[1]),S(r,"type","number"),S(r,"min",t[2]),S(r,"max",t[3]),S(r,"step",t[4]),S(r,"class","form-control"),S(e,"class","form-group")},m(s,a){m(s,e,a),$(e,n),u&&u.m(n,null),$(e,l),$(e,r),M(r,t[0]),c=!0,o||(i=w(r,"input",t[7]),o=!0)},p(t,[e]){u&&u.p&&32&e&&f(u,s,t,t[5],e,null,null),(!c||2&e)&&S(n,"for",t[1]),(!c||2&e)&&S(r,"name",t[1]),(!c||2&e)&&S(r,"id",t[1]),(!c||4&e)&&S(r,"min",t[2]),(!c||8&e)&&S(r,"max",t[3]),(!c||16&e)&&S(r,"step",t[4]),1&e&&O(r.value)!==t[0]&&M(r,t[0])},i(t){c||(Z(u,t),c=!0)},o(t){tt(u,t),c=!1},d(t){t&&d(e),u&&u.d(t),o=!1,i()}}}function de(t,e,n){let{value:l=null}=e,{name:r="num"}=e,{min:c=null}=e,{max:o=null}=e,{step:i=1}=e,{$$slots:s={},$$scope:a}=e;return t.$$set=t=>{"value"in t&&n(0,l=t.value),"name"in t&&n(1,r=t.name),"min"in t&&n(2,c=t.min),"max"in t&&n(3,o=t.max),"step"in t&&n(4,i=t.step),"$$scope"in t&&n(5,a=t.$$scope)},[l,r,c,o,i,a,s,function(){l=O(this.value),n(0,l)}]}class he extends at{constructor(t){super(),st(this,t,de,me,o,{value:0,name:1,min:2,max:3,step:4})}}function ge(t){let e,n;const l=t[1].default,r=a(l,t,t[0],null),c=r||function(t){let e;return{c(){e=y("Save")},m(t,n){m(t,e,n)},d(t){t&&d(e)}}}();return{c(){e=g("button"),c&&c.c(),S(e,"type","submit"),S(e,"class","btn btn-success")},m(t,l){m(t,e,l),c&&c.m(e,null),n=!0},p(t,[e]){r&&r.p&&1&e&&f(r,l,t,t[0],e,null,null)},i(t){n||(Z(c,t),n=!0)},o(t){tt(c,t),n=!1},d(t){t&&d(e),c&&c.d(t)}}}function ve(t,e,n){let{$$slots:l={},$$scope:r}=e;return t.$$set=t=>{"$$scope"in t&&n(0,r=t.$$scope)},[r,l]}class ye extends at{constructor(t){super(),st(this,t,ve,ge,o,{})}}const be=t=>({}),xe=t=>({});function we(t){let e,n,l,r,c,o,i,s,u,p;const h=t[1].default,v=a(h,t,t[0],null);o=new ye({});const y=t[1].buttons,x=a(y,t,t[0],xe);return{c(){e=g("form"),n=g("div"),l=g("div"),v&&v.c(),r=b(),c=g("div"),ct(o.$$.fragment),i=b(),x&&x.c(),S(l,"class","card-body"),S(c,"class","card-footer"),S(n,"class","card")},m(a,f){m(a,e,f),$(e,n),$(n,l),v&&v.m(l,null),$(n,r),$(n,c),ot(o,c,null),$(c,i),x&&x.m(c,null),s=!0,u||(p=w(e,"submit",k(t[2])),u=!0)},p(t,[e]){v&&v.p&&1&e&&f(v,h,t,t[0],e,null,null),x&&x.p&&1&e&&f(x,y,t,t[0],e,be,xe)},i(t){s||(Z(v,t),Z(o.$$.fragment,t),Z(x,t),s=!0)},o(t){tt(v,t),tt(o.$$.fragment,t),tt(x,t),s=!1},d(t){t&&d(e),v&&v.d(t),it(o),x&&x.d(t),u=!1,p()}}}function ke(t,e,n){let{$$slots:l={},$$scope:r}=e;return t.$$set=t=>{"$$scope"in t&&n(0,r=t.$$scope)},[r,l,function(e){A(t,e)}]}class Se extends at{constructor(t){super(),st(this,t,ke,we,o,{})}}var Oe=kt("blocks",{});function Ne(t){let e;return{c(){e=y("Name")},m(t,n){m(t,e,n)},d(t){t&&d(e)}}}function Me(t){let e;return{c(){e=y("Graphic (must be 20x20)")},m(t,n){m(t,e,n)},d(t){t&&d(e)}}}function Ce(t){let e;return{c(){e=y("Solid?")},m(t,n){m(t,e,n)},d(t){t&&d(e)}}}function je(t){let e;return{c(){e=y("Throw things that touch it?")},m(t,n){m(t,e,n)},d(t){t&&d(e)}}}function Ee(t){let e;return{c(){e=y("DPS (when players or enemies touch this block, how much damage should they take per second?)")},m(t,n){m(t,e,n)},d(t){t&&d(e)}}}function De(e){let n,l,r;return{c(){n=g("button"),n.textContent="Delete",S(n,"type","button"),S(n,"class","btn btn-danger")},m(t,c){m(t,n,c),l||(r=w(n,"click",e[11]),l=!0)},p:t,d(t){t&&d(n),l=!1,r()}}}function _e(t){let e,n=!t[1]&&De(t);return{c(){e=g("span"),n&&n.c(),S(e,"slot","buttons")},m(t,l){m(t,e,l),n&&n.m(e,null)},p(t,l){t[1]?n&&(n.d(1),n=null):n?n.p(t,l):(n=De(t),n.c(),n.m(e,null))},d(t){t&&d(e),n&&n.d()}}}function He(t){let e,n,l,r,c,o,i,s,a,u,f,p,$,h,g,v;function y(e){t[6].call(null,e)}let x={name:"name",$$slots:{default:[Ne]},$$scope:{ctx:t}};function w(e){t[7].call(null,e)}void 0!==t[0].name&&(x.value=t[0].name),e=new ue({props:x}),V.push(()=>rt(e,"value",y));let k={filter:Ve,$$slots:{default:[Me]},$$scope:{ctx:t}};function S(e){t[8].call(null,e)}void 0!==t[0].graphic&&(k.value=t[0].graphic),r=new ie({props:k}),V.push(()=>rt(r,"value",w));let O={name:"solid",$$slots:{default:[Ce]},$$scope:{ctx:t}};function N(e){t[9].call(null,e)}void 0!==t[0].solid&&(O.checked=t[0].solid),i=new $e({props:O}),V.push(()=>rt(i,"checked",S));let M={name:"throwOnTouch",$$slots:{default:[je]},$$scope:{ctx:t}};function C(e){t[10].call(null,e)}void 0!==t[0].throwOnTouch&&(M.checked=t[0].throwOnTouch),u=new $e({props:M}),V.push(()=>rt(u,"checked",N));let j={name:"dps",$$slots:{default:[Ee]},$$scope:{ctx:t}};return void 0!==t[0].dps&&(j.value=t[0].dps),$=new he({props:j}),V.push(()=>rt($,"value",C)),{c(){ct(e.$$.fragment),l=b(),ct(r.$$.fragment),o=b(),ct(i.$$.fragment),a=b(),ct(u.$$.fragment),p=b(),ct($.$$.fragment),g=b()},m(t,n){ot(e,t,n),m(t,l,n),ot(r,t,n),m(t,o,n),ot(i,t,n),m(t,a,n),ot(u,t,n),m(t,p,n),ot($,t,n),m(t,g,n),v=!0},p(t,l){const o={};32768&l&&(o.$$scope={dirty:l,ctx:t}),!n&&1&l&&(n=!0,o.value=t[0].name,P(()=>n=!1)),e.$set(o);const a={};32768&l&&(a.$$scope={dirty:l,ctx:t}),!c&&1&l&&(c=!0,a.value=t[0].graphic,P(()=>c=!1)),r.$set(a);const p={};32768&l&&(p.$$scope={dirty:l,ctx:t}),!s&&1&l&&(s=!0,p.checked=t[0].solid,P(()=>s=!1)),i.$set(p);const m={};32768&l&&(m.$$scope={dirty:l,ctx:t}),!f&&1&l&&(f=!0,m.checked=t[0].throwOnTouch,P(()=>f=!1)),u.$set(m);const d={};32768&l&&(d.$$scope={dirty:l,ctx:t}),!h&&1&l&&(h=!0,d.value=t[0].dps,P(()=>h=!1)),$.$set(d)},i(t){v||(Z(e.$$.fragment,t),Z(r.$$.fragment,t),Z(i.$$.fragment,t),Z(u.$$.fragment,t),Z($.$$.fragment,t),v=!0)},o(t){tt(e.$$.fragment,t),tt(r.$$.fragment,t),tt(i.$$.fragment,t),tt(u.$$.fragment,t),tt($.$$.fragment,t),v=!1},d(t){it(e,t),t&&d(l),it(r,t),t&&d(o),it(i,t),t&&d(a),it(u,t),t&&d(p),it($,t),t&&d(g)}}}function Ae(t){let e,n;return e=new Se({props:{$$slots:{default:[He],buttons:[_e]},$$scope:{ctx:t}}}),e.$on("submit",t[3]),{c(){ct(e.$$.fragment)},m(t,l){ot(e,t,l),n=!0},p(t,n){const l={};32771&n&&(l.$$scope={dirty:n,ctx:t}),e.$set(l)},i(t){n||(Z(e.$$.fragment,t),n=!0)},o(t){tt(e.$$.fragment,t),n=!1},d(t){it(e,t)}}}function Je(t){let e,n;return e=new Rt({props:{tab:"blocks",activeName:t[0].name,store:t[2],$$slots:{default:[Ae]},$$scope:{ctx:t}}}),{c(){ct(e.$$.fragment)},m(t,l){ot(e,t,l),n=!0},p(t,[n]){const l={};1&n&&(l.activeName=t[0].name),4&n&&(l.store=t[2]),32771&n&&(l.$$scope={dirty:n,ctx:t}),e.$set(l)},i(t){n||(Z(e.$$.fragment,t),n=!0)},o(t){tt(e.$$.fragment,t),n=!1},d(t){it(e,t)}}}const Ve=t=>20==t.width&&20==t.height;function Re(t,e,n){let l;s(t,Oe,t=>n(2,l=t));let r,{params:c={}}=e;function o(t){confirm(`Are you sure you want to delete "${t}"?`)&&(delete l[t],Oe.set(l),yt("/level-builder/blocks/new"))}let i,a;return t.$$set=t=>{"params"in t&&n(5,c=t.params)},t.$$.update=()=>{var e;32&t.$$.dirty&&n(12,i=decodeURIComponent(c.name)||"new"),4096&t.$$.dirty&&("new"==i?n(0,r={name:"",solid:!0,throwOnTouch:!1,dps:0}):(e=i,l.hasOwnProperty(e)&&n(0,r=JSON.parse(JSON.stringify(l[e]))))),4096&t.$$.dirty&&n(1,a="new"==i)},[r,a,l,function(){p(Oe,l[r.name]=JSON.parse(JSON.stringify(r)),l),yt("/level-builder/blocks/"+encodeURIComponent(r.name))},o,c,function(t){r.name=t,n(0,r)},function(t){r.graphic=t,n(0,r)},function(t){r.solid=t,n(0,r)},function(t){r.throwOnTouch=t,n(0,r)},function(t){r.dps=t,n(0,r)},()=>o(r.name)]}class Ie extends at{constructor(t){super(),st(this,t,Re,Je,o,{params:5})}}var Te=kt("characters",{});function qe(t){let e;return{c(){e=y("Name")},m(t,n){m(t,e,n)},d(t){t&&d(e)}}}function Fe(t){let e;return{c(){e=y("Standing still graphic")},m(t,n){m(t,e,n)},d(t){t&&d(e)}}}function Ke(t){let e;return{c(){e=y("Spinning graphic")},m(t,n){m(t,e,n)},d(t){t&&d(e)}}}function Le(t){let e;return{c(){e=y("Max velocity")},m(t,n){m(t,e,n)},d(t){t&&d(e)}}}function Pe(t){let e;return{c(){e=y("Jump velocity")},m(t,n){m(t,e,n)},d(t){t&&d(e)}}}function Ue(t){let e;return{c(){e=y("Gravity multiplier")},m(t,n){m(t,e,n)},d(t){t&&d(e)}}}function ze(t){let e;return{c(){e=y("Fall damage multiplier")},m(t,n){m(t,e,n)},d(t){t&&d(e)}}}function Be(t){let e;return{c(){e=y("Max health")},m(t,n){m(t,e,n)},d(t){t&&d(e)}}}function Ge(t){let e;return{c(){e=y("DPS (when in contact with enemies - we will replace this with abilities later)")},m(t,n){m(t,e,n)},d(t){t&&d(e)}}}function We(t){let e;return{c(){e=y("Can fly?")},m(t,n){m(t,e,n)},d(t){t&&d(e)}}}function Xe(e){let n,l,r;return{c(){n=g("button"),n.textContent="Delete",S(n,"type","button"),S(n,"class","btn btn-danger")},m(t,c){m(t,n,c),l||(r=w(n,"click",e[17]),l=!0)},p:t,d(t){t&&d(n),l=!1,r()}}}function Ye(t){let e,n=!t[1]&&Xe(t);return{c(){e=g("span"),n&&n.c(),S(e,"slot","buttons")},m(t,l){m(t,e,l),n&&n.m(e,null)},p(t,l){t[1]?n&&(n.d(1),n=null):n?n.p(t,l):(n=Xe(t),n.c(),n.m(e,null))},d(t){t&&d(e),n&&n.d()}}}function Qe(t){let e,n,l,r,c,o,i,s,a,u,f,p,$,h,g,v,y,x,w,k,S,O,N,M,C,j,E,D,_,H,A;function J(e){t[7].call(null,e)}let R={name:"name",$$slots:{default:[qe]},$$scope:{ctx:t}};function I(e){t[8].call(null,e)}void 0!==t[0].name&&(R.value=t[0].name),e=new ue({props:R}),V.push(()=>rt(e,"value",J));let T={filter:t[3],$$slots:{default:[Fe]},$$scope:{ctx:t}};function q(e){t[9].call(null,e)}void 0!==t[0].graphicStill&&(T.value=t[0].graphicStill),r=new ie({props:T}),V.push(()=>rt(r,"value",I));let F={filter:t[3],spin:!0,$$slots:{default:[Ke]},$$scope:{ctx:t}};function K(e){t[10].call(null,e)}void 0!==t[0].graphicSpinning&&(F.value=t[0].graphicSpinning),i=new ie({props:F}),V.push(()=>rt(i,"value",q));let L={name:"maxVelocity",min:0,$$slots:{default:[Le]},$$scope:{ctx:t}};function U(e){t[11].call(null,e)}void 0!==t[0].maxVelocity&&(L.value=t[0].maxVelocity),u=new he({props:L}),V.push(()=>rt(u,"value",K));let z={name:"jumpVelocity",min:0,$$slots:{default:[Pe]},$$scope:{ctx:t}};function B(e){t[12].call(null,e)}void 0!==t[0].jumpVelocity&&(z.value=t[0].jumpVelocity),$=new he({props:z}),V.push(()=>rt($,"value",U));let G={name:"gravityMultiplier",min:0,max:2,step:.1,$$slots:{default:[Ue]},$$scope:{ctx:t}};function W(e){t[13].call(null,e)}void 0!==t[0].gravityMultiplier&&(G.value=t[0].gravityMultiplier),v=new he({props:G}),V.push(()=>rt(v,"value",B));let X={name:"fallDamageMultiplier",min:0,max:1,step:.1,$$slots:{default:[ze]},$$scope:{ctx:t}};function Y(e){t[14].call(null,e)}void 0!==t[0].fallDamageMultiplier&&(X.value=t[0].fallDamageMultiplier),w=new he({props:X}),V.push(()=>rt(w,"value",W));let Q={name:"maxHealth",$$slots:{default:[Be]},$$scope:{ctx:t}};function et(e){t[15].call(null,e)}void 0!==t[0].maxHealth&&(Q.value=t[0].maxHealth),O=new he({props:Q}),V.push(()=>rt(O,"value",Y));let nt={name:"dps",$$slots:{default:[Ge]},$$scope:{ctx:t}};function lt(e){t[16].call(null,e)}void 0!==t[0].dps&&(nt.value=t[0].dps),C=new he({props:nt}),V.push(()=>rt(C,"value",et));let st={name:"canFly",$$slots:{default:[We]},$$scope:{ctx:t}};return void 0!==t[0].canFly&&(st.checked=t[0].canFly),D=new $e({props:st}),V.push(()=>rt(D,"checked",lt)),{c(){ct(e.$$.fragment),l=b(),ct(r.$$.fragment),o=b(),ct(i.$$.fragment),a=b(),ct(u.$$.fragment),p=b(),ct($.$$.fragment),g=b(),ct(v.$$.fragment),x=b(),ct(w.$$.fragment),S=b(),ct(O.$$.fragment),M=b(),ct(C.$$.fragment),E=b(),ct(D.$$.fragment),H=b()},m(t,n){ot(e,t,n),m(t,l,n),ot(r,t,n),m(t,o,n),ot(i,t,n),m(t,a,n),ot(u,t,n),m(t,p,n),ot($,t,n),m(t,g,n),ot(v,t,n),m(t,x,n),ot(w,t,n),m(t,S,n),ot(O,t,n),m(t,M,n),ot(C,t,n),m(t,E,n),ot(D,t,n),m(t,H,n),A=!0},p(t,l){const o={};2097152&l&&(o.$$scope={dirty:l,ctx:t}),!n&&1&l&&(n=!0,o.value=t[0].name,P(()=>n=!1)),e.$set(o);const a={};2097152&l&&(a.$$scope={dirty:l,ctx:t}),!c&&1&l&&(c=!0,a.value=t[0].graphicStill,P(()=>c=!1)),r.$set(a);const p={};2097152&l&&(p.$$scope={dirty:l,ctx:t}),!s&&1&l&&(s=!0,p.value=t[0].graphicSpinning,P(()=>s=!1)),i.$set(p);const m={};2097152&l&&(m.$$scope={dirty:l,ctx:t}),!f&&1&l&&(f=!0,m.value=t[0].maxVelocity,P(()=>f=!1)),u.$set(m);const d={};2097152&l&&(d.$$scope={dirty:l,ctx:t}),!h&&1&l&&(h=!0,d.value=t[0].jumpVelocity,P(()=>h=!1)),$.$set(d);const g={};2097152&l&&(g.$$scope={dirty:l,ctx:t}),!y&&1&l&&(y=!0,g.value=t[0].gravityMultiplier,P(()=>y=!1)),v.$set(g);const b={};2097152&l&&(b.$$scope={dirty:l,ctx:t}),!k&&1&l&&(k=!0,b.value=t[0].fallDamageMultiplier,P(()=>k=!1)),w.$set(b);const x={};2097152&l&&(x.$$scope={dirty:l,ctx:t}),!N&&1&l&&(N=!0,x.value=t[0].maxHealth,P(()=>N=!1)),O.$set(x);const S={};2097152&l&&(S.$$scope={dirty:l,ctx:t}),!j&&1&l&&(j=!0,S.value=t[0].dps,P(()=>j=!1)),C.$set(S);const M={};2097152&l&&(M.$$scope={dirty:l,ctx:t}),!_&&1&l&&(_=!0,M.checked=t[0].canFly,P(()=>_=!1)),D.$set(M)},i(t){A||(Z(e.$$.fragment,t),Z(r.$$.fragment,t),Z(i.$$.fragment,t),Z(u.$$.fragment,t),Z($.$$.fragment,t),Z(v.$$.fragment,t),Z(w.$$.fragment,t),Z(O.$$.fragment,t),Z(C.$$.fragment,t),Z(D.$$.fragment,t),A=!0)},o(t){tt(e.$$.fragment,t),tt(r.$$.fragment,t),tt(i.$$.fragment,t),tt(u.$$.fragment,t),tt($.$$.fragment,t),tt(v.$$.fragment,t),tt(w.$$.fragment,t),tt(O.$$.fragment,t),tt(C.$$.fragment,t),tt(D.$$.fragment,t),A=!1},d(t){it(e,t),t&&d(l),it(r,t),t&&d(o),it(i,t),t&&d(a),it(u,t),t&&d(p),it($,t),t&&d(g),it(v,t),t&&d(x),it(w,t),t&&d(S),it(O,t),t&&d(M),it(C,t),t&&d(E),it(D,t),t&&d(H)}}}function Ze(t){let e,n;return e=new Se({props:{$$slots:{default:[Qe],buttons:[Ye]},$$scope:{ctx:t}}}),e.$on("submit",t[4]),{c(){ct(e.$$.fragment)},m(t,l){ot(e,t,l),n=!0},p(t,n){const l={};2097155&n&&(l.$$scope={dirty:n,ctx:t}),e.$set(l)},i(t){n||(Z(e.$$.fragment,t),n=!0)},o(t){tt(e.$$.fragment,t),n=!1},d(t){it(e,t)}}}function tn(t){let e,n;return e=new Rt({props:{tab:"characters",activeName:t[0].name,store:t[2],$$slots:{default:[Ze]},$$scope:{ctx:t}}}),{c(){ct(e.$$.fragment)},m(t,l){ot(e,t,l),n=!0},p(t,[n]){const l={};1&n&&(l.activeName=t[0].name),4&n&&(l.store=t[2]),2097155&n&&(l.$$scope={dirty:n,ctx:t}),e.$set(l)},i(t){n||(Z(e.$$.fragment,t),n=!0)},o(t){tt(e.$$.fragment,t),n=!1},d(t){it(e,t)}}}function en(t,e,n){let l;s(t,Te,t=>n(2,l=t));let r,{params:c={}}=e;function o(t){confirm(`Are you sure you want to delete "${t}"?`)&&(delete l[t],Te.set(l),yt("/level-builder/characters/new"))}let i,a;return t.$$set=t=>{"params"in t&&n(6,c=t.params)},t.$$.update=()=>{var e;64&t.$$.dirty&&n(18,i=decodeURIComponent(c.name)||"new"),262144&t.$$.dirty&&("new"==i?n(0,r={graphicStill:null,graphicSpinning:null,name:"",maxVelocity:20,jumpVelocity:15,gravityMultiplier:1,fallDamageMultiplier:1,dps:120}):(e=i,l.hasOwnProperty(e)&&n(0,r=JSON.parse(JSON.stringify(l[e]))))),262144&t.$$.dirty&&n(1,a="new"==i)},[r,a,l,t=>20!=t.width||20!=t.height,function(){p(Te,l[r.name]=JSON.parse(JSON.stringify(r)),l),yt("/level-builder/characters/"+encodeURIComponent(r.name))},o,c,function(t){r.name=t,n(0,r)},function(t){r.graphicStill=t,n(0,r)},function(t){r.graphicSpinning=t,n(0,r)},function(t){r.maxVelocity=t,n(0,r)},function(t){r.jumpVelocity=t,n(0,r)},function(t){r.gravityMultiplier=t,n(0,r)},function(t){r.fallDamageMultiplier=t,n(0,r)},function(t){r.maxHealth=t,n(0,r)},function(t){r.dps=t,n(0,r)},function(t){r.canFly=t,n(0,r)},()=>o(r.name)]}class nn extends at{constructor(t){super(),st(this,t,en,tn,o,{params:6})}}var ln=kt("enemies",{});function rn(t){let e;return{c(){e=y("Name")},m(t,n){m(t,e,n)},d(t){t&&d(e)}}}function cn(t){let e;return{c(){e=y("Standing still graphic")},m(t,n){m(t,e,n)},d(t){t&&d(e)}}}function on(t){let e;return{c(){e=y("Max velocity")},m(t,n){m(t,e,n)},d(t){t&&d(e)}}}function sn(t){let e;return{c(){e=y("Jump velocity")},m(t,n){m(t,e,n)},d(t){t&&d(e)}}}function an(t){let e;return{c(){e=y("Gravity multiplier")},m(t,n){m(t,e,n)},d(t){t&&d(e)}}}function un(t){let e;return{c(){e=y("Fall damage multiplier")},m(t,n){m(t,e,n)},d(t){t&&d(e)}}}function fn(t){let e;return{c(){e=y("Max health")},m(t,n){m(t,e,n)},d(t){t&&d(e)}}}function pn(t){let e;return{c(){e=y("DPS (when in contact with player - we will replace this with abilities later)")},m(t,n){m(t,e,n)},d(t){t&&d(e)}}}function $n(e){let n,l,r;return{c(){n=g("button"),n.textContent="Delete",S(n,"type","button"),S(n,"class","btn btn-danger")},m(t,c){m(t,n,c),l||(r=w(n,"click",e[14]),l=!0)},p:t,d(t){t&&d(n),l=!1,r()}}}function mn(t){let e,n=!t[1]&&$n(t);return{c(){e=g("span"),n&&n.c(),S(e,"slot","buttons")},m(t,l){m(t,e,l),n&&n.m(e,null)},p(t,l){t[1]?n&&(n.d(1),n=null):n?n.p(t,l):(n=$n(t),n.c(),n.m(e,null))},d(t){t&&d(e),n&&n.d()}}}function dn(t){let e,n,l,r,c,o,i,s,a,u,f,p,$,h,g,v,y,x,w,k,S,O,N,M,C;function j(e){t[6].call(null,e)}let E={name:"name",$$slots:{default:[rn]},$$scope:{ctx:t}};function D(e){t[7].call(null,e)}void 0!==t[0].name&&(E.value=t[0].name),e=new ue({props:E}),V.push(()=>rt(e,"value",j));let _={filter:vn,$$slots:{default:[cn]},$$scope:{ctx:t}};function H(e){t[8].call(null,e)}void 0!==t[0].graphicStill&&(_.value=t[0].graphicStill),r=new ie({props:_}),V.push(()=>rt(r,"value",D));let A={name:"maxVelocity",min:0,$$slots:{default:[on]},$$scope:{ctx:t}};function J(e){t[9].call(null,e)}void 0!==t[0].maxVelocity&&(A.value=t[0].maxVelocity),i=new he({props:A}),V.push(()=>rt(i,"value",H));let R={name:"jumpVelocity",min:0,$$slots:{default:[sn]},$$scope:{ctx:t}};function I(e){t[10].call(null,e)}void 0!==t[0].jumpVelocity&&(R.value=t[0].jumpVelocity),u=new he({props:R}),V.push(()=>rt(u,"value",J));let T={name:"gravityMultiplier",min:0,max:2,step:.1,$$slots:{default:[an]},$$scope:{ctx:t}};function q(e){t[11].call(null,e)}void 0!==t[0].gravityMultiplier&&(T.value=t[0].gravityMultiplier),$=new he({props:T}),V.push(()=>rt($,"value",I));let F={name:"fallDamageMultiplier",min:0,max:1,step:.1,$$slots:{default:[un]},$$scope:{ctx:t}};function K(e){t[12].call(null,e)}void 0!==t[0].fallDamageMultiplier&&(F.value=t[0].fallDamageMultiplier),v=new he({props:F}),V.push(()=>rt(v,"value",q));let L={name:"maxHealth",$$slots:{default:[fn]},$$scope:{ctx:t}};function U(e){t[13].call(null,e)}void 0!==t[0].maxHealth&&(L.value=t[0].maxHealth),w=new he({props:L}),V.push(()=>rt(w,"value",K));let z={name:"dps",$$slots:{default:[pn]},$$scope:{ctx:t}};return void 0!==t[0].dps&&(z.value=t[0].dps),O=new he({props:z}),V.push(()=>rt(O,"value",U)),{c(){ct(e.$$.fragment),l=b(),ct(r.$$.fragment),o=b(),ct(i.$$.fragment),a=b(),ct(u.$$.fragment),p=b(),ct($.$$.fragment),g=b(),ct(v.$$.fragment),x=b(),ct(w.$$.fragment),S=b(),ct(O.$$.fragment),M=b()},m(t,n){ot(e,t,n),m(t,l,n),ot(r,t,n),m(t,o,n),ot(i,t,n),m(t,a,n),ot(u,t,n),m(t,p,n),ot($,t,n),m(t,g,n),ot(v,t,n),m(t,x,n),ot(w,t,n),m(t,S,n),ot(O,t,n),m(t,M,n),C=!0},p(t,l){const o={};262144&l&&(o.$$scope={dirty:l,ctx:t}),!n&&1&l&&(n=!0,o.value=t[0].name,P(()=>n=!1)),e.$set(o);const a={};262144&l&&(a.$$scope={dirty:l,ctx:t}),!c&&1&l&&(c=!0,a.value=t[0].graphicStill,P(()=>c=!1)),r.$set(a);const p={};262144&l&&(p.$$scope={dirty:l,ctx:t}),!s&&1&l&&(s=!0,p.value=t[0].maxVelocity,P(()=>s=!1)),i.$set(p);const m={};262144&l&&(m.$$scope={dirty:l,ctx:t}),!f&&1&l&&(f=!0,m.value=t[0].jumpVelocity,P(()=>f=!1)),u.$set(m);const d={};262144&l&&(d.$$scope={dirty:l,ctx:t}),!h&&1&l&&(h=!0,d.value=t[0].gravityMultiplier,P(()=>h=!1)),$.$set(d);const g={};262144&l&&(g.$$scope={dirty:l,ctx:t}),!y&&1&l&&(y=!0,g.value=t[0].fallDamageMultiplier,P(()=>y=!1)),v.$set(g);const b={};262144&l&&(b.$$scope={dirty:l,ctx:t}),!k&&1&l&&(k=!0,b.value=t[0].maxHealth,P(()=>k=!1)),w.$set(b);const x={};262144&l&&(x.$$scope={dirty:l,ctx:t}),!N&&1&l&&(N=!0,x.value=t[0].dps,P(()=>N=!1)),O.$set(x)},i(t){C||(Z(e.$$.fragment,t),Z(r.$$.fragment,t),Z(i.$$.fragment,t),Z(u.$$.fragment,t),Z($.$$.fragment,t),Z(v.$$.fragment,t),Z(w.$$.fragment,t),Z(O.$$.fragment,t),C=!0)},o(t){tt(e.$$.fragment,t),tt(r.$$.fragment,t),tt(i.$$.fragment,t),tt(u.$$.fragment,t),tt($.$$.fragment,t),tt(v.$$.fragment,t),tt(w.$$.fragment,t),tt(O.$$.fragment,t),C=!1},d(t){it(e,t),t&&d(l),it(r,t),t&&d(o),it(i,t),t&&d(a),it(u,t),t&&d(p),it($,t),t&&d(g),it(v,t),t&&d(x),it(w,t),t&&d(S),it(O,t),t&&d(M)}}}function hn(t){let e,n;return e=new Se({props:{$$slots:{default:[dn],buttons:[mn]},$$scope:{ctx:t}}}),e.$on("submit",t[3]),{c(){ct(e.$$.fragment)},m(t,l){ot(e,t,l),n=!0},p(t,n){const l={};262147&n&&(l.$$scope={dirty:n,ctx:t}),e.$set(l)},i(t){n||(Z(e.$$.fragment,t),n=!0)},o(t){tt(e.$$.fragment,t),n=!1},d(t){it(e,t)}}}function gn(t){let e,n;return e=new Rt({props:{tab:"enemies",activeName:t[0].name,store:t[2],$$slots:{default:[hn]},$$scope:{ctx:t}}}),{c(){ct(e.$$.fragment)},m(t,l){ot(e,t,l),n=!0},p(t,[n]){const l={};1&n&&(l.activeName=t[0].name),4&n&&(l.store=t[2]),262147&n&&(l.$$scope={dirty:n,ctx:t}),e.$set(l)},i(t){n||(Z(e.$$.fragment,t),n=!0)},o(t){tt(e.$$.fragment,t),n=!1},d(t){it(e,t)}}}const vn=t=>20!=t.width||20!=t.height;function yn(t,e,n){let l;s(t,ln,t=>n(2,l=t));let r,{params:c={}}=e;function o(t){confirm(`Are you sure you want to delete "${t}"?`)&&(delete l[t],ln.set(l),yt("/level-builder/enemies/new"))}let i,a;return t.$$set=t=>{"params"in t&&n(5,c=t.params)},t.$$.update=()=>{var e;32&t.$$.dirty&&n(15,i=decodeURIComponent(c.name)||"new"),32768&t.$$.dirty&&("new"==i?n(0,r={graphicStill:null,name:"",maxVelocity:20,jumpVelocity:15,gravityMultiplier:1,fallDamageMultiplier:1,dps:120}):(e=i,l.hasOwnProperty(e)&&n(0,r=JSON.parse(JSON.stringify(l[e]))))),32768&t.$$.dirty&&n(1,a="new"==i)},[r,a,l,function(){p(ln,l[r.name]=JSON.parse(JSON.stringify(r)),l),yt("/level-builder/enemies/"+encodeURIComponent(r.name))},o,c,function(t){r.name=t,n(0,r)},function(t){r.graphicStill=t,n(0,r)},function(t){r.maxVelocity=t,n(0,r)},function(t){r.jumpVelocity=t,n(0,r)},function(t){r.gravityMultiplier=t,n(0,r)},function(t){r.fallDamageMultiplier=t,n(0,r)},function(t){r.maxHealth=t,n(0,r)},function(t){r.dps=t,n(0,r)},()=>o(r.name)]}class bn extends at{constructor(t){super(),st(this,t,yn,gn,o,{params:5})}}function xn(t,e,n){const l=t.slice();return l[9]=e[n],l}function wn(t){let e,n,l,r,c,o;function i(...e){return t[6](t[9],...e)}return n=new Ct({props:{name:t[1][t[9]].graphicStill}}),{c(){e=g("div"),ct(n.$$.fragment),l=b(),S(e,"class","svelte-1773jdu"),j(e,"active",t[0].indexOf(t[9])>-1)},m(t,s){m(t,e,s),ot(n,e,null),$(e,l),r=!0,c||(o=w(e,"click",i),c=!0)},p(l,r){t=l;const c={};2&r&&(c.name=t[1][t[9]].graphicStill),n.$set(c),3&r&&j(e,"active",t[0].indexOf(t[9])>-1)},i(t){r||(Z(n.$$.fragment,t),r=!0)},o(t){tt(n.$$.fragment,t),r=!1},d(t){t&&d(e),it(n),c=!1,o()}}}function kn(t){let e,n,l,r,c;const o=t[5].default,i=a(o,t,t[4],null),s=i||function(t){let e;return{c(){e=y("Characters")},m(t,n){m(t,e,n)},d(t){t&&d(e)}}}();let u=Object.keys(t[1]),p=[];for(let e=0;e<u.length;e+=1)p[e]=wn(xn(t,u,e));const v=t=>tt(p[t],1,1,()=>{p[t]=null});return{c(){e=g("div"),n=g("label"),s&&s.c(),l=b(),r=g("div");for(let t=0;t<p.length;t+=1)p[t].c();S(n,"for","graphic"),S(r,"class","options svelte-1773jdu"),S(e,"class","form-group svelte-1773jdu")},m(t,o){m(t,e,o),$(e,n),s&&s.m(n,null),$(e,l),$(e,r);for(let t=0;t<p.length;t+=1)p[t].m(r,null);c=!0},p(t,[e]){if(i&&i.p&&16&e&&f(i,o,t,t[4],e,null,null),7&e){let n;for(u=Object.keys(t[1]),n=0;n<u.length;n+=1){const l=xn(t,u,n);p[n]?(p[n].p(l,e),Z(p[n],1)):(p[n]=wn(l),p[n].c(),Z(p[n],1),p[n].m(r,null))}for(Y(),n=u.length;n<p.length;n+=1)v(n);Q()}},i(t){if(!c){Z(s,t);for(let t=0;t<u.length;t+=1)Z(p[t]);c=!0}},o(t){tt(s,t),p=p.filter(Boolean);for(let t=0;t<p.length;t+=1)tt(p[t]);c=!1},d(t){t&&d(e),s&&s.d(t),h(p,t)}}}function Sn(t,e,n){let l,r;s(t,St,t=>n(8,l=t)),s(t,Te,t=>n(1,r=t));let{value:c=[]}=e,{filter:o=null}=e;function i(t){n(0,c=c.indexOf(t)>-1?c.filter(e=>e!=t):[...c,t].sort())}let{$$slots:a={},$$scope:u}=e;let f;return t.$$set=t=>{"value"in t&&n(0,c=t.value),"filter"in t&&n(3,o=t.filter),"$$scope"in t&&n(4,u=t.$$scope)},t.$$.update=()=>{264&t.$$.dirty&&(f=Object.keys(l).filter(t=>null==o||o(l[t])))},[c,r,i,o,u,a,t=>i(t)]}class On extends at{constructor(t){super(),st(this,t,Sn,kn,o,{value:0,filter:3})}}function Nn(e){let n,l,r,c,o,i,s,a=e[0]>0?`(${e[2]}%)`:"I am dead.";return{c(){n=g("div"),l=g("div"),r=b(),c=g("div"),o=y(e[1]),i=b(),s=y(a),S(l,"class","filled svelte-1frudy7"),C(l,"width",e[2]+"%"),C(l,"background-color",e[3]),S(c,"class","text svelte-1frudy7"),S(n,"class","health-bar svelte-1frudy7")},m(t,e){m(t,n,e),$(n,l),$(n,r),$(n,c),$(c,o),$(c,i),$(c,s)},p(t,[e]){4&e&&C(l,"width",t[2]+"%"),8&e&&C(l,"background-color",t[3]),2&e&&N(o,t[1]),5&e&&a!==(a=t[0]>0?`(${t[2]}%)`:"I am dead.")&&N(s,a)},i:t,o:t,d(t){t&&d(n)}}}function Mn(t,e,n){let l,r,c,{percent:o=100}=e,{health:i=100}=e,{maxHealth:s=100}=e;return t.$$set=t=>{"percent"in t&&n(4,o=t.percent),"health"in t&&n(0,i=t.health),"maxHealth"in t&&n(5,s=t.maxHealth)},t.$$.update=()=>{1&t.$$.dirty&&n(1,l=i>0?Math.round(i):0),33&t.$$.dirty&&n(4,o=Math.round(i/s*100,2)),16&t.$$.dirty&&n(2,r=o>0?o:0),16&t.$$.dirty&&n(3,c=o>75?"rgba(24, 197, 33, 0.5)":o>25?"rgba(245, 189, 36, 0.5)":"rgba(223, 22, 22, 0.5)")},[i,l,r,c,o,s]}class Cn extends at{constructor(t){super(),st(this,t,Mn,Nn,o,{percent:4,health:0,maxHealth:5})}}function jn(t){let e,n;return{c(){e=g("img"),S(e,"class","graphic"),e.src!==(n=t[6].png)&&S(e,"src",n),S(e,"alt",t[0]),C(e,"width",t[6].width*Dn+"px"),C(e,"height",t[6].height*Dn+"px"),C(e,"transform","scaleX("+t[5]+") rotate("+t[7]+"deg)")},m(t,n){m(t,e,n)},p(t,l){64&l&&e.src!==(n=t[6].png)&&S(e,"src",n),1&l&&S(e,"alt",t[0]),64&l&&C(e,"width",t[6].width*Dn+"px"),64&l&&C(e,"height",t[6].height*Dn+"px"),160&l&&C(e,"transform","scaleX("+t[5]+") rotate("+t[7]+"deg)")},d(t){t&&d(e)}}}function En(t){let e,n,l,r;n=new Cn({props:{health:t[4],maxHealth:t[1]}});let c=null!=t[6]&&jn(t);return{c(){e=g("div"),ct(n.$$.fragment),l=b(),c&&c.c(),S(e,"class","player svelte-wdnc19"),C(e,"left",t[3]+"px"),C(e,"bottom",t[2]+"px")},m(t,o){m(t,e,o),ot(n,e,null),$(e,l),c&&c.m(e,null),r=!0},p(t,[l]){const o={};16&l&&(o.health=t[4]),2&l&&(o.maxHealth=t[1]),n.$set(o),null!=t[6]?c?c.p(t,l):(c=jn(t),c.c(),c.m(e,null)):c&&(c.d(1),c=null),(!r||8&l)&&C(e,"left",t[3]+"px"),(!r||4&l)&&C(e,"bottom",t[2]+"px")},i(t){r||(Z(n.$$.fragment,t),r=!0)},o(t){tt(n.$$.fragment,t),r=!1},d(t){t&&d(e),it(n),c&&c.d()}}}const Dn=2;function _n(t,e,n){let l;s(t,St,t=>n(15,l=t));let r,c,{name:o}=e,{maxHealth:i}=e,{graphicStill:a}=e,{graphicSpinning:u}=e,{vx:f=0}=e,{vy:p=0}=e,{y:$=0}=e,{x:m=0}=e,{health:d}=e,{spinning:h=!1}=e,g=1,v=0,y=null;return t.$$set=t=>{"name"in t&&n(0,o=t.name),"maxHealth"in t&&n(1,i=t.maxHealth),"graphicStill"in t&&n(8,a=t.graphicStill),"graphicSpinning"in t&&n(9,u=t.graphicSpinning),"vx"in t&&n(10,f=t.vx),"vy"in t&&n(11,p=t.vy),"y"in t&&n(2,$=t.y),"x"in t&&n(3,m=t.x),"health"in t&&n(4,d=t.health),"spinning"in t&&n(12,h=t.spinning)},t.$$.update=()=>{37632&t.$$.dirty&&n(6,r=h&&null!=u?l[u]:null!=a?l[a]:null),1024&t.$$.dirty&&0!=f&&n(5,g=f>0?1:-1),28672&t.$$.dirty&&(h?n(14,y=setTimeout(()=>{n(13,v+=30)},25)):clearTimeout(y)),14336&t.$$.dirty&&n(7,c=h?v:-1*(5+(p>0?3*p:1.5*p)))},[o,i,$,m,d,g,r,c,a,u,f,p,h]}class Hn extends at{constructor(t){super(),st(this,t,_n,En,o,{name:0,maxHealth:1,graphicStill:8,graphicSpinning:9,vx:10,vy:11,y:2,x:3,health:4,spinning:12})}}function An(e){let n;return{c(){n=g("canvas"),S(n,"width",e[0]),S(n,"height",e[1])},m(t,l){m(t,n,l),e[6](n)},p(t,[e]){1&e&&S(n,"width",t[0]),2&e&&S(n,"height",t[1])},i:t,o:t,d(t){t&&d(n),e[6](null)}}}function Jn(t,e,n){let l,r,c;s(t,Oe,t=>n(9,l=t)),s(t,ln,t=>n(10,r=t)),s(t,St,t=>n(11,c=t));let{width:o=0}=e,{height:i=0}=e,{blocks:a=[]}=e,{enemies:u=null}=e,{playing:f=!1}=e;const p=H(),$={};let m,d;function h(t,e,n){let l=c[t],r=l.png,o=$[t];const s=()=>{const t=()=>d.drawImage(o,e,i-n-2*l.height);f?setTimeout(t,100):t()};if(null==o&&(o=new Image,o.src=r,$[t]=o),o.complete)s();else{const t=o.onload;o.onload=()=>{s(),t()}}}return t.$$set=t=>{"width"in t&&n(0,o=t.width),"height"in t&&n(1,i=t.height),"blocks"in t&&n(3,a=t.blocks),"enemies"in t&&n(4,u=t.enemies),"playing"in t&&n(5,f=t.playing)},t.$$.update=()=>{4&t.$$.dirty&&null!=m&&n(8,d=m.getContext("2d")),1823&t.$$.dirty&&null!=a&&null!=o&&null!=i&&null!=d&&(d.clearRect(0,0,o,i),a.forEach(t=>h(l[t.name].graphic,t.x,t.y)),null!=u&&u.forEach(t=>h(r[t.name].graphicStill,t.x,t.y)),p("draw",m))},[o,i,m,a,u,f,function(t){V[t?"unshift":"push"](()=>{m=t,n(2,m)})}]}class Vn extends at{constructor(t){super(),st(this,t,Jn,An,o,{width:0,height:1,blocks:3,enemies:4,playing:5})}}function Rn(t){let e,n,l,c;return{c(){e=g("img"),e.src!==(n=t[0].thumbnail)&&S(e,"src",n),S(e,"alt","level preview"),S(e,"class","level-preview svelte-10ex0b8"),C(e,"background",t[0].background),j(e,"grabbing",t[1])},m(n,r){m(n,e,r),l||(c=[w(e,"mousedown",k(t[2])),w(e,"mousemove",k(t[4])),w(e,"mouseup",k(t[3]))],l=!0)},p(t,l){1&l&&e.src!==(n=t[0].thumbnail)&&S(e,"src",n),1&l&&C(e,"background",t[0].background),2&l&&j(e,"grabbing",t[1])},d(t){t&&d(e),l=!1,r(c)}}}function In(e){let n,l=e[0]&&Rn(e);return{c(){l&&l.c(),n=x()},m(t,e){l&&l.m(t,e),m(t,n,e)},p(t,[e]){t[0]?l?l.p(t,e):(l=Rn(t),l.c(),l.m(n.parentNode,n)):l&&(l.d(1),l=null)},i:t,o:t,d(t){l&&l.d(t),t&&d(n)}}}function Tn(t,e,n){let{level:l}=e;const r=H();let c=!1;return t.$$set=t=>{"level"in t&&n(0,l=t.level)},[l,c,function(t){n(1,c=!0)},function(t){n(1,c=!1)},function(t){c&&r("pan",t.offsetX)}]}class qn extends at{constructor(t){super(),st(this,t,Tn,In,o,{level:0})}}function Fn(t,e,n){const l=t.slice();return l[31]=e[n],l}function Kn(t,e,n){const l=t.slice();return l[31]=e[n],l}function Ln(t){let e,n,l,r,c,o,i;function s(...e){return t[19](t[31],...e)}return n=new Ct({props:{name:t[9][t[31]].graphic}}),{c(){e=g("button"),ct(n.$$.fragment),l=b(),S(e,"type","button"),S(e,"class",r="btn btn-"+(t[31]==t[4]?"primary":"light")+" svelte-1l9uq66")},m(t,r){m(t,e,r),ot(n,e,null),$(e,l),c=!0,o||(i=w(e,"click",s),o=!0)},p(l,o){t=l;const i={};512&o[0]&&(i.name=t[9][t[31]].graphic),n.$set(i),(!c||528&o[0]&&r!==(r="btn btn-"+(t[31]==t[4]?"primary":"light")+" svelte-1l9uq66"))&&S(e,"class",r)},i(t){c||(Z(n.$$.fragment,t),c=!0)},o(t){tt(n.$$.fragment,t),c=!1},d(t){t&&d(e),it(n),o=!1,i()}}}function Pn(t){let e,n,l,r,c,o,i;function s(...e){return t[20](t[31],...e)}return n=new Ct({props:{name:t[10][t[31]].graphicStill}}),{c(){e=g("button"),ct(n.$$.fragment),l=b(),S(e,"type","button"),S(e,"class",r="btn btn-"+(t[31]==t[5]?"primary":"default")+" svelte-1l9uq66")},m(t,r){m(t,e,r),ot(n,e,null),$(e,l),c=!0,o||(i=w(e,"click",s),o=!0)},p(l,o){t=l;const i={};1024&o[0]&&(i.name=t[10][t[31]].graphicStill),n.$set(i),(!c||1056&o[0]&&r!==(r="btn btn-"+(t[31]==t[5]?"primary":"default")+" svelte-1l9uq66"))&&S(e,"class",r)},i(t){c||(Z(n.$$.fragment,t),c=!0)},o(t){tt(n.$$.fragment,t),c=!1},d(t){t&&d(e),it(n),o=!1,i()}}}function Un(t){let e,n,l,c,o,i,s,a,u,f,p,v,x,O,N,M,j;n=new qn({props:{level:{background:t[3],thumbnail:t[0]}}}),n.$on("pan",t[14]);let E=Object.keys(t[9]),D=[];for(let e=0;e<E.length;e+=1)D[e]=Ln(Kn(t,E,e));const _=t=>tt(D[t],1,1,()=>{D[t]=null});let H=Object.keys(t[10]),A=[];for(let e=0;e<H.length;e+=1)A[e]=Pn(Fn(t,H,e));const J=t=>tt(A[t],1,1,()=>{A[t]=null});return O=new Vn({props:{blocks:t[1],enemies:t[2],width:t[7],height:t[8]}}),O.$on("draw",t[11]),{c(){e=g("div"),ct(n.$$.fragment),l=b(),c=g("div"),o=g("div"),i=y("Blocks\r\n\t\t\t"),s=g("div");for(let t=0;t<D.length;t+=1)D[t].c();a=b(),u=g("div"),f=y("Enemies\r\n\t\t\t"),p=g("div");for(let t=0;t<A.length;t+=1)A[t].c();v=b(),x=g("div"),ct(O.$$.fragment),S(s,"class","btn-group svelte-1l9uq66"),S(o,"class","svelte-1l9uq66"),S(p,"class","btn-group svelte-1l9uq66"),S(u,"class","svelte-1l9uq66"),S(c,"class","tool-picker svelte-1l9uq66"),S(x,"class","level-container svelte-1l9uq66"),C(x,"background",t[3]),C(x,"height",t[8]+25+"px"),S(e,"class","drawing-tool svelte-1l9uq66")},m(r,d){m(r,e,d),ot(n,e,null),$(e,l),$(e,c),$(c,o),$(o,i),$(o,s);for(let t=0;t<D.length;t+=1)D[t].m(s,null);$(c,a),$(c,u),$(u,f),$(u,p);for(let t=0;t<A.length;t+=1)A[t].m(p,null);$(e,v),$(e,x),ot(O,x,null),t[21](x),N=!0,M||(j=[w(x,"mousedown",t[15]),w(x,"mouseup",t[17]),w(x,"mousemove",t[16]),w(x,"contextmenu",k(t[18]))],M=!0)},p(t,e){const l={};if(9&e[0]&&(l.level={background:t[3],thumbnail:t[0]}),n.$set(l),4624&e[0]){let n;for(E=Object.keys(t[9]),n=0;n<E.length;n+=1){const l=Kn(t,E,n);D[n]?(D[n].p(l,e),Z(D[n],1)):(D[n]=Ln(l),D[n].c(),Z(D[n],1),D[n].m(s,null))}for(Y(),n=E.length;n<D.length;n+=1)_(n);Q()}if(9248&e[0]){let n;for(H=Object.keys(t[10]),n=0;n<H.length;n+=1){const l=Fn(t,H,n);A[n]?(A[n].p(l,e),Z(A[n],1)):(A[n]=Pn(l),A[n].c(),Z(A[n],1),A[n].m(p,null))}for(Y(),n=H.length;n<A.length;n+=1)J(n);Q()}const r={};2&e[0]&&(r.blocks=t[1]),4&e[0]&&(r.enemies=t[2]),128&e[0]&&(r.width=t[7]),256&e[0]&&(r.height=t[8]),O.$set(r),(!N||8&e[0])&&C(x,"background",t[3]),(!N||256&e[0])&&C(x,"height",t[8]+25+"px")},i(t){if(!N){Z(n.$$.fragment,t);for(let t=0;t<E.length;t+=1)Z(D[t]);for(let t=0;t<H.length;t+=1)Z(A[t]);Z(O.$$.fragment,t),N=!0}},o(t){tt(n.$$.fragment,t),D=D.filter(Boolean);for(let t=0;t<D.length;t+=1)tt(D[t]);A=A.filter(Boolean);for(let t=0;t<A.length;t+=1)tt(A[t]);tt(O.$$.fragment,t),N=!1},d(l){l&&d(e),it(n),h(D,l),h(A,l),it(O),t[21](null),M=!1,r(j)}}}function zn(t,e,n){let l,r;s(t,Oe,t=>n(9,l=t)),s(t,ln,t=>n(10,r=t));let c,{background:o=null}=e,{thumbnail:i}=e,{blocks:a=[]}=e,{enemies:u=[]}=e,f=null,p=null,$=!1;function m(t){n(4,f=t),n(5,p=null)}function d(t){n(4,f=null),n(5,p=t)}function h(t){if($){const{x:e,y:c}=g(t);!function(t,e){if(function(t,e){n(1,a=a.filter(n=>n.x!=t||n.y!=e)),n(2,u=u.filter(n=>n.x!=t||n.y!=e))}(t,e),null!=f){l[f];n(1,a=[...a,{name:f,x:t,y:e,width:40,height:40}])}else if(null!=p){const l=r[p];n(2,u=[...u,{name:p,x:t,y:e,width:l.width,height:l.height}])}}(e,c)}}function g(t){t.target.closest(".level-container");return{x:40*Math.floor(t.offsetX/40),y:40*Math.floor((v-t.offsetY)/40)}}let v,y,b;return t.$$set=t=>{"background"in t&&n(3,o=t.background),"thumbnail"in t&&n(0,i=t.thumbnail),"blocks"in t&&n(1,a=t.blocks),"enemies"in t&&n(2,u=t.enemies)},t.$$.update=()=>{2&t.$$.dirty[0]&&null!=a&&a.some(t=>null!=t.png)&&n(1,a=a.map(t=>{const{png:e,...n}=t;return n})),2&t.$$.dirty[0]&&n(23,y=a.length>0?Math.max(...a.map(t=>t.x+t.width)):0),8388608&t.$$.dirty[0]&&n(7,b=Math.max(800,y+500))},n(8,v=600),[i,a,u,o,f,p,c,b,v,l,r,function(t){const e=t.detail;n(0,i=function(t,e,n){const l=document.createElement("canvas");return l.width=e,l.height=n,l.getContext("2d").drawImage(t,0,0,e,n),l.toDataURL("image/png")}(e,b/8,v/8))},m,d,function(t){const e=8*t.detail,n=Math.max(e-c.clientWidth/2,0);c.scroll(n,0)},function(t){(t.altKey||0!==t.button)&&(n(4,f=function(t){const{x:e,y:n}=g(t),l=a.find(t=>t.x==e&&t.y==n);return null==l?null:l.name}(t)),n(5,p=function(t){const{x:e,y:n}=g(t),l=u.find(t=>t.x==e&&t.y==n);return null==l?null:l.name}(t))),$=0===t.button,h(t)},h,function(t){$=!1},function(e){A(t,e)},t=>m(t),t=>d(t),function(t){V[t?"unshift":"push"](()=>{c=t,n(6,c)})}]}class Bn extends at{constructor(t){super(),st(this,t,zn,Un,o,{background:3,thumbnail:0,blocks:1,enemies:2},[-1,-1])}}var Gn=kt("levels",{});function Wn(t){let e,n;return e=new Rt({props:{tab:"levels",activeName:t[0].name,store:t[2],$$slots:{default:[nl]},$$scope:{ctx:t}}}),{c(){ct(e.$$.fragment)},m(t,l){ot(e,t,l),n=!0},p(t,n){const l={};1&n&&(l.activeName=t[0].name),4&n&&(l.store=t[2]),32771&n&&(l.$$scope={dirty:n,ctx:t}),e.$set(l)},i(t){n||(Z(e.$$.fragment,t),n=!0)},o(t){tt(e.$$.fragment,t),n=!1},d(t){it(e,t)}}}function Xn(t){let e;return{c(){e=y("Name")},m(t,n){m(t,e,n)},d(t){t&&d(e)}}}function Yn(t){let e;return{c(){e=y("Which characters can play this level?")},m(t,n){m(t,e,n)},d(t){t&&d(e)}}}function Qn(t){let e;return{c(){e=y("Background (any css background value)")},m(t,n){m(t,e,n)},d(t){t&&d(e)}}}function Zn(e){let n,l,r;return{c(){n=g("button"),n.textContent="Delete",S(n,"type","button"),S(n,"class","btn btn-danger")},m(t,c){m(t,n,c),l||(r=w(n,"click",e[4]),l=!0)},p:t,d(t){t&&d(n),l=!1,r()}}}function tl(t){let e,n=!t[1]&&Zn(t);return{c(){e=g("span"),n&&n.c(),S(e,"slot","buttons")},m(t,l){m(t,e,l),n&&n.m(e,null)},p(t,l){t[1]?n&&(n.d(1),n=null):n?n.p(t,l):(n=Zn(t),n.c(),n.m(e,null))},d(t){t&&d(e),n&&n.d()}}}function el(t){let e,n,l,r,c,o,i,s,a,u,f,p,$,h,g;function v(e){t[6].call(null,e)}let y={name:"name",$$slots:{default:[Xn]},$$scope:{ctx:t}};function x(e){t[7].call(null,e)}void 0!==t[0].name&&(y.value=t[0].name),e=new ue({props:y}),V.push(()=>rt(e,"value",v));let w={name:"playableCharacters",$$slots:{default:[Yn]},$$scope:{ctx:t}};function k(e){t[8].call(null,e)}void 0!==t[0].playableCharacters&&(w.value=t[0].playableCharacters),r=new On({props:w}),V.push(()=>rt(r,"value",x));let S={name:"background",$$slots:{default:[Qn]},$$scope:{ctx:t}};function O(e){t[9].call(null,e)}function N(e){t[10].call(null,e)}function M(e){t[11].call(null,e)}void 0!==t[0].background&&(S.value=t[0].background),i=new ue({props:S}),V.push(()=>rt(i,"value",k));let C={background:t[0].background};return void 0!==t[0].thumbnail&&(C.thumbnail=t[0].thumbnail),void 0!==t[0].blocks&&(C.blocks=t[0].blocks),void 0!==t[0].enemies&&(C.enemies=t[0].enemies),u=new Bn({props:C}),V.push(()=>rt(u,"thumbnail",O)),V.push(()=>rt(u,"blocks",N)),V.push(()=>rt(u,"enemies",M)),{c(){ct(e.$$.fragment),l=b(),ct(r.$$.fragment),o=b(),ct(i.$$.fragment),a=b(),ct(u.$$.fragment),h=b()},m(t,n){ot(e,t,n),m(t,l,n),ot(r,t,n),m(t,o,n),ot(i,t,n),m(t,a,n),ot(u,t,n),m(t,h,n),g=!0},p(t,l){const o={};32768&l&&(o.$$scope={dirty:l,ctx:t}),!n&&1&l&&(n=!0,o.value=t[0].name,P(()=>n=!1)),e.$set(o);const a={};32768&l&&(a.$$scope={dirty:l,ctx:t}),!c&&1&l&&(c=!0,a.value=t[0].playableCharacters,P(()=>c=!1)),r.$set(a);const m={};32768&l&&(m.$$scope={dirty:l,ctx:t}),!s&&1&l&&(s=!0,m.value=t[0].background,P(()=>s=!1)),i.$set(m);const d={};1&l&&(d.background=t[0].background),!f&&1&l&&(f=!0,d.thumbnail=t[0].thumbnail,P(()=>f=!1)),!p&&1&l&&(p=!0,d.blocks=t[0].blocks,P(()=>p=!1)),!$&&1&l&&($=!0,d.enemies=t[0].enemies,P(()=>$=!1)),u.$set(d)},i(t){g||(Z(e.$$.fragment,t),Z(r.$$.fragment,t),Z(i.$$.fragment,t),Z(u.$$.fragment,t),g=!0)},o(t){tt(e.$$.fragment,t),tt(r.$$.fragment,t),tt(i.$$.fragment,t),tt(u.$$.fragment,t),g=!1},d(t){it(e,t),t&&d(l),it(r,t),t&&d(o),it(i,t),t&&d(a),it(u,t),t&&d(h)}}}function nl(t){let e,n;return e=new Se({props:{$$slots:{default:[el],buttons:[tl]},$$scope:{ctx:t}}}),e.$on("submit",t[3]),{c(){ct(e.$$.fragment)},m(t,l){ot(e,t,l),n=!0},p(t,n){const l={};32771&n&&(l.$$scope={dirty:n,ctx:t}),e.$set(l)},i(t){n||(Z(e.$$.fragment,t),n=!0)},o(t){tt(e.$$.fragment,t),n=!1},d(t){it(e,t)}}}function ll(t){let e,n,l=null!=t[0]&&Wn(t);return{c(){l&&l.c(),e=x()},m(t,r){l&&l.m(t,r),m(t,e,r),n=!0},p(t,[n]){null!=t[0]?l?(l.p(t,n),1&n&&Z(l,1)):(l=Wn(t),l.c(),Z(l,1),l.m(e.parentNode,e)):l&&(Y(),tt(l,1,1,()=>{l=null}),Q())},i(t){n||(Z(l),n=!0)},o(t){tt(l),n=!1},d(t){l&&l.d(t),t&&d(e)}}}function rl(t,e,n){let l;s(t,Gn,t=>n(2,l=t));let r,c,o,{params:i={}}=e;return t.$$set=t=>{"params"in t&&n(5,i=t.params)},t.$$.update=()=>{32&t.$$.dirty&&n(12,c=decodeURIComponent(i.name)||"new"),4096&t.$$.dirty&&("new"==c?async function(){n(0,r=null),await K(),n(0,r={name:"",playableCharacters:[],background:"rgb(135, 206, 235)",blocks:[],enemies:[]})}():async function(t){l.hasOwnProperty(t)&&(n(0,r=null),await K(),n(0,r=JSON.parse(JSON.stringify(l[t]))))}(c)),4096&t.$$.dirty&&n(1,o="new"==c)},[r,o,l,function(){p(Gn,l[r.name]=JSON.parse(JSON.stringify(r)),l),yt("/level-builder/levels/"+encodeURIComponent(r.name))},function(){confirm(`Are you sure you want to delete "${r.name}"?`)&&(delete l[r.name],Gn.set(l),yt("/level-builder/levels/new"))},i,function(t){r.name=t,n(0,r)},function(t){r.playableCharacters=t,n(0,r)},function(t){r.background=t,n(0,r)},function(t){r.thumbnail=t,n(0,r)},function(t){r.blocks=t,n(0,r)},function(t){r.enemies=t,n(0,r)}]}class cl extends at{constructor(t){super(),st(this,t,rl,ll,o,{params:5})}}function ol(e){let n,l;return n=new xt({props:{routes:e[0],prefix:il}}),{c(){ct(n.$$.fragment)},m(t,e){ot(n,t,e),l=!0},p:t,i(t){l||(Z(n.$$.fragment,t),l=!0)},o(t){tt(n.$$.fragment,t),l=!1},d(t){it(n,t)}}}const il="/level-builder";function sl(t,e,n){let{params:l={}}=e;const r={"/":ne,"/blocks/:name?":Ie,"/characters/:name?":nn,"/enemies/:name?":bn,"/levels/:name?":cl};let c;return t.$$set=t=>{"params"in t&&n(1,l=t.params)},t.$$.update=()=>{2&t.$$.dirty&&(c=l.tab||"art")},[r,l]}class al extends at{constructor(t){super(),st(this,t,sl,ol,o,{params:1})}}function ul(e){let n,l,r,c,o,i,s,a,u=e[0].name+"";return{c(){n=g("div"),l=g("p"),r=y("Level: "),c=y(u),o=b(),i=g("p"),s=y("Score: "),a=y(e[1]),S(l,"class","svelte-18s0d67"),S(i,"class","svelte-18s0d67"),S(n,"class","svelte-18s0d67")},m(t,e){m(t,n,e),$(n,l),$(l,r),$(l,c),$(n,o),$(n,i),$(i,s),$(i,a)},p(t,[e]){1&e&&u!==(u=t[0].name+"")&&N(c,u),2&e&&N(a,t[1])},i:t,o:t,d(t){t&&d(n)}}}function fl(t,e,n){let{level:l={}}=e,{score:r=0}=e;return t.$$set=t=>{"level"in t&&n(0,l=t.level),"score"in t&&n(1,r=t.score)},[l,r]}class pl extends at{constructor(t){super(),st(this,t,fl,ul,o,{level:0,score:1})}}function $l(t,e,n){const l=t.slice();return l[1]=e[n],l}function ml(e){let n,l,r,c,o,i,s,a,u=e[1].key+"",f=e[1].action+"";return{c(){n=g("tr"),l=g("td"),r=y(u),c=b(),o=g("td"),i=y("= "),s=y(f),a=b(),S(l,"class","svelte-1d0wu93"),S(o,"class","svelte-1d0wu93")},m(t,e){m(t,n,e),$(n,l),$(l,r),$(n,c),$(n,o),$(o,i),$(o,s),$(n,a)},p:t,d(t){t&&d(n)}}}function dl(e){let n,l,r=e[0],c=[];for(let t=0;t<r.length;t+=1)c[t]=ml($l(e,r,t));return{c(){n=g("div"),l=g("table");for(let t=0;t<c.length;t+=1)c[t].c();S(l,"class","svelte-1d0wu93"),S(n,"class","instructions svelte-1d0wu93")},m(t,e){m(t,n,e),$(n,l);for(let t=0;t<c.length;t+=1)c[t].m(l,null)},p(t,[e]){if(1&e){let n;for(r=t[0],n=0;n<r.length;n+=1){const o=$l(t,r,n);c[n]?c[n].p(o,e):(c[n]=ml(o),c[n].c(),c[n].m(l,null))}for(;n<c.length;n+=1)c[n].d(1);c.length=r.length}},i:t,o:t,d(t){t&&d(n),h(c,t)}}}function hl(t){return[[{key:"Left + Right Arrow",action:"Move"},{key:"Space",action:"Jump"},{key:"R",action:"Spin Attack / Shield"},{key:"Q",action:"Heal"},{key:"Enter",action:"Restart"}]]}class gl extends at{constructor(t){super(),st(this,t,hl,dl,o,{})}}function vl(t){let e,n,l;const r=t[6].default,c=a(r,t,t[5],null);return{c(){e=g("div"),n=g("div"),c&&c.c(),C(n,"position","absolute"),C(n,"left",-t[0]+"px"),C(n,"bottom",-t[1]+"px"),C(n,"height",t[3]+"px"),S(e,"class","viewport svelte-cjx02"),C(e,"width",t[2]+"px"),C(e,"height",t[3]+"px"),C(e,"background",t[4])},m(t,r){m(t,e,r),$(e,n),c&&c.m(n,null),l=!0},p(t,[o]){c&&c.p&&32&o&&f(c,r,t,t[5],o,null,null),(!l||1&o)&&C(n,"left",-t[0]+"px"),(!l||2&o)&&C(n,"bottom",-t[1]+"px"),(!l||8&o)&&C(n,"height",t[3]+"px"),(!l||4&o)&&C(e,"width",t[2]+"px"),(!l||8&o)&&C(e,"height",t[3]+"px"),(!l||16&o)&&C(e,"background",t[4])},i(t){l||(Z(c,t),l=!0)},o(t){tt(c,t),l=!1},d(t){t&&d(e),c&&c.d(t)}}}function yl(t,e,n){let{x:l=0}=e,{y:r=0}=e,{width:c=0}=e,{height:o=0}=e,{background:i=null}=e,{$$slots:s={},$$scope:a}=e;return t.$$set=t=>{"x"in t&&n(0,l=t.x),"y"in t&&n(1,r=t.y),"width"in t&&n(2,c=t.width),"height"in t&&n(3,o=t.height),"background"in t&&n(4,i=t.background),"$$scope"in t&&n(5,a=t.$$scope)},[l,r,c,o,i,a,s]}class bl extends at{constructor(t){super(),st(this,t,yl,vl,o,{x:0,y:1,width:2,height:3,background:4})}}function xl(t){let e,n,l,r,c,o,i,s,a,u,f=t[1].name+"";return{c(){e=g("div"),n=g("h1"),l=y(f),r=y(" is dead now. You really let him down."),c=b(),o=g("h1"),i=y("Final score: "),s=y(t[0]),a=b(),u=g("p"),u.textContent="Press enter or space to restart.",S(n,"class","svelte-1ogvx1s"),S(o,"class","svelte-1ogvx1s"),S(u,"class","svelte-1ogvx1s"),S(e,"class","game-over svelte-1ogvx1s")},m(t,f){m(t,e,f),$(e,n),$(n,l),$(n,r),$(e,c),$(e,o),$(o,i),$(o,s),$(e,a),$(e,u)},p(t,e){2&e&&f!==(f=t[1].name+"")&&N(l,f),1&e&&N(s,t[0])},d(t){t&&d(e)}}}function wl(e){let n,l=e[1]&&xl(e);return{c(){l&&l.c(),n=x()},m(t,e){l&&l.m(t,e),m(t,n,e)},p(t,[e]){t[1]?l?l.p(t,e):(l=xl(t),l.c(),l.m(n.parentNode,n)):l&&(l.d(1),l=null)},i:t,o:t,d(t){l&&l.d(t),t&&d(n)}}}function kl(t,e,n){let{score:l=0}=e,{player:r}=e;return t.$$set=t=>{"score"in t&&n(0,l=t.score),"player"in t&&n(1,r=t.player)},[l,r]}class Sl extends at{constructor(t){super(),st(this,t,kl,wl,o,{score:0,player:1})}}const Ol=(t,e)=>Nl(t,e)&&Ml(t,e),Nl=(t,e)=>t.x<e.x+e.width&&t.x+t.width>e.x,Ml=(t,e)=>t.y+t.height>=e.y&&t.y<=e.y+e.height,Cl=(t,e)=>t.y+t.height>e.y&&t.y<e.y+e.height;const{window:jl}=et;function El(t,e,n){const l=t.slice();return l[27]=e[n],l}function Dl(t){let e,n;return e=new Sl({props:{score:t[4],player:t[6]}}),{c(){ct(e.$$.fragment)},m(t,l){ot(e,t,l),n=!0},p(t,n){const l={};16&n&&(l.score=t[4]),64&n&&(l.player=t[6]),e.$set(l)},i(t){n||(Z(e.$$.fragment,t),n=!0)},o(t){tt(e.$$.fragment,t),n=!1},d(t){it(e,t)}}}function _l(t){let n,l;const r=[t[9],{background:t[0].background}];let c={$$slots:{default:[Al]},$$scope:{ctx:t}};for(let t=0;t<r.length;t+=1)c=e(c,r[t]);return n=new bl({props:c}),{c(){ct(n.$$.fragment)},m(t,e){ot(n,t,e),l=!0},p(t,e){const l=513&e?nt(r,[512&e&&lt(t[9]),1&e&&{background:t[0].background}]):{};1073742030&e&&(l.$$scope={dirty:e,ctx:t}),n.$set(l)},i(t){l||(Z(n.$$.fragment,t),l=!0)},o(t){tt(n.$$.fragment,t),l=!1},d(t){it(n,t)}}}function Hl(t){let n,l;const r=[t[27]];let c={};for(let t=0;t<r.length;t+=1)c=e(c,r[t]);return n=new Hn({props:c}),{c(){ct(n.$$.fragment)},m(t,e){ot(n,t,e),l=!0},p(t,e){const l=128&e?nt(r,[lt(t[27])]):{};n.$set(l)},i(t){l||(Z(n.$$.fragment,t),l=!0)},o(t){tt(n.$$.fragment,t),l=!1},d(t){it(n,t)}}}function Al(t){let n,l,r,c,o;n=new Vn({props:{blocks:t[1],width:t[2],height:t[3],playing:!0}});let i=t[7],s=[];for(let e=0;e<i.length;e+=1)s[e]=Hl(El(t,i,e));const a=t=>tt(s[t],1,1,()=>{s[t]=null}),u=[t[6]];let f={};for(let t=0;t<u.length;t+=1)f=e(f,u[t]);return c=new Hn({props:f}),{c(){ct(n.$$.fragment),l=b();for(let t=0;t<s.length;t+=1)s[t].c();r=b(),ct(c.$$.fragment)},m(t,e){ot(n,t,e),m(t,l,e);for(let n=0;n<s.length;n+=1)s[n].m(t,e);m(t,r,e),ot(c,t,e),o=!0},p(t,e){const l={};if(2&e&&(l.blocks=t[1]),4&e&&(l.width=t[2]),8&e&&(l.height=t[3]),n.$set(l),128&e){let n;for(i=t[7],n=0;n<i.length;n+=1){const l=El(t,i,n);s[n]?(s[n].p(l,e),Z(s[n],1)):(s[n]=Hl(l),s[n].c(),Z(s[n],1),s[n].m(r.parentNode,r))}for(Y(),n=i.length;n<s.length;n+=1)a(n);Q()}const o=64&e?nt(u,[lt(t[6])]):{};c.$set(o)},i(t){if(!o){Z(n.$$.fragment,t);for(let t=0;t<i.length;t+=1)Z(s[t]);Z(c.$$.fragment,t),o=!0}},o(t){tt(n.$$.fragment,t),s=s.filter(Boolean);for(let t=0;t<s.length;t+=1)tt(s[t]);tt(c.$$.fragment,t),o=!1},d(t){it(n,t),t&&d(l),h(s,t),t&&d(r),it(c,t)}}}function Jl(t){let e,n,l,c,o,i,s,a,u,f=t[8]&&Dl(t),p=null!=t[0]&&null!=t[6]&&_l(t);return c=new pl({props:{level:t[0],score:t[4]}}),i=new gl({}),{c(){e=g("div"),f&&f.c(),n=b(),p&&p.c(),l=b(),ct(c.$$.fragment),o=b(),ct(i.$$.fragment),S(e,"class","game-window svelte-1ihy09s")},m(r,d){m(r,e,d),f&&f.m(e,null),$(e,n),p&&p.m(e,null),$(e,l),ot(c,e,null),$(e,o),ot(i,e,null),t[13](e),s=!0,a||(u=[w(jl,"keydown",t[10]),w(jl,"keyup",t[11])],a=!0)},p(t,[r]){t[8]?f?(f.p(t,r),256&r&&Z(f,1)):(f=Dl(t),f.c(),Z(f,1),f.m(e,n)):f&&(Y(),tt(f,1,1,()=>{f=null}),Q()),null!=t[0]&&null!=t[6]?p?(p.p(t,r),65&r&&Z(p,1)):(p=_l(t),p.c(),Z(p,1),p.m(e,l)):p&&(Y(),tt(p,1,1,()=>{p=null}),Q());const o={};1&r&&(o.level=t[0]),16&r&&(o.score=t[4]),c.$set(o)},i(t){s||(Z(f),Z(p),Z(c.$$.fragment,t),Z(i.$$.fragment,t),s=!0)},o(t){tt(f),tt(p),tt(c.$$.fragment,t),tt(i.$$.fragment,t),s=!1},d(n){n&&d(e),f&&f.d(),p&&p.d(),it(c),it(i),t[13](null),a=!1,r(u)}}}function Vl(t,e,n){let l,r,c;s(t,Oe,t=>n(20,l=t)),s(t,St,t=>n(21,r=t)),s(t,ln,t=>n(22,c=t));let o,i,a,u,f,p,{level:$=null}=e,{character:m=null}=e,d=0,h=0,g=0,v=!1,y=!0,b=null,x={width:window.innerWidth,height:600},w=!1,k=!1;var S;function O(){n(4,g=0),n(6,f={...m,health:m.maxHealth,tvx:m.maxVelocity,width:2*r[m.graphicStill].width,height:2*r[m.graphicStill].height,x:i[0].x,y:i[0].y+i[0].height+100,vx:0,vy:0,spinning:!1,tick(){f.grounded?n(6,w&&!k?f.vx-=f.tvx/5:k&&!w?f.vx+=f.tvx/5:f.vx=0,f):w&&!k?n(6,f.vx-=f.tvx/10,f):k&&!w&&n(6,f.vx+=f.tvx/10,f),Math.abs(f.vx)>f.tvx&&n(6,f.vx=f.tvx*(f.vx<0?-1:1),f)}}),n(7,p=$.enemies.map(t=>{const e=c[t.name];return function(t,e,n,l){return{...t,...e,width:n,height:l,health:t.maxHealth,tvx:t.maxVelocity,vx:0,vy:0,grounded:!1,alive:!0,tick(t,e){t.grounded&&(Math.abs(e.x-t.x)<400?(e.x==t.x?t.vx=0:e.x<t.x?t.vx=-t.tvx:t.vx=t.tvx,e.y>t.y+t.height&&(t.vy=t.jumpVelocity,t.y+=1)):t.vx=0)},onDeath(){}}}(e,t,2*r[e.graphicStill].width,2*r[e.graphicStill].height)})),n(8,v=!1),null==b&&N()}function N(){if(!v){n(6,f=M(f,!0)),f.tick();const t=x.width/2,e=x.height/2;n(9,x.x=f.x<t?0:f.x>o-t?o-x.width:f.x-t,x),n(9,x.y=f.y<e?0:f.y-e,x);for(let t=0;t<p.length;t++)p[t].alive&&(n(7,p[t]=M(p[t]),p),p[t].tick(p[t],f),Ol(f,p[t])&&(f.spinning?(n(7,p[t].gettingHit=!0,p),n(7,p[t].health-=f.dps/60,p)):n(6,f.health-=p[t].dps/60,f)),p[t].health<=0&&(n(7,p[t].alive=!1,p),p[t].onDeath(),n(4,g+=p[t].score)));f.health<=0&&n(8,v=!0)}y&&(b=window.requestAnimationFrame(N))}function M(t,e=!1){const n=i.filter(e=>e.solid&&((t,e)=>t.y>=e.y+e.height&&Nl(t,e))(t,e)).map(t=>t.y+t.height),l=n.length>0?Math.max(...n):-500;if(t.y+=t.vy,t.grounded=t.y<=l,t.grounded?(t.vy<0&&(t.health+=t.vy/10*t.fallDamageMultiplier,t.vy=0),t.y=l):t.y<-200?t.health=0:t.vy-=1,0!=t.vx)if(t.vx>0){let e=t.x+t.vx;const n=i.find(n=>{const l=e+t.width,r=t.x+t.width;return n.solid&&l>n.x&&r<=n.x&&Cl(n,t)});null!=n?e=n.x-t.width:e>o&&(e=o),t.x=e}else if(t.vx<0){let e=t.x+t.vx;const n=i.find(n=>{const l=n.x+n.width;return n.solid&&t.x>=l&&e<l&&Cl(n,t)});null!=n?e=n.x+n.width:e<0&&(e=0),t.x=e<0?0:e}for(let e=0;e<a.length;e++)Ol(t,a[e])&&(t.health-=a[e].dps/60,a[e].throwOnTouch&&(t.vy=20));return t}return S=()=>{n(1,i=$.blocks.sort((t,e)=>t.x>e.x?1:e.x>t.x||t.y>e.y?-1:e.y>t.y?1:0).map(t=>({...t,solid:l[t.name].solid,png:r[l[t.name].graphic].png,dps:l[t.name].dps,throwOnTouch:l[t.name].throwOnTouch}))),o=Math.max(...i.map(t=>t.x+t.width)),a=i.filter(t=>t.dps>0),n(2,d=Math.max(...i.map(t=>t.x+t.width))),n(3,h=600),O()},_().$$.on_mount.push(S),function(t){_().$$.on_destroy.push(t)}(()=>{y=!1,window.cancelAnimationFrame(b)}),t.$$set=t=>{"level"in t&&n(0,$=t.level),"character"in t&&n(12,m=t.character)},[$,i,d,h,g,u,f,p,v,x,function(t){if(!v)switch(t.code){case"ArrowLeft":w=!0;break;case"ArrowRight":k=!0;break;case"Space":(f.grounded||f.canFly)&&n(6,f.vy=f.jumpVelocity,f);break;case"KeyR":n(6,f.spinning=!0,f);break;case"KeyQ":n(6,f.health=f.maxHealth,f)}},function(t){switch(t.code){case"ArrowLeft":w=!1;break;case"ArrowRight":k=!1;break;case"Space":v&&O();break;case"KeyR":n(6,f.spinning=!1,f);break;case"Enter":case"NumpadEnter":O();break;default:console.log(t.code)}},m,function(t){V[t?"unshift":"push"](()=>{u=t,n(5,u)})}]}class Rl extends at{constructor(t){super(),st(this,t,Vl,Jl,o,{level:0,character:12})}}function Il(t,e,n){const l=t.slice();return l[4]=e[n],l}function Tl(t,e,n){const l=t.slice();return l[3]=e[n],l}function ql(t){let e,n,l=t[0],r=[];for(let e=0;e<l.length;e+=1)r[e]=Ll(Tl(t,l,e));const c=t=>tt(r[t],1,1,()=>{r[t]=null});return{c(){e=g("div");for(let t=0;t<r.length;t+=1)r[t].c();S(e,"class","list-group")},m(t,l){m(t,e,l);for(let t=0;t<r.length;t+=1)r[t].m(e,null);n=!0},p(t,n){if(39&n){let o;for(l=t[0],o=0;o<l.length;o+=1){const c=Tl(t,l,o);r[o]?(r[o].p(c,n),Z(r[o],1)):(r[o]=Ll(c),r[o].c(),Z(r[o],1),r[o].m(e,null))}for(Y(),o=l.length;o<r.length;o+=1)c(o);Q()}},i(t){if(!n){for(let t=0;t<l.length;t+=1)Z(r[t]);n=!0}},o(t){r=r.filter(Boolean);for(let t=0;t<r.length;t+=1)tt(r[t]);n=!1},d(t){t&&d(e),h(r,t)}}}function Fl(t){let e,n,l,r,c,o,i,s,a,u,f,p,h,v,x,k,O;return v=new Rl({props:{level:t[1][t[3]],character:t[2][t[4]]}}),{c(){e=g("div"),n=g("button"),n.textContent="< Change level",l=b(),r=g("a"),c=y("Edit "),o=y(t[3]),s=b(),a=g("a"),u=y("Edit "),f=y(t[4]),h=b(),ct(v.$$.fragment),S(n,"type","button"),S(n,"class","btn btn-info"),S(r,"href",i="#/level-builder/levels/"+encodeURIComponent(t[3])),S(r,"class","btn btn-secondary"),S(r,"role","button"),S(a,"href",p="#/level-builder/characters/"+encodeURIComponent(t[4])),S(a,"class","btn btn-secondary"),S(a,"role","button"),S(e,"class","mb-2")},m(i,p){m(i,e,p),$(e,n),$(e,l),$(e,r),$(r,c),$(r,o),$(e,s),$(e,a),$(a,u),$(a,f),m(i,h,p),ot(v,i,p),x=!0,k||(O=w(n,"click",t[6]),k=!0)},p(t,e){(!x||8&e)&&N(o,t[3]),(!x||8&e&&i!==(i="#/level-builder/levels/"+encodeURIComponent(t[3])))&&S(r,"href",i),(!x||16&e)&&N(f,t[4]),(!x||16&e&&p!==(p="#/level-builder/characters/"+encodeURIComponent(t[4])))&&S(a,"href",p);const n={};10&e&&(n.level=t[1][t[3]]),20&e&&(n.character=t[2][t[4]]),v.$set(n)},i(t){x||(Z(v.$$.fragment,t),x=!0)},o(t){tt(v.$$.fragment,t),x=!1},d(t){t&&d(e),t&&d(h),it(v,t),k=!1,O()}}}function Kl(t){let e,n,l,r,c,o,i,s,a=t[4]+"";function u(...e){return t[7](t[3],t[4],...e)}return n=new Ct({props:{name:t[2][t[4]].graphicStill}}),{c(){e=g("button"),ct(n.$$.fragment),l=b(),r=y(a),c=b(),S(e,"class","btn btn-secondary mr-1")},m(t,a){m(t,e,a),ot(n,e,null),$(e,l),$(e,r),$(e,c),o=!0,i||(s=w(e,"click",u),i=!0)},p(e,l){t=e;const c={};7&l&&(c.name=t[2][t[4]].graphicStill),n.$set(c),(!o||3&l)&&a!==(a=t[4]+"")&&N(r,a)},i(t){o||(Z(n.$$.fragment,t),o=!0)},o(t){tt(n.$$.fragment,t),o=!1},d(t){t&&d(e),it(n),i=!1,s()}}}function Ll(t){let e,n,l,r,c,o,i,s,a,u,f=t[3]+"",p=t[1][t[3]].playableCharacters,v=[];for(let e=0;e<p.length;e+=1)v[e]=Kl(Il(t,p,e));const x=t=>tt(v[t],1,1,()=>{v[t]=null});return{c(){e=g("div"),n=g("h4"),l=y(f),r=b(),c=g("img"),i=b(),s=g("div");for(let t=0;t<v.length;t+=1)v[t].c();a=b(),S(n,"class","mb-0"),c.src!==(o=t[1][t[3]].thumbnail)&&S(c,"src",o),C(c,"background",t[1][t[3]].background),S(s,"class","flex-row"),S(e,"class","list-group-item")},m(t,o){m(t,e,o),$(e,n),$(n,l),$(e,r),$(e,c),$(e,i),$(e,s);for(let t=0;t<v.length;t+=1)v[t].m(s,null);$(e,a),u=!0},p(t,e){if((!u||1&e)&&f!==(f=t[3]+"")&&N(l,f),(!u||3&e&&c.src!==(o=t[1][t[3]].thumbnail))&&S(c,"src",o),(!u||3&e)&&C(c,"background",t[1][t[3]].background),39&e){let n;for(p=t[1][t[3]].playableCharacters,n=0;n<p.length;n+=1){const l=Il(t,p,n);v[n]?(v[n].p(l,e),Z(v[n],1)):(v[n]=Kl(l),v[n].c(),Z(v[n],1),v[n].m(s,null))}for(Y(),n=p.length;n<v.length;n+=1)x(n);Q()}},i(t){if(!u){for(let t=0;t<p.length;t+=1)Z(v[t]);u=!0}},o(t){v=v.filter(Boolean);for(let t=0;t<v.length;t+=1)tt(v[t]);u=!1},d(t){t&&d(e),h(v,t)}}}function Pl(t){let e,n,l,r;const c=[Fl,ql],o=[];function i(t,e){return null!=t[3]?0:1}return e=i(t),n=o[e]=c[e](t),{c(){n.c(),l=x()},m(t,n){o[e].m(t,n),m(t,l,n),r=!0},p(t,[r]){let s=e;e=i(t),e===s?o[e].p(t,r):(Y(),tt(o[s],1,1,()=>{o[s]=null}),Q(),n=o[e],n||(n=o[e]=c[e](t),n.c()),Z(n,1),n.m(l.parentNode,l))},i(t){r||(Z(n),r=!0)},o(t){tt(n),r=!1},d(t){o[e].d(t),t&&d(l)}}}function Ul(t,e,n){let l,r,c,o;function i(t,e){n(3,c=t),n(4,o=e)}s(t,Gn,t=>n(1,l=t)),s(t,Te,t=>n(2,r=t));let a;return t.$$.update=()=>{2&t.$$.dirty&&n(0,a=Object.keys(l).sort())},[a,l,r,c,o,i,()=>n(3,c=null),(t,e)=>i(t,e)]}class zl extends at{constructor(t){super(),st(this,t,Ul,Pl,o,{})}}function Bl(e){let n;return{c(){n=g("h1"),n.textContent="Page not found"},m(t,e){m(t,n,e)},p:t,i:t,o:t,d(t){t&&d(n)}}}class Gl extends at{constructor(t){super(),st(this,t,null,Bl,o,{})}}function Wl(t){let e;return{c(){e=g("li"),e.innerHTML='<a class="nav-link" href="#/play">Play!</a>',S(e,"class","nav-item")},m(t,n){m(t,e,n)},d(t){t&&d(e)}}}function Xl(t){let e,n,l,r,c,o,i,s=t[0]&&Wl();return o=new xt({props:{routes:t[1]}}),{c(){e=g("ul"),n=g("li"),n.innerHTML='<a class="nav-link" href="#/level-builder">Level Builder</a>',l=b(),s&&s.c(),r=b(),c=g("main"),ct(o.$$.fragment),S(n,"class","nav-item"),S(e,"class","nav"),S(c,"class","svelte-1ten5ne")},m(t,a){m(t,e,a),$(e,n),$(e,l),s&&s.m(e,null),m(t,r,a),m(t,c,a),ot(o,c,null),i=!0},p(t,[n]){t[0]?s||(s=Wl(),s.c(),s.m(e,null)):s&&(s.d(1),s=null)},i(t){i||(Z(o.$$.fragment,t),i=!0)},o(t){tt(o.$$.fragment,t),i=!1},d(t){t&&d(e),s&&s.d(),t&&d(r),t&&d(c),it(o)}}}function Yl(t,e,n){let l;s(t,Gn,t=>n(2,l=t));const r={"/level-builder/:tab?/:name?":al,"/play":zl,"*":Gl};let c;return t.$$.update=()=>{4&t.$$.dirty&&n(0,c=Object.keys(l).length>0)},[c,r]}return new class extends at{constructor(t){super(),st(this,t,Yl,Xl,o,{})}}({target:document.body,props:{name:"world"}})}();
//# sourceMappingURL=bundle.js.map

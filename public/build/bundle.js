var app=function(){"use strict";function t(){}function e(t,e){for(const n in e)t[n]=e[n];return t}function n(t){return t()}function l(){return Object.create(null)}function r(t){t.forEach(n)}function c(t){return"function"==typeof t}function o(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function i(e,...n){if(null==e)return t;const l=e.subscribe(...n);return l.unsubscribe?()=>l.unsubscribe():l}function s(t,e,n){t.$$.on_destroy.push(i(e,n))}function a(t,e,n,l){if(t){const r=u(t,e,n,l);return t[0](r)}}function u(t,n,l,r){return t[1]&&r?e(l.ctx.slice(),t[1](r(n))):l.ctx}function f(t,e,n,l,r,c,o){const i=function(t,e,n,l){if(t[2]&&l){const r=t[2](l(n));if(void 0===e.dirty)return r;if("object"==typeof r){const t=[],n=Math.max(e.dirty.length,r.length);for(let l=0;l<n;l+=1)t[l]=e.dirty[l]|r[l];return t}return e.dirty|r}return e.dirty}(e,l,r,c);if(i){const r=u(e,n,l,o);t.p(r,i)}}function p(t,e,n=e){return t.set(n),e}function $(t,e){t.appendChild(e)}function m(t,e,n){t.insertBefore(e,n||null)}function d(t){t.parentNode.removeChild(t)}function h(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function g(t){return document.createElement(t)}function v(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function y(t){return document.createTextNode(t)}function x(){return y(" ")}function b(){return y("")}function w(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function k(t){return function(e){return e.preventDefault(),t.call(this,e)}}function S(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function O(t){return""===t?void 0:+t}function N(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function H(t,e){t.value=null==e?"":e}function M(t,e,n,l){t.style.setProperty(e,n,l?"important":"")}function j(t,e,n){t.classList[n?"add":"remove"](e)}let V;function C(t){V=t}function E(){if(!V)throw new Error("Function called outside component initialization");return V}function A(){const t=E();return(e,n)=>{const l=t.$$.callbacks[e];if(l){const r=function(t,e){const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}(e,n);l.slice().forEach(e=>{e.call(t,r)})}}}function D(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(t=>t(e))}const _=[],J=[],R=[],I=[],T=Promise.resolve();let B=!1;function F(){B||(B=!0,T.then(G))}function K(){return F(),T}function z(t){R.push(t)}function L(t){I.push(t)}let U=!1;const P=new Set;function G(){if(!U){U=!0;do{for(let t=0;t<_.length;t+=1){const e=_[t];C(e),q(e.$$)}for(_.length=0;J.length;)J.pop()();for(let t=0;t<R.length;t+=1){const e=R[t];P.has(e)||(P.add(e),e())}R.length=0}while(_.length);for(;I.length;)I.pop()();B=!1,U=!1,P.clear()}}function q(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(z)}}const Z=new Set;let W;function X(){W={r:0,c:[],p:W}}function Y(){W.r||r(W.c),W=W.p}function Q(t,e){t&&t.i&&(Z.delete(t),t.i(e))}function tt(t,e,n,l){if(t&&t.o){if(Z.has(t))return;Z.add(t),W.c.push(()=>{Z.delete(t),l&&(n&&t.d(1),l())}),t.o(e)}}const et="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function nt(t,e){const n={},l={},r={$$scope:1};let c=t.length;for(;c--;){const o=t[c],i=e[c];if(i){for(const t in o)t in i||(l[t]=1);for(const t in i)r[t]||(n[t]=i[t],r[t]=1);t[c]=i}else for(const t in o)r[t]=1}for(const t in l)t in n||(n[t]=void 0);return n}function lt(t){return"object"==typeof t&&null!==t?t:{}}function rt(t,e,n){const l=t.$$.props[e];void 0!==l&&(t.$$.bound[l]=n,n(t.$$.ctx[l]))}function ct(t){t&&t.c()}function ot(t,e,l){const{fragment:o,on_mount:i,on_destroy:s,after_update:a}=t.$$;o&&o.m(e,l),z(()=>{const e=i.map(n).filter(c);s?s.push(...e):r(e),t.$$.on_mount=[]}),a.forEach(z)}function it(t,e){const n=t.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function st(e,n,c,o,i,s,a=[-1]){const u=V;C(e);const f=n.props||{},p=e.$$={fragment:null,ctx:null,props:s,update:t,not_equal:i,bound:l(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(u?u.$$.context:[]),callbacks:l(),dirty:a,skip_bound:!1};let $=!1;if(p.ctx=c?c(e,f,(t,n,...l)=>{const r=l.length?l[0]:n;return p.ctx&&i(p.ctx[t],p.ctx[t]=r)&&(!p.skip_bound&&p.bound[t]&&p.bound[t](r),$&&function(t,e){-1===t.$$.dirty[0]&&(_.push(t),F(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}(e,t)),n}):[],p.update(),$=!0,r(p.before_update),p.fragment=!!o&&o(p.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);p.fragment&&p.fragment.l(t),t.forEach(d)}else p.fragment&&p.fragment.c();n.intro&&Q(e.$$.fragment),ot(e,n.target,n.anchor),G()}C(u)}class at{$destroy(){it(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const ut=[];function ft(t,e){return{subscribe:pt(t,e).subscribe}}function pt(e,n=t){let l;const r=[];function c(t){if(o(e,t)&&(e=t,l)){const t=!ut.length;for(let t=0;t<r.length;t+=1){const n=r[t];n[1](),ut.push(n,e)}if(t){for(let t=0;t<ut.length;t+=2)ut[t][0](ut[t+1]);ut.length=0}}}return{set:c,update:function(t){c(t(e))},subscribe:function(o,i=t){const s=[o,i];return r.push(s),1===r.length&&(l=n(c)||t),o(e),()=>{const t=r.indexOf(s);-1!==t&&r.splice(t,1),0===r.length&&(l(),l=null)}}}}function $t(e,n,l){const o=!Array.isArray(e),s=o?[e]:e,a=n.length<2;return ft(l,e=>{let l=!1;const u=[];let f=0,p=t;const $=()=>{if(f)return;p();const l=n(o?u[0]:u,e);a?e(l):p=c(l)?l:t},m=s.map((t,e)=>i(t,t=>{u[e]=t,f&=~(1<<e),l&&$()},()=>{f|=1<<e}));return l=!0,$(),function(){r(m),p()}})}function mt(t){let e,n,l;var r=t[0];return r&&(e=new r({}),e.$on("routeEvent",t[5])),{c(){e&&ct(e.$$.fragment),n=b()},m(t,r){e&&ot(e,t,r),m(t,n,r),l=!0},p(t,l){if(r!==(r=t[0])){if(e){X();const t=e;tt(t.$$.fragment,1,0,()=>{it(t,1)}),Y()}r?(e=new r({}),e.$on("routeEvent",t[5]),ct(e.$$.fragment),Q(e.$$.fragment,1),ot(e,n.parentNode,n)):e=null}},i(t){l||(e&&Q(e.$$.fragment,t),l=!0)},o(t){e&&tt(e.$$.fragment,t),l=!1},d(t){t&&d(n),e&&it(e,t)}}}function dt(t){let e,n,l;var r=t[0];function c(t){return{props:{params:t[1]}}}return r&&(e=new r(c(t)),e.$on("routeEvent",t[4])),{c(){e&&ct(e.$$.fragment),n=b()},m(t,r){e&&ot(e,t,r),m(t,n,r),l=!0},p(t,l){const o={};if(2&l&&(o.params=t[1]),r!==(r=t[0])){if(e){X();const t=e;tt(t.$$.fragment,1,0,()=>{it(t,1)}),Y()}r?(e=new r(c(t)),e.$on("routeEvent",t[4]),ct(e.$$.fragment),Q(e.$$.fragment,1),ot(e,n.parentNode,n)):e=null}else r&&e.$set(o)},i(t){l||(e&&Q(e.$$.fragment,t),l=!0)},o(t){e&&tt(e.$$.fragment,t),l=!1},d(t){t&&d(n),e&&it(e,t)}}}function ht(t){let e,n,l,r;const c=[dt,mt],o=[];function i(t,e){return t[1]?0:1}return e=i(t),n=o[e]=c[e](t),{c(){n.c(),l=b()},m(t,n){o[e].m(t,n),m(t,l,n),r=!0},p(t,[r]){let s=e;e=i(t),e===s?o[e].p(t,r):(X(),tt(o[s],1,1,()=>{o[s]=null}),Y(),n=o[e],n||(n=o[e]=c[e](t),n.c()),Q(n,1),n.m(l.parentNode,l))},i(t){r||(Q(n),r=!0)},o(t){tt(n),r=!1},d(t){o[e].d(t),t&&d(l)}}}function gt(){const t=window.location.href.indexOf("#/");let e=t>-1?window.location.href.substr(t+1):"/";const n=e.indexOf("?");let l="";return n>-1&&(l=e.substr(n+1),e=e.substr(0,n)),{location:e,querystring:l}}const vt=ft(null,(function(t){t(gt());const e=()=>{t(gt())};return window.addEventListener("hashchange",e,!1),function(){window.removeEventListener("hashchange",e,!1)}}));$t(vt,t=>t.location),$t(vt,t=>t.querystring);function yt(t){if(!t||t.length<1||"/"!=t.charAt(0)&&0!==t.indexOf("#/"))throw Error("Invalid parameter location");return K().then(()=>{window.location.hash=("#"==t.charAt(0)?"":"#")+t})}function xt(e,n,l){let r,c=t;s(e,vt,t=>l(6,r=t)),e.$$.on_destroy.push(()=>c());let{routes:o={}}=n,{prefix:i=""}=n;class a{constructor(t,e){if(!e||"function"!=typeof e&&("object"!=typeof e||!0!==e._sveltesparouter))throw Error("Invalid component object");if(!t||"string"==typeof t&&(t.length<1||"/"!=t.charAt(0)&&"*"!=t.charAt(0))||"object"==typeof t&&!(t instanceof RegExp))throw Error('Invalid value for "path" argument');const{pattern:n,keys:l}=function(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var n,l,r,c,o=[],i="",s=t.split("/");for(s[0]||s.shift();r=s.shift();)"*"===(n=r[0])?(o.push("wild"),i+="/(.*)"):":"===n?(l=r.indexOf("?",1),c=r.indexOf(".",1),o.push(r.substring(1,~l?l:~c?c:r.length)),i+=~l&&!~c?"(?:/([^/]+?))?":"/([^/]+?)",~c&&(i+=(~l?"?":"")+"\\"+r.substring(c))):i+="/"+r;return{keys:o,pattern:new RegExp("^"+i+(e?"(?=$|/)":"/?$"),"i")}}(t);this.path=t,"object"==typeof e&&!0===e._sveltesparouter?(this.component=e.route,this.conditions=e.conditions||[],this.userData=e.userData):(this.component=e,this.conditions=[],this.userData=void 0),this._pattern=n,this._keys=l}match(t){i&&t.startsWith(i)&&(t=t.substr(i.length)||"/");const e=this._pattern.exec(t);if(null===e)return null;if(!1===this._keys)return e;const n={};let l=0;for(;l<this._keys.length;)n[this._keys[l]]=e[++l]||null;return n}checkConditions(t){for(let e=0;e<this.conditions.length;e++)if(!this.conditions[e](t))return!1;return!0}}const u=[];o instanceof Map?o.forEach((t,e)=>{u.push(new a(e,t))}):Object.keys(o).forEach(t=>{u.push(new a(t,o[t]))});let f=null,p=null;const $=A(),m=(t,e)=>{K().then(()=>{$(t,e)})};return e.$$set=t=>{"routes"in t&&l(2,o=t.routes),"prefix"in t&&l(3,i=t.prefix)},e.$$.update=()=>{if(65&e.$$.dirty){l(0,f=null);let t=0;for(;!f&&t<u.length;){const e=u[t].match(r.location);if(e){const n={component:u[t].component,name:u[t].component.name,location:r.location,querystring:r.querystring,userData:u[t].userData};if(!u[t].checkConditions(n)){m("conditionsFailed",n);break}l(0,f=u[t].component),e&&"object"==typeof e&&Object.keys(e).length?l(1,p=e):l(1,p=null),m("routeLoaded",n)}t++}}},[f,p,o,i,function(t){D(e,t)},function(t){D(e,t)}]}class bt extends at{constructor(t){super(),st(this,t,xt,ht,o,{routes:2,prefix:3})}}function wt(t,e,n){const l=document.createElement("canvas");l.width=2*e,l.height=2*n;const r=l.getContext("2d");for(let e=0;e<t.length;e++)for(let n=0;n<t[e].length;n++){const l=t[e][n];null!=l&&"transparent"!=l&&(r.beginPath(),r.rect(2*n,2*e,2,2),r.fillStyle=l,r.fill())}return l.toDataURL("image/png")}function kt(t,e){const n=localStorage.getItem(t),l=null!=n&&"null"!=n&&"undefined"!=n?JSON.parse(n):e,{subscribe:r,set:c,update:o}=pt(l);return{subscribe:r,set:function(e){c(e),localStorage.setItem(t,JSON.stringify(e))}}}var St=kt("pixel-drawings",{});function Ot(t){let e,n,l,r;return{c(){e=g("img"),e.src!==(n=t[0].png)&&S(e,"src",n),S(e,"alt",l=t[0].name),S(e,"title",r=t[0].name),M(e,"transform","rotate("+t[1]+"deg)")},m(t,n){m(t,e,n)},p(t,c){1&c&&e.src!==(n=t[0].png)&&S(e,"src",n),1&c&&l!==(l=t[0].name)&&S(e,"alt",l),1&c&&r!==(r=t[0].name)&&S(e,"title",r),2&c&&M(e,"transform","rotate("+t[1]+"deg)")},d(t){t&&d(e)}}}function Nt(e){let n,l=null!=e[0]&&null!=e[0].png&&Ot(e);return{c(){l&&l.c(),n=b()},m(t,e){l&&l.m(t,e),m(t,n,e)},p(t,[e]){null!=t[0]&&null!=t[0].png?l?l.p(t,e):(l=Ot(t),l.c(),l.m(n.parentNode,n)):l&&(l.d(1),l=null)},i:t,o:t,d(t){l&&l.d(t),t&&d(n)}}}function Ht(t,e,n){let l;s(t,St,t=>n(5,l=t));let r,c,{name:o}=e,{spin:i=!1}=e,a=0;return t.$$set=t=>{"name"in t&&n(2,o=t.name),"spin"in t&&n(3,i=t.spin)},t.$$.update=()=>{37&t.$$.dirty&&null!=o&&(n(0,r=l[o]),null!=r&&null==r.png&&n(0,r.png=wt(r,r.width,r.height),r)),26&t.$$.dirty&&(i?n(4,c=setTimeout(()=>{n(1,a+=30)},25)):clearTimeout(c))},[r,a,o,i]}class Mt extends at{constructor(t){super(),st(this,t,Ht,Nt,o,{name:2,spin:3})}}function jt(t,e,n){const l=t.slice();return l[9]=e[n],l}function Vt(t,e,n){const l=t.slice();return l[6]=e[n],l}function Ct(t){let e,n,l,r,c,o,i,s=Object.keys(t[2]),a=[];for(let e=0;e<s.length;e+=1)a[e]=Et(jt(t,s,e));const u=t=>tt(a[t],1,1,()=>{a[t]=null});return{c(){e=g("div"),n=g("a"),l=y("+ New"),c=x();for(let t=0;t<a.length;t+=1)a[t].c();o=x(),S(n,"href",r=_t+"/"+t[6].name+"/new"),S(n,"class","list-group-item list-group-item-action svelte-1711lkh"),j(n,"list-group-item-success",null==t[2][t[1]]),S(e,"class","list-group sub-nav svelte-1711lkh")},m(t,r){m(t,e,r),$(e,n),$(n,l),$(e,c);for(let t=0;t<a.length;t+=1)a[t].m(e,null);$(e,o),i=!0},p(t,l){if(6&l&&j(n,"list-group-item-success",null==t[2][t[1]]),14&l){let n;for(s=Object.keys(t[2]),n=0;n<s.length;n+=1){const r=jt(t,s,n);a[n]?(a[n].p(r,l),Q(a[n],1)):(a[n]=Et(r),a[n].c(),Q(a[n],1),a[n].m(e,o))}for(X(),n=s.length;n<a.length;n+=1)u(n);Y()}},i(t){if(!i){for(let t=0;t<s.length;t+=1)Q(a[t]);i=!0}},o(t){a=a.filter(Boolean);for(let t=0;t<a.length;t+=1)tt(a[t]);i=!1},d(t){t&&d(e),h(a,t)}}}function Et(t){let e,n,l,r,c,o,i=t[9]+"";return n=new Mt({props:{name:t[2][t[9]][t[6].graphicKey]}}),{c(){e=g("a"),ct(n.$$.fragment),l=x(),r=y(i),S(e,"class","list-group-item list-group-item-action svelte-1711lkh"),S(e,"href",c=_t+"/"+t[6].name+"/"+t[9]),j(e,"active",t[1]==t[9])},m(t,c){m(t,e,c),ot(n,e,null),$(e,l),$(e,r),o=!0},p(t,l){const s={};4&l&&(s.name=t[2][t[9]][t[6].graphicKey]),n.$set(s),(!o||4&l)&&i!==(i=t[9]+"")&&N(r,i),(!o||4&l&&c!==(c=_t+"/"+t[6].name+"/"+t[9]))&&S(e,"href",c),6&l&&j(e,"active",t[1]==t[9])},i(t){o||(Q(n.$$.fragment,t),o=!0)},o(t){tt(n.$$.fragment,t),o=!1},d(t){t&&d(e),it(n)}}}function At(t){let e,n,l,r,c,o,i=t[6].name+"",s=t[6].name==t[0]&&Ct(t);return{c(){e=g("a"),n=y(i),r=x(),s&&s.c(),c=b(),S(e,"class","list-group-item list-group-item-action"),S(e,"href",l=_t+"/"+t[6].name+"/new"),j(e,"active",t[0]==t[6].name)},m(t,l){m(t,e,l),$(e,n),m(t,r,l),s&&s.m(t,l),m(t,c,l),o=!0},p(t,n){9&n&&j(e,"active",t[0]==t[6].name),t[6].name==t[0]?s?(s.p(t,n),1&n&&Q(s,1)):(s=Ct(t),s.c(),Q(s,1),s.m(c.parentNode,c)):s&&(X(),tt(s,1,1,()=>{s=null}),Y())},i(t){o||(Q(s),o=!0)},o(t){tt(s),o=!1},d(t){t&&d(e),t&&d(r),s&&s.d(t),t&&d(c)}}}function Dt(t){let e,n,l,r,c,o,i,s,u,p=t[3],v=[];for(let e=0;e<p.length;e+=1)v[e]=At(Vt(t,p,e));const b=t=>tt(v[t],1,1,()=>{v[t]=null}),w=t[5].default,k=a(w,t,t[4],null);return{c(){e=g("div"),n=g("div"),l=g("div"),r=g("a"),c=y("Art"),o=x();for(let t=0;t<v.length;t+=1)v[t].c();i=x(),s=g("div"),k&&k.c(),S(r,"class","list-group-item list-group-item-action"),S(r,"href",_t),j(r,"active","art"==t[0]),S(l,"class","list-group"),S(s,"class","flex-grow"),S(e,"class","flex align-top")},m(t,a){m(t,e,a),$(e,n),$(n,l),$(l,r),$(r,c),$(l,o);for(let t=0;t<v.length;t+=1)v[t].m(l,null);$(e,i),$(e,s),k&&k.m(s,null),u=!0},p(t,[e]){if(1&e&&j(r,"active","art"==t[0]),15&e){let n;for(p=t[3],n=0;n<p.length;n+=1){const r=Vt(t,p,n);v[n]?(v[n].p(r,e),Q(v[n],1)):(v[n]=At(r),v[n].c(),Q(v[n],1),v[n].m(l,null))}for(X(),n=p.length;n<v.length;n+=1)b(n);Y()}k&&k.p&&16&e&&f(k,w,t,t[4],e,null,null)},i(t){if(!u){for(let t=0;t<p.length;t+=1)Q(v[t]);Q(k,t),u=!0}},o(t){v=v.filter(Boolean);for(let t=0;t<v.length;t+=1)tt(v[t]);tt(k,t),u=!1},d(t){t&&d(e),h(v,t),k&&k.d(t)}}}const _t="#/level-builder";function Jt(t,e,n){let{tab:l}=e,{activeName:r}=e,{store:c}=e;let{$$slots:o={},$$scope:i}=e;return t.$$set=t=>{"tab"in t&&n(0,l=t.tab),"activeName"in t&&n(1,r=t.activeName),"store"in t&&n(2,c=t.store),"$$scope"in t&&n(4,i=t.$$scope)},[l,r,c,[{name:"blocks",graphicKey:"graphic"},{name:"characters",graphicKey:"graphicStill"},{name:"enemies",graphicKey:"graphicStill"},{name:"levels",graphicKey:null}],i,o]}class Rt extends at{constructor(t){super(),st(this,t,Jt,Dt,o,{tab:0,activeName:1,store:2})}}function It(t,e,n){const l=t.slice();return l[46]=e[n],l}function Tt(t,e,n){const l=t.slice();return l[43]=e[n],l}function Bt(t,e,n){const l=t.slice();return l[52]=e[n],l}function Ft(t,e,n){const l=t.slice();return l[49]=e[n],l}function Kt(t,e,n){const l=t.slice();return l[55]=e[n],l}function zt(t,e,n){const l=t.slice();return l[58]=e[n],l}function Lt(t){let e,n=t[9],l=[];for(let e=0;e<n.length;e+=1)l[e]=Ut(zt(t,n,e));return{c(){e=g("div");for(let t=0;t<l.length;t+=1)l[t].c()},m(t,n){m(t,e,n);for(let t=0;t<l.length;t+=1)l[t].m(e,null)},p(t,r){if(25166337&r[0]){let c;for(n=t[9],c=0;c<n.length;c+=1){const o=zt(t,n,c);l[c]?l[c].p(o,r):(l[c]=Ut(o),l[c].c(),l[c].m(e,null))}for(;c<l.length;c+=1)l[c].d(1);l.length=n.length}},d(t){t&&d(e),h(l,t)}}}function Ut(t){let e,n,l,c,o,i,s,a,u,f=t[58]+"";function p(...e){return t[29](t[58],...e)}function h(...e){return t[30](t[58],...e)}return{c(){e=g("div"),n=g("button"),l=y(f),o=x(),i=g("button"),i.textContent="x",s=x(),S(n,"type","button"),S(n,"class",c="btn btn-sm btn-"+(t[58]==t[0]?"primary active":"secondary")),S(i,"type","button"),S(i,"class","btn btn-sm btn-secondary"),S(e,"class","btn-group mr-1 mb-1")},m(t,r){m(t,e,r),$(e,n),$(n,l),$(e,o),$(e,i),$(e,s),a||(u=[w(n,"click",p),w(i,"click",h)],a=!0)},p(e,r){t=e,512&r[0]&&f!==(f=t[58]+"")&&N(l,f),513&r[0]&&c!==(c="btn btn-sm btn-"+(t[58]==t[0]?"primary active":"secondary"))&&S(n,"class",c)},d(t){t&&d(e),a=!1,r(u)}}}function Pt(t){let e,n,l;function r(...e){return t[36](t[55],...e)}return{c(){e=g("button"),S(e,"type","button"),M(e,"background","transparent"!=t[55]?t[55]:"linear-gradient(110deg, rgba(200,200,200,1) 45%, rgba(255,255,255,1) 55%, rgba(255,255,255,1) 100%)"),S(e,"class","svelte-1a4yczt"),j(e,"active",t[55]==t[1])},m(t,c){m(t,e,c),n||(l=w(e,"click",r),n=!0)},p(n,l){t=n,16386&l[0]&&j(e,"active",t[55]==t[1])},d(t){t&&d(e),n=!1,l()}}}function Gt(t){let e,n=[0,0],l=[];for(let e=0;e<2;e+=1)l[e]=Zt(Ft(t,n,e));return{c(){e=g("div");for(let t=0;t<2;t+=1)l[t].c();S(e,"class","ml-3")},m(t,n){m(t,e,n);for(let t=0;t<2;t+=1)l[t].m(e,null)},p(t,r){if(1024&r[0]){let c;for(n=[0,0],c=0;c<2;c+=1){const o=Ft(t,n,c);l[c]?l[c].p(o,r):(l[c]=Zt(o),l[c].c(),l[c].m(e,null))}for(;c<2;c+=1)l[c].d(1)}},d(t){t&&d(e),h(l,t)}}}function qt(t){let e,n;return{c(){e=g("img"),e.src!==(n=t[10])&&S(e,"src",n),S(e,"alt","block repeating preview")},m(t,n){m(t,e,n)},p(t,l){1024&l[0]&&e.src!==(n=t[10])&&S(e,"src",n)},d(t){t&&d(e)}}}function Zt(t){let e,n,l=[0,0,0,0],r=[];for(let e=0;e<4;e+=1)r[e]=qt(Bt(t,l,e));return{c(){e=g("div");for(let t=0;t<4;t+=1)r[t].c();n=x()},m(t,l){m(t,e,l);for(let t=0;t<4;t+=1)r[t].m(e,null);$(e,n)},p(t,c){if(1024&c[0]){let o;for(l=[0,0,0,0],o=0;o<4;o+=1){const i=Bt(t,l,o);r[o]?r[o].p(i,c):(r[o]=qt(i),r[o].c(),r[o].m(e,n))}for(;o<4;o+=1)r[o].d(1)}},d(t){t&&d(e),h(r,t)}}}function Wt(t){let e,n,l,r,c,o;return{c(){e=v("rect"),S(e,"y",n=t[43]*t[2]),S(e,"x",l=t[46]*t[2]),M(e,"fill",te(t[8],t[43],t[46])),S(e,"width",t[2]),S(e,"height",t[2]),S(e,"data-row",r=t[43]),S(e,"data-column",c=t[46]),S(e,"stroke",o=t[7]?"#eee":null)},m(t,n){m(t,e,n)},p(t,i){2052&i[0]&&n!==(n=t[43]*t[2])&&S(e,"y",n),4100&i[0]&&l!==(l=t[46]*t[2])&&S(e,"x",l),6400&i[0]&&M(e,"fill",te(t[8],t[43],t[46])),4&i[0]&&S(e,"width",t[2]),4&i[0]&&S(e,"height",t[2]),2048&i[0]&&r!==(r=t[43])&&S(e,"data-row",r),4096&i[0]&&c!==(c=t[46])&&S(e,"data-column",c),128&i[0]&&o!==(o=t[7]?"#eee":null)&&S(e,"stroke",o)},d(t){t&&d(e)}}}function Xt(t){let e,n=t[12],l=[];for(let e=0;e<n.length;e+=1)l[e]=Wt(It(t,n,e));return{c(){for(let t=0;t<l.length;t+=1)l[t].c();e=b()},m(t,n){for(let e=0;e<l.length;e+=1)l[e].m(t,n);m(t,e,n)},p(t,r){if(6532&r[0]){let c;for(n=t[12],c=0;c<n.length;c+=1){const o=It(t,n,c);l[c]?l[c].p(o,r):(l[c]=Wt(o),l[c].c(),l[c].m(e.parentNode,e))}for(;c<l.length;c+=1)l[c].d(1);l.length=n.length}},d(t){h(l,t),t&&d(e)}}}function Yt(t){let e,n,l,c,o,i,s,a,u,f,p,b,M,j,V,C,E,A,D,_,J,R,I,T,B,F,K,z,L,U,P,G,q,Z,W,X,Y,Q,tt,et,nt,lt,rt,ct,ot,it,st,at,ut,ft,pt,$t,mt,dt,ht,gt,vt=t[5].length+"",yt=t[6].length+"",xt=t[9].length&&Lt(t),bt=t[14],wt=[];for(let e=0;e<bt.length;e+=1)wt[e]=Pt(Kt(t,bt,e));let kt=20==t[4]&&20==t[3]&&Gt(t),St=t[11],Ot=[];for(let e=0;e<St.length;e+=1)Ot[e]=Xt(Tt(t,St,e));return{c(){xt&&xt.c(),e=x(),n=g("div"),l=g("button"),l.textContent="Save",c=x(),o=g("button"),o.textContent="Reset",i=x(),s=g("div"),a=g("button"),a.textContent="Flip horizontal",u=x(),f=g("button"),f.textContent="Flip vertical",p=x(),b=g("div"),M=g("button"),j=y("Undo "),V=y(vt),E=x(),A=g("button"),D=y("Redo "),_=y(yt),R=x(),I=g("div"),T=y("Grid size\r\n\t\t\t"),B=g("input"),F=x(),K=g("div"),z=y("Height\r\n\t\t\t"),L=g("input"),U=x(),P=g("div"),G=y("Width\r\n\t\t\t"),q=g("input"),Z=x(),W=g("label"),X=g("input"),Y=y("\r\n\t\t\tShow grid"),Q=x(),tt=g("div"),et=g("div"),nt=g("div");for(let t=0;t<wt.length;t+=1)wt[t].c();lt=x(),rt=g("div"),ct=g("div"),ot=y("Preview at in-game size / repeated next to same graphic:\r\n\t\t\t\t"),it=g("div"),st=g("div"),at=g("img"),ft=x(),kt&&kt.c(),pt=x(),$t=v("svg");for(let t=0;t<Ot.length;t+=1)Ot[t].c();S(l,"type","button"),S(l,"class","btn btn-success btn-sm mr-2"),S(o,"type","button"),S(o,"class","btn btn-secondary btn-sm"),S(a,"type","button"),S(a,"class","btn btn-secondary btn-sm"),S(f,"type","button"),S(f,"class","btn btn-secondary btn-sm"),S(s,"class","btn-group"),S(M,"type","button"),M.disabled=C=0==t[5].length,S(M,"class","btn btn-default btn-sm"),S(A,"type","button"),A.disabled=J=0==t[6].length,S(A,"class","btn btn-default btn-sm"),S(b,"class","btn-group"),S(B,"type","number"),S(B,"min","15"),S(B,"max","50"),S(B,"step","5"),S(B,"class","svelte-1a4yczt"),S(L,"type","number"),S(L,"placeholder","Height"),S(L,"class","svelte-1a4yczt"),S(q,"type","number"),S(q,"placeholder","Width"),S(q,"class","svelte-1a4yczt"),S(X,"type","checkbox"),S(n,"class","flex my-3 svelte-1a4yczt"),S(nt,"class","color-picker svelte-1a4yczt"),S(et,"class","controls"),at.src!==(ut=t[10])&&S(at,"src",ut),S(at,"alt","preview"),S(it,"class","p-3 preview-bg flex svelte-1a4yczt"),S(ct,"class","my-1"),S($t,"class","preview-bg svelte-1a4yczt"),S($t,"width",mt=t[4]*(t[2]+1)),S($t,"height",dt=t[3]*(t[2]+1)),S(rt,"class","flex-grow "),S(tt,"class","flex align-top")},m(r,d){xt&&xt.m(r,d),m(r,e,d),m(r,n,d),$(n,l),$(n,c),$(n,o),$(n,i),$(n,s),$(s,a),$(s,u),$(s,f),$(n,p),$(n,b),$(b,M),$(M,j),$(M,V),$(b,E),$(b,A),$(A,D),$(A,_),$(n,R),$(n,I),$(I,T),$(I,B),H(B,t[2]),$(n,F),$(n,K),$(K,z),$(K,L),H(L,t[3]),$(n,U),$(n,P),$(P,G),$(P,q),H(q,t[4]),$(n,Z),$(n,W),$(W,X),X.checked=t[7],$(W,Y),m(r,Q,d),m(r,tt,d),$(tt,et),$(et,nt);for(let t=0;t<wt.length;t+=1)wt[t].m(nt,null);$(tt,lt),$(tt,rt),$(rt,ct),$(ct,ot),$(ct,it),$(it,st),$(st,at),$(it,ft),kt&&kt.m(it,null),$(rt,pt),$(rt,$t);for(let t=0;t<Ot.length;t+=1)Ot[t].m($t,null);ht||(gt=[w(l,"click",t[31]),w(o,"click",t[15]),w(a,"click",t[27]),w(f,"click",t[26]),w(M,"click",t[19]),w(A,"click",t[20]),w(B,"input",t[32]),w(L,"input",t[33]),w(q,"input",t[34]),w(X,"change",t[35]),w($t,"mousedown",t[16]),w($t,"mouseup",t[17]),w($t,"contextmenu",k(t[28])),w($t,"mousemove",t[37])],ht=!0)},p(t,n){if(t[9].length?xt?xt.p(t,n):(xt=Lt(t),xt.c(),xt.m(e.parentNode,e)):xt&&(xt.d(1),xt=null),32&n[0]&&vt!==(vt=t[5].length+"")&&N(V,vt),32&n[0]&&C!==(C=0==t[5].length)&&(M.disabled=C),64&n[0]&&yt!==(yt=t[6].length+"")&&N(_,yt),64&n[0]&&J!==(J=0==t[6].length)&&(A.disabled=J),4&n[0]&&O(B.value)!==t[2]&&H(B,t[2]),8&n[0]&&O(L.value)!==t[3]&&H(L,t[3]),16&n[0]&&O(q.value)!==t[4]&&H(q,t[4]),128&n[0]&&(X.checked=t[7]),2113538&n[0]){let e;for(bt=t[14],e=0;e<bt.length;e+=1){const l=Kt(t,bt,e);wt[e]?wt[e].p(l,n):(wt[e]=Pt(l),wt[e].c(),wt[e].m(nt,null))}for(;e<wt.length;e+=1)wt[e].d(1);wt.length=bt.length}if(1024&n[0]&&at.src!==(ut=t[10])&&S(at,"src",ut),20==t[4]&&20==t[3]?kt?kt.p(t,n):(kt=Gt(t),kt.c(),kt.m(it,null)):kt&&(kt.d(1),kt=null),6532&n[0]){let e;for(St=t[11],e=0;e<St.length;e+=1){const l=Tt(t,St,e);Ot[e]?Ot[e].p(l,n):(Ot[e]=Xt(l),Ot[e].c(),Ot[e].m($t,null))}for(;e<Ot.length;e+=1)Ot[e].d(1);Ot.length=St.length}20&n[0]&&mt!==(mt=t[4]*(t[2]+1))&&S($t,"width",mt),12&n[0]&&dt!==(dt=t[3]*(t[2]+1))&&S($t,"height",dt)},d(t){xt&&xt.d(t),t&&d(e),t&&d(n),t&&d(Q),t&&d(tt),h(wt,t),kt&&kt.d(),h(Ot,t),ht=!1,r(gt)}}}function Qt(t){let e,n,l,r;return e=new Rt({props:{tab:"art",$$slots:{default:[Yt]},$$scope:{ctx:t}}}),{c(){ct(e.$$.fragment)},m(c,o){ot(e,c,o),n=!0,l||(r=w(window,"keyup",t[25]),l=!0)},p(t,n){const l={};8191&n[0]|1073741824&n[1]&&(l.$$scope={dirty:n,ctx:t}),e.$set(l)},i(t){n||(Q(e.$$.fragment,t),n=!0)},o(t){tt(e.$$.fragment,t),n=!1},d(t){it(e,t),l=!1,r()}}}function te(t,e,n){return t.length>e&&t[e].length>n?t[e][n]||"transparent":"white"}function ee(t,e,n){let l;const r=kt("pixel-drawings",{});s(t,r,t=>n(39,l=t));let c=null;let o="black",i=25,a=20,u=20,f=[],$=[],m=!0,d=[],h=!1;function g(t=!0){t&&y(),n(8,d=x(a)),n(0,c=null)}function v(t){if(!h)return;const e=t.dataset.row,l=t.dataset.column;null!=e&&null!=l&&function(t,e,l=o){if(t>d.length){const t=a-d.length;n(8,d=d.concat(x(t)))}n(8,d[t][e]=l,d)}(e,l)}function y(){n(5,f=[...f.slice(Math.max(f.length-20,0)),JSON.stringify(d)]),n(6,$=[])}function x(t){return[...Array(t)].map(t=>function(t){return[...Array(t)].map(t=>"transparent")}(u))}function b(){0!=f.length&&(n(6,$=[...$,JSON.stringify(d)]),n(8,d=JSON.parse(f.pop())),n(5,f))}function w(){0!=$.length&&(n(5,f=[...f,JSON.stringify(d)]),n(8,d=JSON.parse($.pop())),n(6,$))}function k(t){n(1,o=t)}function S(){const t=prompt("Give us a name",c||"");null!=t&&0!=t.trim().length&&(p(r,l[t]={name:t,gridSize:i,width:u,height:a,data:d,showGrid:m,png:wt(d,u,a)},l),n(0,c=t))}function N(t){let e=JSON.parse(JSON.stringify(l[t]));n(8,d=e.data),n(2,i=e.gridSize),n(4,u=e.width||e.data[0].length),n(3,a=e.height||e.data.length),n(7,m=e.showGrid||m),n(5,f=[]),n(6,$=[]),n(0,c=t)}function H(t){confirm(`Are you sure you want to delete ${t}?`)&&l.hasOwnProperty(t)&&(delete l[t],r.set(l))}g(!1);let M,j,V,C;return t.$$.update=()=>{256&t.$$.dirty[1]&&n(9,M=Object.keys(l)),280&t.$$.dirty[0]&&n(10,j=wt(d,u,a)),8&t.$$.dirty[0]&&n(11,V=[...Array(a)].map((t,e)=>e)),16&t.$$.dirty[0]&&n(12,C=[...Array(u)].map((t,e)=>e))},[c,o,i,a,u,f,$,m,d,M,j,V,C,r,["transparent","white","rgb(204, 204, 204)","rgb(160, 164, 160)","rgb(102, 102, 102)","rgb(51, 51, 51)","black","rgb(119, 59, 11)","blue","pink","yellow","orange","red","purple","teal","green","rgb(40, 40, 184)","rgb(40, 80, 224)","rgb(80, 80, 248)","rgb(120, 124, 248)","rgb(160, 0, 16)","rgb(248, 0, 32)","rgb(208, 124, 96)","rgb(248, 208, 176)","red","rgb(253, 240, 232)","rgb(245, 222, 208)","rgb(220, 201, 187)","rgb(197, 179, 167)","rgb(186, 167, 153)","rgb(146, 129, 119)","rgb(120, 107, 99)","rgb(80, 68, 68)","rgb(122, 80, 55)","rgb(178, 105, 58)","rgb(203, 140, 97)","rgb(238, 187, 155)","rgb(75, 53, 39)"],g,function(t){t.altKey||0!==t.button?n(1,o=t.target.style.fill):(y(),h=!0,v(t.target))},function(t){h=!1},v,b,w,k,S,N,H,function(t){switch(t.code){case"KeyZ":t.ctrlKey&&b();break;case"KeyY":t.ctrlKey&&w()}},function(){n(8,d=d.slice(0,a).reverse())},function(){n(8,d=d.map(t=>t.slice(0,u).reverse()))},function(e){D(t,e)},t=>N(t),t=>H(t),()=>S(),function(){i=O(this.value),n(2,i)},function(){a=O(this.value),n(3,a)},function(){u=O(this.value),n(4,u)},function(){m=this.checked,n(7,m)},t=>k(t),t=>v(t.target)]}class ne extends at{constructor(t){super(),st(this,t,ee,Qt,o,{},[-1,-1])}}function le(t,e,n){const l=t.slice();return l[8]=e[n],l}function re(t){let e,n,l,r,c,o;function i(...e){return t[6](t[8],...e)}return n=new Mt({props:{name:t[8],spin:t[1]}}),{c(){e=g("div"),ct(n.$$.fragment),l=x(),S(e,"class","svelte-1u0b3hs"),j(e,"active",t[0]==t[8])},m(t,s){m(t,e,s),ot(n,e,null),$(e,l),r=!0,c||(o=w(e,"click",i),c=!0)},p(l,r){t=l;const c={};4&r&&(c.name=t[8]),2&r&&(c.spin=t[1]),n.$set(c),5&r&&j(e,"active",t[0]==t[8])},i(t){r||(Q(n.$$.fragment,t),r=!0)},o(t){tt(n.$$.fragment,t),r=!1},d(t){t&&d(e),it(n),c=!1,o()}}}function ce(t){let e,n,l,r,c;const o=t[5].default,i=a(o,t,t[4],null),s=i||function(t){let e;return{c(){e=y("Graphic")},m(t,n){m(t,e,n)},d(t){t&&d(e)}}}();let u=t[2],p=[];for(let e=0;e<u.length;e+=1)p[e]=re(le(t,u,e));const v=t=>tt(p[t],1,1,()=>{p[t]=null});return{c(){e=g("div"),n=g("label"),s&&s.c(),l=x(),r=g("div");for(let t=0;t<p.length;t+=1)p[t].c();S(n,"for","graphic"),S(r,"class","options svelte-1u0b3hs"),S(e,"class","form-group svelte-1u0b3hs")},m(t,o){m(t,e,o),$(e,n),s&&s.m(n,null),$(e,l),$(e,r);for(let t=0;t<p.length;t+=1)p[t].m(r,null);c=!0},p(t,[e]){if(i&&i.p&&16&e&&f(i,o,t,t[4],e,null,null),7&e){let n;for(u=t[2],n=0;n<u.length;n+=1){const l=le(t,u,n);p[n]?(p[n].p(l,e),Q(p[n],1)):(p[n]=re(l),p[n].c(),Q(p[n],1),p[n].m(r,null))}for(X(),n=u.length;n<p.length;n+=1)v(n);Y()}},i(t){if(!c){Q(s,t);for(let t=0;t<u.length;t+=1)Q(p[t]);c=!0}},o(t){tt(s,t),p=p.filter(Boolean);for(let t=0;t<p.length;t+=1)tt(p[t]);c=!1},d(t){t&&d(e),s&&s.d(t),h(p,t)}}}function oe(t,e,n){let l;s(t,St,t=>n(7,l=t));let{value:r=null}=e,{filter:c=null}=e,{spin:o=!1}=e,{$$slots:i={},$$scope:a}=e;let u;return t.$$set=t=>{"value"in t&&n(0,r=t.value),"filter"in t&&n(3,c=t.filter),"spin"in t&&n(1,o=t.spin),"$$scope"in t&&n(4,a=t.$$scope)},t.$$.update=()=>{136&t.$$.dirty&&n(2,u=Object.keys(l).filter(t=>null==c||c(l[t])))},[r,o,u,c,a,i,t=>n(0,r=t)]}class ie extends at{constructor(t){super(),st(this,t,oe,ce,o,{value:0,filter:3,spin:1})}}function se(t){let e,n,l,r,c,o,i;const s=t[3].default,u=a(s,t,t[2],null);return{c(){e=g("div"),n=g("label"),u&&u.c(),l=x(),r=g("input"),S(n,"for",t[1]),S(r,"name",t[1]),S(r,"id",t[1]),S(r,"type","text"),S(r,"class","form-control"),S(e,"class","form-group")},m(s,a){m(s,e,a),$(e,n),u&&u.m(n,null),$(e,l),$(e,r),H(r,t[0]),c=!0,o||(i=w(r,"input",t[4]),o=!0)},p(t,[e]){u&&u.p&&4&e&&f(u,s,t,t[2],e,null,null),(!c||2&e)&&S(n,"for",t[1]),(!c||2&e)&&S(r,"name",t[1]),(!c||2&e)&&S(r,"id",t[1]),1&e&&r.value!==t[0]&&H(r,t[0])},i(t){c||(Q(u,t),c=!0)},o(t){tt(u,t),c=!1},d(t){t&&d(e),u&&u.d(t),o=!1,i()}}}function ae(t,e,n){let{value:l=null}=e,{name:r="text"}=e,{$$slots:c={},$$scope:o}=e;return t.$$set=t=>{"value"in t&&n(0,l=t.value),"name"in t&&n(1,r=t.name),"$$scope"in t&&n(2,o=t.$$scope)},[l,r,o,c,function(){l=this.value,n(0,l)}]}class ue extends at{constructor(t){super(),st(this,t,ae,se,o,{value:0,name:1})}}function fe(t){let e,n,l,r,c,o,i,s;const u=t[3].default,p=a(u,t,t[2],null);return{c(){e=g("div"),n=g("div"),l=g("input"),r=x(),c=g("label"),p&&p.c(),S(l,"name",t[1]),S(l,"id",t[1]),S(l,"type","checkbox"),S(l,"class","form-check-input"),S(c,"class","form-check-label"),S(c,"for",t[1]),S(n,"class","form-check"),S(e,"class","form-group")},m(a,u){m(a,e,u),$(e,n),$(n,l),l.checked=t[0],$(n,r),$(n,c),p&&p.m(c,null),o=!0,i||(s=w(l,"change",t[4]),i=!0)},p(t,[e]){(!o||2&e)&&S(l,"name",t[1]),(!o||2&e)&&S(l,"id",t[1]),1&e&&(l.checked=t[0]),p&&p.p&&4&e&&f(p,u,t,t[2],e,null,null),(!o||2&e)&&S(c,"for",t[1])},i(t){o||(Q(p,t),o=!0)},o(t){tt(p,t),o=!1},d(t){t&&d(e),p&&p.d(t),i=!1,s()}}}function pe(t,e,n){let{checked:l=null}=e,{name:r="check"}=e,{$$slots:c={},$$scope:o}=e;return t.$$set=t=>{"checked"in t&&n(0,l=t.checked),"name"in t&&n(1,r=t.name),"$$scope"in t&&n(2,o=t.$$scope)},[l,r,o,c,function(){l=this.checked,n(0,l)}]}class $e extends at{constructor(t){super(),st(this,t,pe,fe,o,{checked:0,name:1})}}function me(t){let e,n,l,r,c,o,i;const s=t[6].default,u=a(s,t,t[5],null);return{c(){e=g("div"),n=g("label"),u&&u.c(),l=x(),r=g("input"),S(n,"for",t[1]),S(r,"name",t[1]),S(r,"id",t[1]),S(r,"type","number"),S(r,"min",t[2]),S(r,"max",t[3]),S(r,"step",t[4]),S(r,"class","form-control"),S(e,"class","form-group")},m(s,a){m(s,e,a),$(e,n),u&&u.m(n,null),$(e,l),$(e,r),H(r,t[0]),c=!0,o||(i=w(r,"input",t[7]),o=!0)},p(t,[e]){u&&u.p&&32&e&&f(u,s,t,t[5],e,null,null),(!c||2&e)&&S(n,"for",t[1]),(!c||2&e)&&S(r,"name",t[1]),(!c||2&e)&&S(r,"id",t[1]),(!c||4&e)&&S(r,"min",t[2]),(!c||8&e)&&S(r,"max",t[3]),(!c||16&e)&&S(r,"step",t[4]),1&e&&O(r.value)!==t[0]&&H(r,t[0])},i(t){c||(Q(u,t),c=!0)},o(t){tt(u,t),c=!1},d(t){t&&d(e),u&&u.d(t),o=!1,i()}}}function de(t,e,n){let{value:l=null}=e,{name:r="num"}=e,{min:c=null}=e,{max:o=null}=e,{step:i=1}=e,{$$slots:s={},$$scope:a}=e;return t.$$set=t=>{"value"in t&&n(0,l=t.value),"name"in t&&n(1,r=t.name),"min"in t&&n(2,c=t.min),"max"in t&&n(3,o=t.max),"step"in t&&n(4,i=t.step),"$$scope"in t&&n(5,a=t.$$scope)},[l,r,c,o,i,a,s,function(){l=O(this.value),n(0,l)}]}class he extends at{constructor(t){super(),st(this,t,de,me,o,{value:0,name:1,min:2,max:3,step:4})}}function ge(t){let e,n;const l=t[1].default,r=a(l,t,t[0],null),c=r||function(t){let e;return{c(){e=y("Save")},m(t,n){m(t,e,n)},d(t){t&&d(e)}}}();return{c(){e=g("button"),c&&c.c(),S(e,"type","submit"),S(e,"class","btn btn-success")},m(t,l){m(t,e,l),c&&c.m(e,null),n=!0},p(t,[e]){r&&r.p&&1&e&&f(r,l,t,t[0],e,null,null)},i(t){n||(Q(c,t),n=!0)},o(t){tt(c,t),n=!1},d(t){t&&d(e),c&&c.d(t)}}}function ve(t,e,n){let{$$slots:l={},$$scope:r}=e;return t.$$set=t=>{"$$scope"in t&&n(0,r=t.$$scope)},[r,l]}class ye extends at{constructor(t){super(),st(this,t,ve,ge,o,{})}}const xe=t=>({}),be=t=>({});function we(t){let e,n,l,r,c,o,i,s,u,p;const h=t[1].default,v=a(h,t,t[0],null);o=new ye({});const y=t[1].buttons,b=a(y,t,t[0],be);return{c(){e=g("form"),n=g("div"),l=g("div"),v&&v.c(),r=x(),c=g("div"),ct(o.$$.fragment),i=x(),b&&b.c(),S(l,"class","card-body"),S(c,"class","card-footer"),S(n,"class","card")},m(a,f){m(a,e,f),$(e,n),$(n,l),v&&v.m(l,null),$(n,r),$(n,c),ot(o,c,null),$(c,i),b&&b.m(c,null),s=!0,u||(p=w(e,"submit",k(t[2])),u=!0)},p(t,[e]){v&&v.p&&1&e&&f(v,h,t,t[0],e,null,null),b&&b.p&&1&e&&f(b,y,t,t[0],e,xe,be)},i(t){s||(Q(v,t),Q(o.$$.fragment,t),Q(b,t),s=!0)},o(t){tt(v,t),tt(o.$$.fragment,t),tt(b,t),s=!1},d(t){t&&d(e),v&&v.d(t),it(o),b&&b.d(t),u=!1,p()}}}function ke(t,e,n){let{$$slots:l={},$$scope:r}=e;return t.$$set=t=>{"$$scope"in t&&n(0,r=t.$$scope)},[r,l,function(e){D(t,e)}]}class Se extends at{constructor(t){super(),st(this,t,ke,we,o,{})}}var Oe=kt("blocks",{});function Ne(t){let e;return{c(){e=y("Name")},m(t,n){m(t,e,n)},d(t){t&&d(e)}}}function He(t){let e;return{c(){e=y("Graphic (must be 20x20)")},m(t,n){m(t,e,n)},d(t){t&&d(e)}}}function Me(t){let e;return{c(){e=y("Solid?")},m(t,n){m(t,e,n)},d(t){t&&d(e)}}}function je(t){let e;return{c(){e=y("Throw things that touch it?")},m(t,n){m(t,e,n)},d(t){t&&d(e)}}}function Ve(t){let e;return{c(){e=y("DPS (when players or enemies touch this block, how much damage should they take per second?)")},m(t,n){m(t,e,n)},d(t){t&&d(e)}}}function Ce(e){let n,l,r;return{c(){n=g("button"),n.textContent="Delete",S(n,"type","button"),S(n,"class","btn btn-danger")},m(t,c){m(t,n,c),l||(r=w(n,"click",e[11]),l=!0)},p:t,d(t){t&&d(n),l=!1,r()}}}function Ee(t){let e,n=!t[1]&&Ce(t);return{c(){e=g("span"),n&&n.c(),S(e,"slot","buttons")},m(t,l){m(t,e,l),n&&n.m(e,null)},p(t,l){t[1]?n&&(n.d(1),n=null):n?n.p(t,l):(n=Ce(t),n.c(),n.m(e,null))},d(t){t&&d(e),n&&n.d()}}}function Ae(t){let e,n,l,r,c,o,i,s,a,u,f,p,$,h,g,v;function y(e){t[6].call(null,e)}let b={name:"name",$$slots:{default:[Ne]},$$scope:{ctx:t}};function w(e){t[7].call(null,e)}void 0!==t[0].name&&(b.value=t[0].name),e=new ue({props:b}),J.push(()=>rt(e,"value",y));let k={filter:Je,$$slots:{default:[He]},$$scope:{ctx:t}};function S(e){t[8].call(null,e)}void 0!==t[0].graphic&&(k.value=t[0].graphic),r=new ie({props:k}),J.push(()=>rt(r,"value",w));let O={name:"solid",$$slots:{default:[Me]},$$scope:{ctx:t}};function N(e){t[9].call(null,e)}void 0!==t[0].solid&&(O.checked=t[0].solid),i=new $e({props:O}),J.push(()=>rt(i,"checked",S));let H={name:"throwOnTouch",$$slots:{default:[je]},$$scope:{ctx:t}};function M(e){t[10].call(null,e)}void 0!==t[0].throwOnTouch&&(H.checked=t[0].throwOnTouch),u=new $e({props:H}),J.push(()=>rt(u,"checked",N));let j={name:"dps",$$slots:{default:[Ve]},$$scope:{ctx:t}};return void 0!==t[0].dps&&(j.value=t[0].dps),$=new he({props:j}),J.push(()=>rt($,"value",M)),{c(){ct(e.$$.fragment),l=x(),ct(r.$$.fragment),o=x(),ct(i.$$.fragment),a=x(),ct(u.$$.fragment),p=x(),ct($.$$.fragment),g=x()},m(t,n){ot(e,t,n),m(t,l,n),ot(r,t,n),m(t,o,n),ot(i,t,n),m(t,a,n),ot(u,t,n),m(t,p,n),ot($,t,n),m(t,g,n),v=!0},p(t,l){const o={};32768&l&&(o.$$scope={dirty:l,ctx:t}),!n&&1&l&&(n=!0,o.value=t[0].name,L(()=>n=!1)),e.$set(o);const a={};32768&l&&(a.$$scope={dirty:l,ctx:t}),!c&&1&l&&(c=!0,a.value=t[0].graphic,L(()=>c=!1)),r.$set(a);const p={};32768&l&&(p.$$scope={dirty:l,ctx:t}),!s&&1&l&&(s=!0,p.checked=t[0].solid,L(()=>s=!1)),i.$set(p);const m={};32768&l&&(m.$$scope={dirty:l,ctx:t}),!f&&1&l&&(f=!0,m.checked=t[0].throwOnTouch,L(()=>f=!1)),u.$set(m);const d={};32768&l&&(d.$$scope={dirty:l,ctx:t}),!h&&1&l&&(h=!0,d.value=t[0].dps,L(()=>h=!1)),$.$set(d)},i(t){v||(Q(e.$$.fragment,t),Q(r.$$.fragment,t),Q(i.$$.fragment,t),Q(u.$$.fragment,t),Q($.$$.fragment,t),v=!0)},o(t){tt(e.$$.fragment,t),tt(r.$$.fragment,t),tt(i.$$.fragment,t),tt(u.$$.fragment,t),tt($.$$.fragment,t),v=!1},d(t){it(e,t),t&&d(l),it(r,t),t&&d(o),it(i,t),t&&d(a),it(u,t),t&&d(p),it($,t),t&&d(g)}}}function De(t){let e,n;return e=new Se({props:{$$slots:{default:[Ae],buttons:[Ee]},$$scope:{ctx:t}}}),e.$on("submit",t[3]),{c(){ct(e.$$.fragment)},m(t,l){ot(e,t,l),n=!0},p(t,n){const l={};32771&n&&(l.$$scope={dirty:n,ctx:t}),e.$set(l)},i(t){n||(Q(e.$$.fragment,t),n=!0)},o(t){tt(e.$$.fragment,t),n=!1},d(t){it(e,t)}}}function _e(t){let e,n;return e=new Rt({props:{tab:"blocks",activeName:t[0].name,store:t[2],$$slots:{default:[De]},$$scope:{ctx:t}}}),{c(){ct(e.$$.fragment)},m(t,l){ot(e,t,l),n=!0},p(t,[n]){const l={};1&n&&(l.activeName=t[0].name),4&n&&(l.store=t[2]),32771&n&&(l.$$scope={dirty:n,ctx:t}),e.$set(l)},i(t){n||(Q(e.$$.fragment,t),n=!0)},o(t){tt(e.$$.fragment,t),n=!1},d(t){it(e,t)}}}const Je=t=>20==t.width&&20==t.height;function Re(t,e,n){let l;s(t,Oe,t=>n(2,l=t));let r,{params:c={}}=e;function o(t){confirm(`Are you sure you want to delete "${t}"?`)&&(delete l[t],Oe.set(l),yt("/level-builder/blocks/new"))}let i,a;return t.$$set=t=>{"params"in t&&n(5,c=t.params)},t.$$.update=()=>{var e;32&t.$$.dirty&&n(12,i=decodeURIComponent(c.name)||"new"),4096&t.$$.dirty&&("new"==i?n(0,r={name:"",solid:!0,throwOnTouch:!1,dps:0}):(e=i,n(0,r=JSON.parse(JSON.stringify(l[e]))))),4096&t.$$.dirty&&n(1,a="new"==i)},[r,a,l,function(){p(Oe,l[r.name]=JSON.parse(JSON.stringify(r)),l),yt("/level-builder/blocks/"+encodeURIComponent(r.name))},o,c,function(t){r.name=t,n(0,r)},function(t){r.graphic=t,n(0,r)},function(t){r.solid=t,n(0,r)},function(t){r.throwOnTouch=t,n(0,r)},function(t){r.dps=t,n(0,r)},()=>o(r.name)]}class Ie extends at{constructor(t){super(),st(this,t,Re,_e,o,{params:5})}}var Te=kt("characters",{});function Be(t){let e;return{c(){e=y("Name")},m(t,n){m(t,e,n)},d(t){t&&d(e)}}}function Fe(t){let e;return{c(){e=y("Standing still graphic")},m(t,n){m(t,e,n)},d(t){t&&d(e)}}}function Ke(t){let e;return{c(){e=y("Spinning graphic")},m(t,n){m(t,e,n)},d(t){t&&d(e)}}}function ze(t){let e;return{c(){e=y("Max velocity")},m(t,n){m(t,e,n)},d(t){t&&d(e)}}}function Le(t){let e;return{c(){e=y("Jump velocity")},m(t,n){m(t,e,n)},d(t){t&&d(e)}}}function Ue(t){let e;return{c(){e=y("Gravity multiplier")},m(t,n){m(t,e,n)},d(t){t&&d(e)}}}function Pe(t){let e;return{c(){e=y("Fall damage multiplier")},m(t,n){m(t,e,n)},d(t){t&&d(e)}}}function Ge(t){let e;return{c(){e=y("Max health")},m(t,n){m(t,e,n)},d(t){t&&d(e)}}}function qe(t){let e;return{c(){e=y("DPS (when in contact with enemies - we will replace this with abilities later)")},m(t,n){m(t,e,n)},d(t){t&&d(e)}}}function Ze(t){let e;return{c(){e=y("Can fly?")},m(t,n){m(t,e,n)},d(t){t&&d(e)}}}function We(e){let n,l,r;return{c(){n=g("button"),n.textContent="Delete",S(n,"type","button"),S(n,"class","btn btn-danger")},m(t,c){m(t,n,c),l||(r=w(n,"click",e[16]),l=!0)},p:t,d(t){t&&d(n),l=!1,r()}}}function Xe(t){let e,n=!t[1]&&We(t);return{c(){e=g("span"),n&&n.c(),S(e,"slot","buttons")},m(t,l){m(t,e,l),n&&n.m(e,null)},p(t,l){t[1]?n&&(n.d(1),n=null):n?n.p(t,l):(n=We(t),n.c(),n.m(e,null))},d(t){t&&d(e),n&&n.d()}}}function Ye(t){let e,n,l,r,c,o,i,s,a,u,f,p,$,h,g,v,y,b,w,k,S,O,N,H,M,j,V,C,E,A,D;function _(e){t[6].call(null,e)}let R={name:"name",$$slots:{default:[Be]},$$scope:{ctx:t}};function I(e){t[7].call(null,e)}void 0!==t[0].name&&(R.value=t[0].name),e=new ue({props:R}),J.push(()=>rt(e,"value",_));let T={filter:en,$$slots:{default:[Fe]},$$scope:{ctx:t}};function B(e){t[8].call(null,e)}void 0!==t[0].graphicStill&&(T.value=t[0].graphicStill),r=new ie({props:T}),J.push(()=>rt(r,"value",I));let F={filter:nn,spin:!0,$$slots:{default:[Ke]},$$scope:{ctx:t}};function K(e){t[9].call(null,e)}void 0!==t[0].graphicSpinning&&(F.value=t[0].graphicSpinning),i=new ie({props:F}),J.push(()=>rt(i,"value",B));let z={name:"maxVelocity",min:0,$$slots:{default:[ze]},$$scope:{ctx:t}};function U(e){t[10].call(null,e)}void 0!==t[0].maxVelocity&&(z.value=t[0].maxVelocity),u=new he({props:z}),J.push(()=>rt(u,"value",K));let P={name:"jumpVelocity",min:0,$$slots:{default:[Le]},$$scope:{ctx:t}};function G(e){t[11].call(null,e)}void 0!==t[0].jumpVelocity&&(P.value=t[0].jumpVelocity),$=new he({props:P}),J.push(()=>rt($,"value",U));let q={name:"gravityMultiplier",min:0,max:2,step:.1,$$slots:{default:[Ue]},$$scope:{ctx:t}};function Z(e){t[12].call(null,e)}void 0!==t[0].gravityMultiplier&&(q.value=t[0].gravityMultiplier),v=new he({props:q}),J.push(()=>rt(v,"value",G));let W={name:"fallDamageMultiplier",min:0,max:1,step:.1,$$slots:{default:[Pe]},$$scope:{ctx:t}};function X(e){t[13].call(null,e)}void 0!==t[0].fallDamageMultiplier&&(W.value=t[0].fallDamageMultiplier),w=new he({props:W}),J.push(()=>rt(w,"value",Z));let Y={name:"maxHealth",$$slots:{default:[Ge]},$$scope:{ctx:t}};function et(e){t[14].call(null,e)}void 0!==t[0].maxHealth&&(Y.value=t[0].maxHealth),O=new he({props:Y}),J.push(()=>rt(O,"value",X));let nt={name:"dps",$$slots:{default:[qe]},$$scope:{ctx:t}};function lt(e){t[15].call(null,e)}void 0!==t[0].dps&&(nt.value=t[0].dps),M=new he({props:nt}),J.push(()=>rt(M,"value",et));let st={name:"canFly",$$slots:{default:[Ze]},$$scope:{ctx:t}};return void 0!==t[0].canFly&&(st.checked=t[0].canFly),C=new $e({props:st}),J.push(()=>rt(C,"checked",lt)),{c(){ct(e.$$.fragment),l=x(),ct(r.$$.fragment),o=x(),ct(i.$$.fragment),a=x(),ct(u.$$.fragment),p=x(),ct($.$$.fragment),g=x(),ct(v.$$.fragment),b=x(),ct(w.$$.fragment),S=x(),ct(O.$$.fragment),H=x(),ct(M.$$.fragment),V=x(),ct(C.$$.fragment),A=x()},m(t,n){ot(e,t,n),m(t,l,n),ot(r,t,n),m(t,o,n),ot(i,t,n),m(t,a,n),ot(u,t,n),m(t,p,n),ot($,t,n),m(t,g,n),ot(v,t,n),m(t,b,n),ot(w,t,n),m(t,S,n),ot(O,t,n),m(t,H,n),ot(M,t,n),m(t,V,n),ot(C,t,n),m(t,A,n),D=!0},p(t,l){const o={};1048576&l&&(o.$$scope={dirty:l,ctx:t}),!n&&1&l&&(n=!0,o.value=t[0].name,L(()=>n=!1)),e.$set(o);const a={};1048576&l&&(a.$$scope={dirty:l,ctx:t}),!c&&1&l&&(c=!0,a.value=t[0].graphicStill,L(()=>c=!1)),r.$set(a);const p={};1048576&l&&(p.$$scope={dirty:l,ctx:t}),!s&&1&l&&(s=!0,p.value=t[0].graphicSpinning,L(()=>s=!1)),i.$set(p);const m={};1048576&l&&(m.$$scope={dirty:l,ctx:t}),!f&&1&l&&(f=!0,m.value=t[0].maxVelocity,L(()=>f=!1)),u.$set(m);const d={};1048576&l&&(d.$$scope={dirty:l,ctx:t}),!h&&1&l&&(h=!0,d.value=t[0].jumpVelocity,L(()=>h=!1)),$.$set(d);const g={};1048576&l&&(g.$$scope={dirty:l,ctx:t}),!y&&1&l&&(y=!0,g.value=t[0].gravityMultiplier,L(()=>y=!1)),v.$set(g);const x={};1048576&l&&(x.$$scope={dirty:l,ctx:t}),!k&&1&l&&(k=!0,x.value=t[0].fallDamageMultiplier,L(()=>k=!1)),w.$set(x);const b={};1048576&l&&(b.$$scope={dirty:l,ctx:t}),!N&&1&l&&(N=!0,b.value=t[0].maxHealth,L(()=>N=!1)),O.$set(b);const S={};1048576&l&&(S.$$scope={dirty:l,ctx:t}),!j&&1&l&&(j=!0,S.value=t[0].dps,L(()=>j=!1)),M.$set(S);const H={};1048576&l&&(H.$$scope={dirty:l,ctx:t}),!E&&1&l&&(E=!0,H.checked=t[0].canFly,L(()=>E=!1)),C.$set(H)},i(t){D||(Q(e.$$.fragment,t),Q(r.$$.fragment,t),Q(i.$$.fragment,t),Q(u.$$.fragment,t),Q($.$$.fragment,t),Q(v.$$.fragment,t),Q(w.$$.fragment,t),Q(O.$$.fragment,t),Q(M.$$.fragment,t),Q(C.$$.fragment,t),D=!0)},o(t){tt(e.$$.fragment,t),tt(r.$$.fragment,t),tt(i.$$.fragment,t),tt(u.$$.fragment,t),tt($.$$.fragment,t),tt(v.$$.fragment,t),tt(w.$$.fragment,t),tt(O.$$.fragment,t),tt(M.$$.fragment,t),tt(C.$$.fragment,t),D=!1},d(t){it(e,t),t&&d(l),it(r,t),t&&d(o),it(i,t),t&&d(a),it(u,t),t&&d(p),it($,t),t&&d(g),it(v,t),t&&d(b),it(w,t),t&&d(S),it(O,t),t&&d(H),it(M,t),t&&d(V),it(C,t),t&&d(A)}}}function Qe(t){let e,n;return e=new Se({props:{$$slots:{default:[Ye],buttons:[Xe]},$$scope:{ctx:t}}}),e.$on("submit",t[3]),{c(){ct(e.$$.fragment)},m(t,l){ot(e,t,l),n=!0},p(t,n){const l={};1048579&n&&(l.$$scope={dirty:n,ctx:t}),e.$set(l)},i(t){n||(Q(e.$$.fragment,t),n=!0)},o(t){tt(e.$$.fragment,t),n=!1},d(t){it(e,t)}}}function tn(t){let e,n;return e=new Rt({props:{tab:"characters",activeName:t[0].name,store:t[2],$$slots:{default:[Qe]},$$scope:{ctx:t}}}),{c(){ct(e.$$.fragment)},m(t,l){ot(e,t,l),n=!0},p(t,[n]){const l={};1&n&&(l.activeName=t[0].name),4&n&&(l.store=t[2]),1048579&n&&(l.$$scope={dirty:n,ctx:t}),e.$set(l)},i(t){n||(Q(e.$$.fragment,t),n=!0)},o(t){tt(e.$$.fragment,t),n=!1},d(t){it(e,t)}}}const en=t=>20!=t.width||20!=t.height,nn=t=>20!=t.width||20!=t.height;function ln(t,e,n){let l;s(t,Te,t=>n(2,l=t));let r,{params:c={}}=e;function o(t){confirm(`Are you sure you want to delete "${t}"?`)&&(delete l[t],Te.set(l),yt("/level-builder/characters/new"))}let i,a;return t.$$set=t=>{"params"in t&&n(5,c=t.params)},t.$$.update=()=>{var e;32&t.$$.dirty&&n(17,i=decodeURIComponent(c.name)||"new"),131072&t.$$.dirty&&("new"==i?n(0,r={graphicStill:null,graphicSpinning:null,name:"",maxVelocity:20,jumpVelocity:15,gravityMultiplier:1,fallDamageMultiplier:1,dps:120}):(e=i,n(0,r=JSON.parse(JSON.stringify(l[e]))))),131072&t.$$.dirty&&n(1,a="new"==i)},[r,a,l,function(){p(Te,l[r.name]=JSON.parse(JSON.stringify(r)),l),yt("/level-builder/characters/"+encodeURIComponent(r.name))},o,c,function(t){r.name=t,n(0,r)},function(t){r.graphicStill=t,n(0,r)},function(t){r.graphicSpinning=t,n(0,r)},function(t){r.maxVelocity=t,n(0,r)},function(t){r.jumpVelocity=t,n(0,r)},function(t){r.gravityMultiplier=t,n(0,r)},function(t){r.fallDamageMultiplier=t,n(0,r)},function(t){r.maxHealth=t,n(0,r)},function(t){r.dps=t,n(0,r)},function(t){r.canFly=t,n(0,r)},()=>o(r.name)]}class rn extends at{constructor(t){super(),st(this,t,ln,tn,o,{params:5})}}var cn=kt("enemies",{});function on(t){let e;return{c(){e=y("Name")},m(t,n){m(t,e,n)},d(t){t&&d(e)}}}function sn(t){let e;return{c(){e=y("Standing still graphic")},m(t,n){m(t,e,n)},d(t){t&&d(e)}}}function an(t){let e;return{c(){e=y("Max velocity")},m(t,n){m(t,e,n)},d(t){t&&d(e)}}}function un(t){let e;return{c(){e=y("Jump velocity")},m(t,n){m(t,e,n)},d(t){t&&d(e)}}}function fn(t){let e;return{c(){e=y("Gravity multiplier")},m(t,n){m(t,e,n)},d(t){t&&d(e)}}}function pn(t){let e;return{c(){e=y("Fall damage multiplier")},m(t,n){m(t,e,n)},d(t){t&&d(e)}}}function $n(t){let e;return{c(){e=y("Max health")},m(t,n){m(t,e,n)},d(t){t&&d(e)}}}function mn(t){let e;return{c(){e=y("DPS (when in contact with player - we will replace this with abilities later)")},m(t,n){m(t,e,n)},d(t){t&&d(e)}}}function dn(e){let n,l,r;return{c(){n=g("button"),n.textContent="Delete",S(n,"type","button"),S(n,"class","btn btn-danger")},m(t,c){m(t,n,c),l||(r=w(n,"click",e[14]),l=!0)},p:t,d(t){t&&d(n),l=!1,r()}}}function hn(t){let e,n=!t[1]&&dn(t);return{c(){e=g("span"),n&&n.c(),S(e,"slot","buttons")},m(t,l){m(t,e,l),n&&n.m(e,null)},p(t,l){t[1]?n&&(n.d(1),n=null):n?n.p(t,l):(n=dn(t),n.c(),n.m(e,null))},d(t){t&&d(e),n&&n.d()}}}function gn(t){let e,n,l,r,c,o,i,s,a,u,f,p,$,h,g,v,y,b,w,k,S,O,N,H,M;function j(e){t[6].call(null,e)}let V={name:"name",$$slots:{default:[on]},$$scope:{ctx:t}};function C(e){t[7].call(null,e)}void 0!==t[0].name&&(V.value=t[0].name),e=new ue({props:V}),J.push(()=>rt(e,"value",j));let E={filter:xn,$$slots:{default:[sn]},$$scope:{ctx:t}};function A(e){t[8].call(null,e)}void 0!==t[0].graphicStill&&(E.value=t[0].graphicStill),r=new ie({props:E}),J.push(()=>rt(r,"value",C));let D={name:"maxVelocity",min:0,$$slots:{default:[an]},$$scope:{ctx:t}};function _(e){t[9].call(null,e)}void 0!==t[0].maxVelocity&&(D.value=t[0].maxVelocity),i=new he({props:D}),J.push(()=>rt(i,"value",A));let R={name:"jumpVelocity",min:0,$$slots:{default:[un]},$$scope:{ctx:t}};function I(e){t[10].call(null,e)}void 0!==t[0].jumpVelocity&&(R.value=t[0].jumpVelocity),u=new he({props:R}),J.push(()=>rt(u,"value",_));let T={name:"gravityMultiplier",min:0,max:2,step:.1,$$slots:{default:[fn]},$$scope:{ctx:t}};function B(e){t[11].call(null,e)}void 0!==t[0].gravityMultiplier&&(T.value=t[0].gravityMultiplier),$=new he({props:T}),J.push(()=>rt($,"value",I));let F={name:"fallDamageMultiplier",min:0,max:1,step:.1,$$slots:{default:[pn]},$$scope:{ctx:t}};function K(e){t[12].call(null,e)}void 0!==t[0].fallDamageMultiplier&&(F.value=t[0].fallDamageMultiplier),v=new he({props:F}),J.push(()=>rt(v,"value",B));let z={name:"maxHealth",$$slots:{default:[$n]},$$scope:{ctx:t}};function U(e){t[13].call(null,e)}void 0!==t[0].maxHealth&&(z.value=t[0].maxHealth),w=new he({props:z}),J.push(()=>rt(w,"value",K));let P={name:"dps",$$slots:{default:[mn]},$$scope:{ctx:t}};return void 0!==t[0].dps&&(P.value=t[0].dps),O=new he({props:P}),J.push(()=>rt(O,"value",U)),{c(){ct(e.$$.fragment),l=x(),ct(r.$$.fragment),o=x(),ct(i.$$.fragment),a=x(),ct(u.$$.fragment),p=x(),ct($.$$.fragment),g=x(),ct(v.$$.fragment),b=x(),ct(w.$$.fragment),S=x(),ct(O.$$.fragment),H=x()},m(t,n){ot(e,t,n),m(t,l,n),ot(r,t,n),m(t,o,n),ot(i,t,n),m(t,a,n),ot(u,t,n),m(t,p,n),ot($,t,n),m(t,g,n),ot(v,t,n),m(t,b,n),ot(w,t,n),m(t,S,n),ot(O,t,n),m(t,H,n),M=!0},p(t,l){const o={};262144&l&&(o.$$scope={dirty:l,ctx:t}),!n&&1&l&&(n=!0,o.value=t[0].name,L(()=>n=!1)),e.$set(o);const a={};262144&l&&(a.$$scope={dirty:l,ctx:t}),!c&&1&l&&(c=!0,a.value=t[0].graphicStill,L(()=>c=!1)),r.$set(a);const p={};262144&l&&(p.$$scope={dirty:l,ctx:t}),!s&&1&l&&(s=!0,p.value=t[0].maxVelocity,L(()=>s=!1)),i.$set(p);const m={};262144&l&&(m.$$scope={dirty:l,ctx:t}),!f&&1&l&&(f=!0,m.value=t[0].jumpVelocity,L(()=>f=!1)),u.$set(m);const d={};262144&l&&(d.$$scope={dirty:l,ctx:t}),!h&&1&l&&(h=!0,d.value=t[0].gravityMultiplier,L(()=>h=!1)),$.$set(d);const g={};262144&l&&(g.$$scope={dirty:l,ctx:t}),!y&&1&l&&(y=!0,g.value=t[0].fallDamageMultiplier,L(()=>y=!1)),v.$set(g);const x={};262144&l&&(x.$$scope={dirty:l,ctx:t}),!k&&1&l&&(k=!0,x.value=t[0].maxHealth,L(()=>k=!1)),w.$set(x);const b={};262144&l&&(b.$$scope={dirty:l,ctx:t}),!N&&1&l&&(N=!0,b.value=t[0].dps,L(()=>N=!1)),O.$set(b)},i(t){M||(Q(e.$$.fragment,t),Q(r.$$.fragment,t),Q(i.$$.fragment,t),Q(u.$$.fragment,t),Q($.$$.fragment,t),Q(v.$$.fragment,t),Q(w.$$.fragment,t),Q(O.$$.fragment,t),M=!0)},o(t){tt(e.$$.fragment,t),tt(r.$$.fragment,t),tt(i.$$.fragment,t),tt(u.$$.fragment,t),tt($.$$.fragment,t),tt(v.$$.fragment,t),tt(w.$$.fragment,t),tt(O.$$.fragment,t),M=!1},d(t){it(e,t),t&&d(l),it(r,t),t&&d(o),it(i,t),t&&d(a),it(u,t),t&&d(p),it($,t),t&&d(g),it(v,t),t&&d(b),it(w,t),t&&d(S),it(O,t),t&&d(H)}}}function vn(t){let e,n;return e=new Se({props:{$$slots:{default:[gn],buttons:[hn]},$$scope:{ctx:t}}}),e.$on("submit",t[3]),{c(){ct(e.$$.fragment)},m(t,l){ot(e,t,l),n=!0},p(t,n){const l={};262147&n&&(l.$$scope={dirty:n,ctx:t}),e.$set(l)},i(t){n||(Q(e.$$.fragment,t),n=!0)},o(t){tt(e.$$.fragment,t),n=!1},d(t){it(e,t)}}}function yn(t){let e,n;return e=new Rt({props:{tab:"enemies",activeName:t[0].name,store:t[2],$$slots:{default:[vn]},$$scope:{ctx:t}}}),{c(){ct(e.$$.fragment)},m(t,l){ot(e,t,l),n=!0},p(t,[n]){const l={};1&n&&(l.activeName=t[0].name),4&n&&(l.store=t[2]),262147&n&&(l.$$scope={dirty:n,ctx:t}),e.$set(l)},i(t){n||(Q(e.$$.fragment,t),n=!0)},o(t){tt(e.$$.fragment,t),n=!1},d(t){it(e,t)}}}const xn=t=>20!=t.width||20!=t.height;function bn(t,e,n){let l;s(t,cn,t=>n(2,l=t));let r,{params:c={}}=e;function o(t){confirm(`Are you sure you want to delete "${t}"?`)&&(delete l[t],cn.set(l),yt("/level-builder/enemies/new"))}let i,a;return t.$$set=t=>{"params"in t&&n(5,c=t.params)},t.$$.update=()=>{var e;32&t.$$.dirty&&n(15,i=decodeURIComponent(c.name)||"new"),32768&t.$$.dirty&&("new"==i?n(0,r={graphicStill:null,name:"",maxVelocity:20,jumpVelocity:15,gravityMultiplier:1,fallDamageMultiplier:1,dps:120}):(e=i,n(0,r=JSON.parse(JSON.stringify(l[e]))))),32768&t.$$.dirty&&n(1,a="new"==i)},[r,a,l,function(){p(cn,l[r.name]=JSON.parse(JSON.stringify(r)),l),yt("/level-builder/enemies/"+encodeURIComponent(r.name))},o,c,function(t){r.name=t,n(0,r)},function(t){r.graphicStill=t,n(0,r)},function(t){r.maxVelocity=t,n(0,r)},function(t){r.jumpVelocity=t,n(0,r)},function(t){r.gravityMultiplier=t,n(0,r)},function(t){r.fallDamageMultiplier=t,n(0,r)},function(t){r.maxHealth=t,n(0,r)},function(t){r.dps=t,n(0,r)},()=>o(r.name)]}class wn extends at{constructor(t){super(),st(this,t,bn,yn,o,{params:5})}}function kn(t,e,n){const l=t.slice();return l[9]=e[n],l}function Sn(t){let e,n,l,r,c,o;function i(...e){return t[6](t[9],...e)}return n=new Mt({props:{name:t[1][t[9]].graphicStill}}),{c(){e=g("div"),ct(n.$$.fragment),l=x(),S(e,"class","svelte-1773jdu"),j(e,"active",t[0].indexOf(t[9])>-1)},m(t,s){m(t,e,s),ot(n,e,null),$(e,l),r=!0,c||(o=w(e,"click",i),c=!0)},p(l,r){t=l;const c={};2&r&&(c.name=t[1][t[9]].graphicStill),n.$set(c),3&r&&j(e,"active",t[0].indexOf(t[9])>-1)},i(t){r||(Q(n.$$.fragment,t),r=!0)},o(t){tt(n.$$.fragment,t),r=!1},d(t){t&&d(e),it(n),c=!1,o()}}}function On(t){let e,n,l,r,c;const o=t[5].default,i=a(o,t,t[4],null),s=i||function(t){let e;return{c(){e=y("Characters")},m(t,n){m(t,e,n)},d(t){t&&d(e)}}}();let u=Object.keys(t[1]),p=[];for(let e=0;e<u.length;e+=1)p[e]=Sn(kn(t,u,e));const v=t=>tt(p[t],1,1,()=>{p[t]=null});return{c(){e=g("div"),n=g("label"),s&&s.c(),l=x(),r=g("div");for(let t=0;t<p.length;t+=1)p[t].c();S(n,"for","graphic"),S(r,"class","options svelte-1773jdu"),S(e,"class","form-group svelte-1773jdu")},m(t,o){m(t,e,o),$(e,n),s&&s.m(n,null),$(e,l),$(e,r);for(let t=0;t<p.length;t+=1)p[t].m(r,null);c=!0},p(t,[e]){if(i&&i.p&&16&e&&f(i,o,t,t[4],e,null,null),7&e){let n;for(u=Object.keys(t[1]),n=0;n<u.length;n+=1){const l=kn(t,u,n);p[n]?(p[n].p(l,e),Q(p[n],1)):(p[n]=Sn(l),p[n].c(),Q(p[n],1),p[n].m(r,null))}for(X(),n=u.length;n<p.length;n+=1)v(n);Y()}},i(t){if(!c){Q(s,t);for(let t=0;t<u.length;t+=1)Q(p[t]);c=!0}},o(t){tt(s,t),p=p.filter(Boolean);for(let t=0;t<p.length;t+=1)tt(p[t]);c=!1},d(t){t&&d(e),s&&s.d(t),h(p,t)}}}function Nn(t,e,n){let l,r;s(t,St,t=>n(8,l=t)),s(t,Te,t=>n(1,r=t));let{value:c=[]}=e,{filter:o=null}=e;function i(t){n(0,c=c.indexOf(t)>-1?c.filter(e=>e!=t):[...c,t].sort())}let{$$slots:a={},$$scope:u}=e;let f;return t.$$set=t=>{"value"in t&&n(0,c=t.value),"filter"in t&&n(3,o=t.filter),"$$scope"in t&&n(4,u=t.$$scope)},t.$$.update=()=>{264&t.$$.dirty&&(f=Object.keys(l).filter(t=>null==o||o(l[t])))},[c,r,i,o,u,a,t=>i(t)]}class Hn extends at{constructor(t){super(),st(this,t,Nn,On,o,{value:0,filter:3})}}function Mn(e){let n;return{c(){n=g("canvas"),S(n,"width",e[0]),S(n,"height",e[1])},m(t,l){m(t,n,l),e[5](n)},p(t,[e]){1&e&&S(n,"width",t[0]),2&e&&S(n,"height",t[1])},i:t,o:t,d(t){t&&d(n),e[5](null)}}}function jn(t,e,n){let l,r;s(t,St,t=>n(8,l=t)),s(t,Oe,t=>n(9,r=t));let{width:c=0}=e,{height:o=0}=e,{blocks:i=[]}=e,{playing:a=!1}=e;const u={};let f,p;return t.$$set=t=>{"width"in t&&n(0,c=t.width),"height"in t&&n(1,o=t.height),"blocks"in t&&n(3,i=t.blocks),"playing"in t&&n(4,a=t.playing)},t.$$.update=()=>{4&t.$$.dirty&&null!=f&&n(7,p=f.getContext("2d")),987&t.$$.dirty&&null!=i&&null!=c&&null!=o&&null!=p&&(p.clearRect(0,0,c,o),i.forEach(t=>{let e=u[t.name];const c=()=>{const n=()=>p.drawImage(e,t.x,o-t.y-t.height);a?setTimeout(n,100):n()};if(null==e&&(e=new Image,e.src=l[r[t.name].graphic].png,n(6,u[t.name]=e,u)),e.complete)c();else{const t=e.onload;e.onload=()=>{c(),t()}}}))},[c,o,f,i,a,function(t){J[t?"unshift":"push"](()=>{f=t,n(2,f)})}]}class Vn extends at{constructor(t){super(),st(this,t,jn,Mn,o,{width:0,height:1,blocks:3,playing:4})}}function Cn(e){let n,l,r,c,o,i,s,a=e[1]>0?`(${e[1]}%)`:"I am dead.";return{c(){n=g("div"),l=g("div"),r=x(),c=g("div"),o=y(e[0]),i=x(),s=y(a),S(l,"class","filled svelte-1frudy7"),M(l,"width",e[1]+"%"),M(l,"background-color",e[2]),S(c,"class","text svelte-1frudy7"),S(n,"class","health-bar svelte-1frudy7")},m(t,e){m(t,n,e),$(n,l),$(n,r),$(n,c),$(c,o),$(c,i),$(c,s)},p(t,[e]){2&e&&M(l,"width",t[1]+"%"),4&e&&M(l,"background-color",t[2]),1&e&&N(o,t[0]),2&e&&a!==(a=t[1]>0?`(${t[1]}%)`:"I am dead.")&&N(s,a)},i:t,o:t,d(t){t&&d(n)}}}function En(t,e,n){let l,r,c,{percent:o=100}=e,{health:i=100}=e,{maxHealth:s=100}=e;return t.$$set=t=>{"percent"in t&&n(3,o=t.percent),"health"in t&&n(4,i=t.health),"maxHealth"in t&&n(5,s=t.maxHealth)},t.$$.update=()=>{16&t.$$.dirty&&n(0,l=i>0?Math.round(i):0),48&t.$$.dirty&&n(3,o=Math.round(i/s*100,2)),8&t.$$.dirty&&n(1,r=o>0?o:0),8&t.$$.dirty&&n(2,c=o>75?"rgba(24, 197, 33, 0.5)":o>25?"rgba(245, 189, 36, 0.5)":"rgba(223, 22, 22, 0.5)")},[l,r,c,o,i,s]}class An extends at{constructor(t){super(),st(this,t,En,Cn,o,{percent:3,health:4,maxHealth:5})}}function Dn(t){let e,n,l,r,c,o,i;return n=new An({props:{health:t[5],maxHealth:t[6]}}),{c(){e=g("div"),ct(n.$$.fragment),l=x(),r=v("svg"),c=v("path"),o=v("path"),S(c,"d",t[10]),S(c,"fill",t[8]),S(o,"d",t[11]),S(o,"fill",t[9]),S(r,"class","graphic svelte-1x7nj5j"),M(r,"width",t[3]+"px"),M(r,"height",t[4]+"px"),M(r,"transform","scaleX("+t[7]+") rotate("+((t[0]>0?3*t[0]:1.5*t[0])-4)+"deg)"),M(r,"opacity",t[5]<=0?.2:1),S(r,"xmlns","http://www.w3.org/2000/svg"),S(r,"viewBox","0 10 1024 749"),S(r,"version","1.1"),S(r,"xml:space","preserve"),S(e,"class","enemy svelte-1x7nj5j"),M(e,"left",t[1]+"px"),M(e,"bottom",t[2]+"px")},m(t,s){m(t,e,s),ot(n,e,null),$(e,l),$(e,r),$(r,c),$(r,o),i=!0},p(t,[l]){const s={};32&l&&(s.health=t[5]),64&l&&(s.maxHealth=t[6]),n.$set(s),(!i||256&l)&&S(c,"fill",t[8]),(!i||512&l)&&S(o,"fill",t[9]),(!i||8&l)&&M(r,"width",t[3]+"px"),(!i||16&l)&&M(r,"height",t[4]+"px"),(!i||129&l)&&M(r,"transform","scaleX("+t[7]+") rotate("+((t[0]>0?3*t[0]:1.5*t[0])-4)+"deg)"),(!i||32&l)&&M(r,"opacity",t[5]<=0?.2:1),(!i||2&l)&&M(e,"left",t[1]+"px"),(!i||4&l)&&M(e,"bottom",t[2]+"px")},i(t){i||(Q(n.$$.fragment,t),i=!0)},o(t){tt(n.$$.fragment,t),i=!1},d(t){t&&d(e),it(n)}}}function _n(t,e,n){let{vx:l=0}=e,{vy:r=0}=e,{x:c=0}=e,{y:o=0}=e,{width:i=75}=e,{height:s=50}=e,{isBoss:a=!1}=e,{health:u=100}=e,{maxHealth:f=100}=e,{gettingHit:p=!1}=e,$=1;let m,d;return t.$$set=t=>{"vx"in t&&n(12,l=t.vx),"vy"in t&&n(0,r=t.vy),"x"in t&&n(1,c=t.x),"y"in t&&n(2,o=t.y),"width"in t&&n(3,i=t.width),"height"in t&&n(4,s=t.height),"isBoss"in t&&n(13,a=t.isBoss),"health"in t&&n(5,u=t.health),"maxHealth"in t&&n(6,f=t.maxHealth),"gettingHit"in t&&n(14,p=t.gettingHit)},t.$$.update=()=>{4096&t.$$.dirty&&0!=l&&n(7,$=l>0?1:-1),24608&t.$$.dirty&&n(8,m=u<=0?"#333333":p?"#ffffff":a?"#000":"#79cf00"),24608&t.$$.dirty&&n(9,d=u<=0?"#000000":p?"#0000ff":a?"red":"#cf7900")},[r,c,o,i,s,u,f,$,m,d,"M560,128H528a15.99954,15.99954,0,0,0-16,16v80H480V176a15.99954,15.99954,0,0,0-16-16H416V96h48a16.00079,16.00079,0,0,0,16-16V48a15.99954,15.99954,0,0,0-16-16H432a15.99954,15.99954,0,0,0-16,16V64H368a15.99954,15.99954,0,0,0-16,16v48H224V80a15.99954,15.99954,0,0,0-16-16H160V48a15.99954,15.99954,0,0,0-16-16H112A15.99954,15.99954,0,0,0,96,48V80a16.00079,16.00079,0,0,0,16,16h48v64H112a15.99954,15.99954,0,0,0-16,16v48H64V144a15.99954,15.99954,0,0,0-16-16H16A15.99954,15.99954,0,0,0,0,144V272a16.00079,16.00079,0,0,0,16,16H64v80a16.00079,16.00079,0,0,0,16,16h48v80a16.00079,16.00079,0,0,0,16,16h96a16.00079,16.00079,0,0,0,16-16V432a15.99954,15.99954,0,0,0-16-16H192V384H384v32H336a15.99954,15.99954,0,0,0-16,16v32a16.00079,16.00079,0,0,0,16,16h96a16.00079,16.00079,0,0,0,16-16V384h48a16.00079,16.00079,0,0,0,16-16V288h48a16.00079,16.00079,0,0,0,16-16V144A15.99954,15.99954,0,0,0,560,128ZM224,320H160V224h64Zm192,0H352V224h64Z","M160,320h64V224H160Zm192-96v96h64V224Z",l,a,p]}class Jn extends at{constructor(t){super(),st(this,t,_n,Dn,o,{vx:12,vy:0,x:1,y:2,width:3,height:4,isBoss:13,health:5,maxHealth:6,gettingHit:14})}}function Rn(t,e,n){const l=t.slice();return l[21]=e[n],l}function In(t){let e,n,l,r,c,o,i;function s(...e){return t[11](t[21],...e)}return n=new Mt({props:{name:t[5][t[21]].graphic}}),{c(){e=g("button"),ct(n.$$.fragment),l=x(),S(e,"type","button"),S(e,"class",r="btn btn-"+(t[21]==t[2]?"primary":"default")+" svelte-1l04xe1")},m(t,r){m(t,e,r),ot(n,e,null),$(e,l),c=!0,o||(i=w(e,"click",s),o=!0)},p(l,o){t=l;const i={};32&o&&(i.name=t[5][t[21]].graphic),n.$set(i),(!c||36&o&&r!==(r="btn btn-"+(t[21]==t[2]?"primary":"default")+" svelte-1l04xe1"))&&S(e,"class",r)},i(t){c||(Q(n.$$.fragment,t),c=!0)},o(t){tt(n.$$.fragment,t),c=!1},d(t){t&&d(e),it(n),o=!1,i()}}}function Tn(t){let e,n,l,c,o,i,s,a,u,f,p=Object.keys(t[5]),v=[];for(let e=0;e<p.length;e+=1)v[e]=In(Rn(t,p,e));const y=t=>tt(v[t],1,1,()=>{v[t]=null});return s=new Vn({props:{blocks:t[0],width:t[4],height:t[3]}}),{c(){e=g("div"),n=g("div"),l=g("strong"),l.textContent="Blocks",c=x();for(let t=0;t<v.length;t+=1)v[t].c();o=x(),i=g("div"),ct(s.$$.fragment),S(n,"class","tool-picker svelte-1l04xe1"),S(i,"class","level-container svelte-1l04xe1"),M(i,"background",t[1]),M(i,"height",t[3]+"px"),S(e,"class","drawing-tool svelte-1l04xe1")},m(r,p){m(r,e,p),$(e,n),$(n,l),$(n,c);for(let t=0;t<v.length;t+=1)v[t].m(n,null);$(e,o),$(e,i),ot(s,i,null),a=!0,u||(f=[w(i,"mousedown",t[7]),w(i,"mouseup",t[9]),w(i,"mousemove",t[8]),w(i,"contextmenu",k(t[10]))],u=!0)},p(t,[e]){if(100&e){let l;for(p=Object.keys(t[5]),l=0;l<p.length;l+=1){const r=Rn(t,p,l);v[l]?(v[l].p(r,e),Q(v[l],1)):(v[l]=In(r),v[l].c(),Q(v[l],1),v[l].m(n,null))}for(X(),l=p.length;l<v.length;l+=1)y(l);Y()}const l={};1&e&&(l.blocks=t[0]),16&e&&(l.width=t[4]),8&e&&(l.height=t[3]),s.$set(l),(!a||2&e)&&M(i,"background",t[1]),(!a||8&e)&&M(i,"height",t[3]+"px")},i(t){if(!a){for(let t=0;t<p.length;t+=1)Q(v[t]);Q(s.$$.fragment,t),a=!0}},o(t){v=v.filter(Boolean);for(let t=0;t<v.length;t+=1)tt(v[t]);tt(s.$$.fragment,t),a=!1},d(t){t&&d(e),h(v,t),it(s),u=!1,r(f)}}}function Bn(t,e,n){let l;s(t,Oe,t=>n(5,l=t));let{background:r=null}=e,{blocks:c=[]}=e,o=null,i=!1;function a(t){n(2,o=t)}function u(t){if(i){const{x:e,y:r}=f(t);!function(t,e){if(null==o)return function(t,e){n(0,c=p(t,e))}(t,e);l[o];const r={x:t,y:e,width:40,height:40,name:o};n(0,c=[...p(t,e),r])}(e,r)}}function f(t){t.target.closest(".level-container");return{x:40*Math.floor(t.offsetX/40),y:40*Math.floor(($-t.offsetY)/40)}}function p(t,e){return c.filter(n=>n.x!=t||n.y!=e)}let $,m,d;return t.$$set=t=>{"background"in t&&n(1,r=t.background),"blocks"in t&&n(0,c=t.blocks)},t.$$.update=()=>{1&t.$$.dirty&&n(14,m=c.length>0?Math.max(...c.map(t=>t.x+t.width)):0),16384&t.$$.dirty&&n(4,d=Math.max(800,m+500))},n(3,$=800),[c,r,o,$,d,l,a,function(t){(t.altKey||0!==t.button)&&n(2,o=function(t){const{x:e,y:n}=f(t),l=c.find(t=>t.x==e&&t.y==n);return null==l?null:l.name}(t)),i=0===t.button,u(t)},u,function(t){i=!1},function(e){D(t,e)},t=>a(t)]}class Fn extends at{constructor(t){super(),st(this,t,Bn,Tn,o,{background:1,blocks:0})}}var Kn=kt("levels",{});function zn(t){let e,n;return e=new Rt({props:{tab:"levels",activeName:t[0].name,store:t[2],$$slots:{default:[Wn]},$$scope:{ctx:t}}}),{c(){ct(e.$$.fragment)},m(t,l){ot(e,t,l),n=!0},p(t,n){const l={};1&n&&(l.activeName=t[0].name),4&n&&(l.store=t[2]),16387&n&&(l.$$scope={dirty:n,ctx:t}),e.$set(l)},i(t){n||(Q(e.$$.fragment,t),n=!0)},o(t){tt(e.$$.fragment,t),n=!1},d(t){it(e,t)}}}function Ln(t){let e;return{c(){e=y("Name")},m(t,n){m(t,e,n)},d(t){t&&d(e)}}}function Un(t){let e;return{c(){e=y("Which characters can play this level?")},m(t,n){m(t,e,n)},d(t){t&&d(e)}}}function Pn(t){let e;return{c(){e=y("Background (any css background value)")},m(t,n){m(t,e,n)},d(t){t&&d(e)}}}function Gn(e){let n,l,r;return{c(){n=g("button"),n.textContent="Delete",S(n,"type","button"),S(n,"class","btn btn-danger")},m(t,c){m(t,n,c),l||(r=w(n,"click",e[4]),l=!0)},p:t,d(t){t&&d(n),l=!1,r()}}}function qn(t){let e,n=!t[1]&&Gn(t);return{c(){e=g("span"),n&&n.c(),S(e,"slot","buttons")},m(t,l){m(t,e,l),n&&n.m(e,null)},p(t,l){t[1]?n&&(n.d(1),n=null):n?n.p(t,l):(n=Gn(t),n.c(),n.m(e,null))},d(t){t&&d(e),n&&n.d()}}}function Zn(t){let e,n,l,r,c,o,i,s,a,u,f,p,$,h;function g(e){t[6].call(null,e)}let v={name:"name",$$slots:{default:[Ln]},$$scope:{ctx:t}};function y(e){t[7].call(null,e)}void 0!==t[0].name&&(v.value=t[0].name),e=new ue({props:v}),J.push(()=>rt(e,"value",g));let b={name:"playableCharacters",$$slots:{default:[Un]},$$scope:{ctx:t}};function w(e){t[8].call(null,e)}void 0!==t[0].playableCharacters&&(b.value=t[0].playableCharacters),r=new Hn({props:b}),J.push(()=>rt(r,"value",y));let k={name:"background",$$slots:{default:[Pn]},$$scope:{ctx:t}};function S(e){t[9].call(null,e)}function O(e){t[10].call(null,e)}void 0!==t[0].background&&(k.value=t[0].background),i=new ue({props:k}),J.push(()=>rt(i,"value",w));let N={background:t[0].background};return void 0!==t[0].blocks&&(N.blocks=t[0].blocks),void 0!==t[0].enemies&&(N.enemies=t[0].enemies),u=new Fn({props:N}),J.push(()=>rt(u,"blocks",S)),J.push(()=>rt(u,"enemies",O)),{c(){ct(e.$$.fragment),l=x(),ct(r.$$.fragment),o=x(),ct(i.$$.fragment),a=x(),ct(u.$$.fragment),$=x()},m(t,n){ot(e,t,n),m(t,l,n),ot(r,t,n),m(t,o,n),ot(i,t,n),m(t,a,n),ot(u,t,n),m(t,$,n),h=!0},p(t,l){const o={};16384&l&&(o.$$scope={dirty:l,ctx:t}),!n&&1&l&&(n=!0,o.value=t[0].name,L(()=>n=!1)),e.$set(o);const a={};16384&l&&(a.$$scope={dirty:l,ctx:t}),!c&&1&l&&(c=!0,a.value=t[0].playableCharacters,L(()=>c=!1)),r.$set(a);const $={};16384&l&&($.$$scope={dirty:l,ctx:t}),!s&&1&l&&(s=!0,$.value=t[0].background,L(()=>s=!1)),i.$set($);const m={};1&l&&(m.background=t[0].background),!f&&1&l&&(f=!0,m.blocks=t[0].blocks,L(()=>f=!1)),!p&&1&l&&(p=!0,m.enemies=t[0].enemies,L(()=>p=!1)),u.$set(m)},i(t){h||(Q(e.$$.fragment,t),Q(r.$$.fragment,t),Q(i.$$.fragment,t),Q(u.$$.fragment,t),h=!0)},o(t){tt(e.$$.fragment,t),tt(r.$$.fragment,t),tt(i.$$.fragment,t),tt(u.$$.fragment,t),h=!1},d(t){it(e,t),t&&d(l),it(r,t),t&&d(o),it(i,t),t&&d(a),it(u,t),t&&d($)}}}function Wn(t){let e,n;return e=new Se({props:{$$slots:{default:[Zn],buttons:[qn]},$$scope:{ctx:t}}}),e.$on("submit",t[3]),{c(){ct(e.$$.fragment)},m(t,l){ot(e,t,l),n=!0},p(t,n){const l={};16387&n&&(l.$$scope={dirty:n,ctx:t}),e.$set(l)},i(t){n||(Q(e.$$.fragment,t),n=!0)},o(t){tt(e.$$.fragment,t),n=!1},d(t){it(e,t)}}}function Xn(t){let e,n,l=null!=t[0]&&zn(t);return{c(){l&&l.c(),e=b()},m(t,r){l&&l.m(t,r),m(t,e,r),n=!0},p(t,[n]){null!=t[0]?l?(l.p(t,n),1&n&&Q(l,1)):(l=zn(t),l.c(),Q(l,1),l.m(e.parentNode,e)):l&&(X(),tt(l,1,1,()=>{l=null}),Y())},i(t){n||(Q(l),n=!0)},o(t){tt(l),n=!1},d(t){l&&l.d(t),t&&d(e)}}}function Yn(t,e,n){let l;s(t,Kn,t=>n(2,l=t));let r,c,o,{params:i={}}=e;return t.$$set=t=>{"params"in t&&n(5,i=t.params)},t.$$.update=()=>{32&t.$$.dirty&&n(11,c=decodeURIComponent(i.name)||"new"),2048&t.$$.dirty&&("new"==c?async function(){n(0,r=null),await K(),n(0,r={name:"",playableCharacters:[],background:"rgb(135, 206, 235)",blocks:[],enemies:[]})}():async function(t){n(0,r=null),await K(),n(0,r=JSON.parse(JSON.stringify(l[t])))}(c)),2048&t.$$.dirty&&n(1,o="new"==c)},[r,o,l,function(){p(Kn,l[r.name]=JSON.parse(JSON.stringify(r)),l),yt("/level-builder/levels/"+encodeURIComponent(r.name))},function(){confirm(`Are you sure you want to delete "${r.name}"?`)&&(delete l[r.name],Kn.set(l),yt("/level-builder/levels/new"))},i,function(t){r.name=t,n(0,r)},function(t){r.playableCharacters=t,n(0,r)},function(t){r.background=t,n(0,r)},function(t){r.blocks=t,n(0,r)},function(t){r.enemies=t,n(0,r)}]}class Qn extends at{constructor(t){super(),st(this,t,Yn,Xn,o,{params:5})}}function tl(e){let n,l;return n=new bt({props:{routes:e[0],prefix:el}}),{c(){ct(n.$$.fragment)},m(t,e){ot(n,t,e),l=!0},p:t,i(t){l||(Q(n.$$.fragment,t),l=!0)},o(t){tt(n.$$.fragment,t),l=!1},d(t){it(n,t)}}}const el="/level-builder";function nl(t,e,n){let{params:l={}}=e;const r={"/":ne,"/blocks/:name?":Ie,"/characters/:name?":rn,"/enemies/:name?":wn,"/levels/:name?":Qn};let c;return t.$$set=t=>{"params"in t&&n(1,l=t.params)},t.$$.update=()=>{2&t.$$.dirty&&(c=l.tab||"art")},[r,l]}class ll extends at{constructor(t){super(),st(this,t,nl,tl,o,{params:1})}}function rl(e){let n,l,r,c,o,i,s,a,u=e[0].name+"";return{c(){n=g("div"),l=g("p"),r=y("Level: "),c=y(u),o=x(),i=g("p"),s=y("Score: "),a=y(e[1]),S(l,"class","svelte-kfamtf"),S(i,"class","svelte-kfamtf"),S(n,"class","svelte-kfamtf")},m(t,e){m(t,n,e),$(n,l),$(l,r),$(l,c),$(n,o),$(n,i),$(i,s),$(i,a)},p(t,[e]){1&e&&u!==(u=t[0].name+"")&&N(c,u),2&e&&N(a,t[1])},i:t,o:t,d(t){t&&d(n)}}}function cl(t,e,n){let{level:l={}}=e,{score:r=0}=e;return t.$$set=t=>{"level"in t&&n(0,l=t.level),"score"in t&&n(1,r=t.score)},[l,r]}class ol extends at{constructor(t){super(),st(this,t,cl,rl,o,{level:0,score:1})}}function il(t,e,n){const l=t.slice();return l[1]=e[n],l}function sl(e){let n,l,r,c,o,i,s,a,u=e[1].key+"",f=e[1].action+"";return{c(){n=g("tr"),l=g("td"),r=y(u),c=x(),o=g("td"),i=y("= "),s=y(f),a=x(),S(l,"class","svelte-1d0wu93"),S(o,"class","svelte-1d0wu93")},m(t,e){m(t,n,e),$(n,l),$(l,r),$(n,c),$(n,o),$(o,i),$(o,s),$(n,a)},p:t,d(t){t&&d(n)}}}function al(e){let n,l,r=e[0],c=[];for(let t=0;t<r.length;t+=1)c[t]=sl(il(e,r,t));return{c(){n=g("div"),l=g("table");for(let t=0;t<c.length;t+=1)c[t].c();S(l,"class","svelte-1d0wu93"),S(n,"class","instructions svelte-1d0wu93")},m(t,e){m(t,n,e),$(n,l);for(let t=0;t<c.length;t+=1)c[t].m(l,null)},p(t,[e]){if(1&e){let n;for(r=t[0],n=0;n<r.length;n+=1){const o=il(t,r,n);c[n]?c[n].p(o,e):(c[n]=sl(o),c[n].c(),c[n].m(l,null))}for(;n<c.length;n+=1)c[n].d(1);c.length=r.length}},i:t,o:t,d(t){t&&d(n),h(c,t)}}}function ul(t){return[[{key:"Left + Right Arrow",action:"Move"},{key:"Space",action:"Jump"},{key:"R",action:"Spin Attack / Shield"},{key:"Q",action:"Heal"},{key:"Enter",action:"Restart"}]]}class fl extends at{constructor(t){super(),st(this,t,ul,al,o,{})}}function pl(t){let e,n,l;const r=t[6].default,c=a(r,t,t[5],null);return{c(){e=g("div"),n=g("div"),c&&c.c(),M(n,"position","absolute"),M(n,"left",-t[0]+"px"),M(n,"bottom",-t[1]+"px"),M(n,"height",t[3]+"px"),S(e,"class","viewport svelte-cjx02"),M(e,"width",t[2]+"px"),M(e,"height",t[3]+"px"),M(e,"background",t[4])},m(t,r){m(t,e,r),$(e,n),c&&c.m(n,null),l=!0},p(t,[o]){c&&c.p&&32&o&&f(c,r,t,t[5],o,null,null),(!l||1&o)&&M(n,"left",-t[0]+"px"),(!l||2&o)&&M(n,"bottom",-t[1]+"px"),(!l||8&o)&&M(n,"height",t[3]+"px"),(!l||4&o)&&M(e,"width",t[2]+"px"),(!l||8&o)&&M(e,"height",t[3]+"px"),(!l||16&o)&&M(e,"background",t[4])},i(t){l||(Q(c,t),l=!0)},o(t){tt(c,t),l=!1},d(t){t&&d(e),c&&c.d(t)}}}function $l(t,e,n){let{x:l=0}=e,{y:r=0}=e,{width:c=0}=e,{height:o=0}=e,{background:i=null}=e,{$$slots:s={},$$scope:a}=e;return t.$$set=t=>{"x"in t&&n(0,l=t.x),"y"in t&&n(1,r=t.y),"width"in t&&n(2,c=t.width),"height"in t&&n(3,o=t.height),"background"in t&&n(4,i=t.background),"$$scope"in t&&n(5,a=t.$$scope)},[l,r,c,o,i,a,s]}class ml extends at{constructor(t){super(),st(this,t,$l,pl,o,{x:0,y:1,width:2,height:3,background:4})}}function dl(t){let e,n;return{c(){e=g("img"),S(e,"class","graphic"),e.src!==(n=t[6].png)&&S(e,"src",n),S(e,"alt",t[0]),M(e,"width",t[6].width*gl+"px"),M(e,"height",t[6].height*gl+"px"),M(e,"transform","scaleX("+t[5]+") rotate("+t[7]+"deg)")},m(t,n){m(t,e,n)},p(t,l){64&l&&e.src!==(n=t[6].png)&&S(e,"src",n),1&l&&S(e,"alt",t[0]),64&l&&M(e,"width",t[6].width*gl+"px"),64&l&&M(e,"height",t[6].height*gl+"px"),160&l&&M(e,"transform","scaleX("+t[5]+") rotate("+t[7]+"deg)")},d(t){t&&d(e)}}}function hl(t){let e,n,l,r;n=new An({props:{health:t[4],maxHealth:t[1]}});let c=null!=t[6]&&dl(t);return{c(){e=g("div"),ct(n.$$.fragment),l=x(),c&&c.c(),S(e,"class","player svelte-wdnc19"),M(e,"left",t[3]+"px"),M(e,"bottom",t[2]+"px")},m(t,o){m(t,e,o),ot(n,e,null),$(e,l),c&&c.m(e,null),r=!0},p(t,[l]){const o={};16&l&&(o.health=t[4]),2&l&&(o.maxHealth=t[1]),n.$set(o),null!=t[6]?c?c.p(t,l):(c=dl(t),c.c(),c.m(e,null)):c&&(c.d(1),c=null),(!r||8&l)&&M(e,"left",t[3]+"px"),(!r||4&l)&&M(e,"bottom",t[2]+"px")},i(t){r||(Q(n.$$.fragment,t),r=!0)},o(t){tt(n.$$.fragment,t),r=!1},d(t){t&&d(e),it(n),c&&c.d()}}}const gl=2;function vl(t,e,n){let l;s(t,St,t=>n(15,l=t));let r,c,{name:o}=e,{maxHealth:i}=e,{graphicStill:a}=e,{graphicSpinning:u}=e,{vx:f=0}=e,{vy:p=0}=e,{y:$=0}=e,{x:m=0}=e,{health:d}=e,{spinning:h=!1}=e,g=1,v=0,y=null;return t.$$set=t=>{"name"in t&&n(0,o=t.name),"maxHealth"in t&&n(1,i=t.maxHealth),"graphicStill"in t&&n(8,a=t.graphicStill),"graphicSpinning"in t&&n(9,u=t.graphicSpinning),"vx"in t&&n(10,f=t.vx),"vy"in t&&n(11,p=t.vy),"y"in t&&n(2,$=t.y),"x"in t&&n(3,m=t.x),"health"in t&&n(4,d=t.health),"spinning"in t&&n(12,h=t.spinning)},t.$$.update=()=>{37632&t.$$.dirty&&n(6,r=h&&null!=u?l[u]:null!=a?l[a]:null),1024&t.$$.dirty&&0!=f&&n(5,g=f>0?1:-1),28672&t.$$.dirty&&(h?n(14,y=setTimeout(()=>{n(13,v+=30)},25)):clearTimeout(y)),14336&t.$$.dirty&&n(7,c=h?v:-1*(5+(p>0?3*p:1.5*p)))},[o,i,$,m,d,g,r,c,a,u,f,p,h]}class yl extends at{constructor(t){super(),st(this,t,vl,hl,o,{name:0,maxHealth:1,graphicStill:8,graphicSpinning:9,vx:10,vy:11,y:2,x:3,health:4,spinning:12})}}function xl(t){let e,n,l,r,c,o,i,s,a,u,f=t[1].name+"";return{c(){e=g("div"),n=g("h1"),l=y(f),r=y(" is dead now. You really let him down."),c=x(),o=g("h1"),i=y("Final score: "),s=y(t[0]),a=x(),u=g("p"),u.textContent="Press enter or space to restart.",S(n,"class","svelte-1ogvx1s"),S(o,"class","svelte-1ogvx1s"),S(u,"class","svelte-1ogvx1s"),S(e,"class","game-over svelte-1ogvx1s")},m(t,f){m(t,e,f),$(e,n),$(n,l),$(n,r),$(e,c),$(e,o),$(o,i),$(o,s),$(e,a),$(e,u)},p(t,e){2&e&&f!==(f=t[1].name+"")&&N(l,f),1&e&&N(s,t[0])},d(t){t&&d(e)}}}function bl(e){let n,l=e[1]&&xl(e);return{c(){l&&l.c(),n=b()},m(t,e){l&&l.m(t,e),m(t,n,e)},p(t,[e]){t[1]?l?l.p(t,e):(l=xl(t),l.c(),l.m(n.parentNode,n)):l&&(l.d(1),l=null)},i:t,o:t,d(t){l&&l.d(t),t&&d(n)}}}function wl(t,e,n){let{score:l=0}=e,{player:r}=e;return t.$$set=t=>{"score"in t&&n(0,l=t.score),"player"in t&&n(1,r=t.player)},[l,r]}class kl extends at{constructor(t){super(),st(this,t,wl,bl,o,{score:0,player:1})}}const Sl=(t,e)=>Ol(t,e)&&Nl(t,e),Ol=(t,e)=>t.x<e.x+e.width&&t.x+t.width>e.x,Nl=(t,e)=>t.y+t.height>=e.y&&t.y<=e.y+e.height,Hl=(t,e)=>t.y+t.height>e.y&&t.y<e.y+e.height;class Ml{constructor(t,e){this.alive=!0,this.tvx=2,this.width=100,this.height=50,this.x=t,this.y=e,this.vx=0,this.vy=0,this.health=100,this.maxHealth=100,this.jumpVelocity=20,this.fallDamageMultiplier=2,this.score=1,this.dps=10,this.gravityMultiplier=1,this.isBoss=!1,this.grounded=!1}q;tick(t){this.grounded&&(t.x==this.x?this.vx=0:t.x<this.x?this.vx=-this.tvx:this.vx=this.tvx,t.y>this.y+this.height&&(this.vy=this.jumpVelocity,this.y+=1))}onDeath(){}}class jl extends Ml{constructor(t,e){super(t,e),this.health=400,this.maxHealth=400,this.score=5,this.width=400,this.height=300,this.isBoss=!0,this.dps=50}}const{window:Vl}=et;function Cl(t,e,n){const l=t.slice();return l[26]=e[n],l}function El(t){let e,n;return e=new kl({props:{score:t[4],player:t[6]}}),{c(){ct(e.$$.fragment)},m(t,l){ot(e,t,l),n=!0},p(t,n){const l={};16&n&&(l.score=t[4]),64&n&&(l.player=t[6]),e.$set(l)},i(t){n||(Q(e.$$.fragment,t),n=!0)},o(t){tt(e.$$.fragment,t),n=!1},d(t){it(e,t)}}}function Al(t){let n,l;const r=[t[9],{background:t[0].background}];let c={$$slots:{default:[_l]},$$scope:{ctx:t}};for(let t=0;t<r.length;t+=1)c=e(c,r[t]);return n=new ml({props:c}),{c(){ct(n.$$.fragment)},m(t,e){ot(n,t,e),l=!0},p(t,e){const l=513&e?nt(r,[512&e&&lt(t[9]),1&e&&{background:t[0].background}]):{};536871118&e&&(l.$$scope={dirty:e,ctx:t}),n.$set(l)},i(t){l||(Q(n.$$.fragment,t),l=!0)},o(t){tt(n.$$.fragment,t),l=!1},d(t){it(n,t)}}}function Dl(t){let n,l;const r=[t[26]];let c={};for(let t=0;t<r.length;t+=1)c=e(c,r[t]);return n=new Jn({props:c}),{c(){ct(n.$$.fragment)},m(t,e){ot(n,t,e),l=!0},p(t,e){const l=128&e?nt(r,[lt(t[26])]):{};n.$set(l)},i(t){l||(Q(n.$$.fragment,t),l=!0)},o(t){tt(n.$$.fragment,t),l=!1},d(t){it(n,t)}}}function _l(t){let n,l,r,c,o;n=new Vn({props:{blocks:t[1],width:t[2],height:t[3],playing:!0}});let i=t[7],s=[];for(let e=0;e<i.length;e+=1)s[e]=Dl(Cl(t,i,e));const a=t=>tt(s[t],1,1,()=>{s[t]=null}),u=[t[6]];let f={};for(let t=0;t<u.length;t+=1)f=e(f,u[t]);return c=new yl({props:f}),{c(){ct(n.$$.fragment),l=x();for(let t=0;t<s.length;t+=1)s[t].c();r=x(),ct(c.$$.fragment)},m(t,e){ot(n,t,e),m(t,l,e);for(let n=0;n<s.length;n+=1)s[n].m(t,e);m(t,r,e),ot(c,t,e),o=!0},p(t,e){const l={};if(2&e&&(l.blocks=t[1]),4&e&&(l.width=t[2]),8&e&&(l.height=t[3]),n.$set(l),128&e){let n;for(i=t[7],n=0;n<i.length;n+=1){const l=Cl(t,i,n);s[n]?(s[n].p(l,e),Q(s[n],1)):(s[n]=Dl(l),s[n].c(),Q(s[n],1),s[n].m(r.parentNode,r))}for(X(),n=i.length;n<s.length;n+=1)a(n);Y()}const o=64&e?nt(u,[lt(t[6])]):{};c.$set(o)},i(t){if(!o){Q(n.$$.fragment,t);for(let t=0;t<i.length;t+=1)Q(s[t]);Q(c.$$.fragment,t),o=!0}},o(t){tt(n.$$.fragment,t),s=s.filter(Boolean);for(let t=0;t<s.length;t+=1)tt(s[t]);tt(c.$$.fragment,t),o=!1},d(t){it(n,t),t&&d(l),h(s,t),t&&d(r),it(c,t)}}}function Jl(t){let e,n,l,c,o,i,s,a,u,f=t[8]&&El(t),p=null!=t[0]&&null!=t[6]&&Al(t);return c=new ol({props:{level:t[0],score:t[4]}}),i=new fl({}),{c(){e=g("div"),f&&f.c(),n=x(),p&&p.c(),l=x(),ct(c.$$.fragment),o=x(),ct(i.$$.fragment),S(e,"class","game-window svelte-1ihy09s")},m(r,d){m(r,e,d),f&&f.m(e,null),$(e,n),p&&p.m(e,null),$(e,l),ot(c,e,null),$(e,o),ot(i,e,null),t[13](e),s=!0,a||(u=[w(Vl,"keydown",t[10]),w(Vl,"keyup",t[11])],a=!0)},p(t,[r]){t[8]?f?(f.p(t,r),256&r&&Q(f,1)):(f=El(t),f.c(),Q(f,1),f.m(e,n)):f&&(X(),tt(f,1,1,()=>{f=null}),Y()),null!=t[0]&&null!=t[6]?p?(p.p(t,r),65&r&&Q(p,1)):(p=Al(t),p.c(),Q(p,1),p.m(e,l)):p&&(X(),tt(p,1,1,()=>{p=null}),Y());const o={};1&r&&(o.level=t[0]),16&r&&(o.score=t[4]),c.$set(o)},i(t){s||(Q(f),Q(p),Q(c.$$.fragment,t),Q(i.$$.fragment,t),s=!0)},o(t){tt(f),tt(p),tt(c.$$.fragment,t),tt(i.$$.fragment,t),s=!1},d(n){n&&d(e),f&&f.d(),p&&p.d(),it(c),it(i),t[13](null),a=!1,r(u)}}}function Rl(t,e,n){let l,r;s(t,Oe,t=>n(20,l=t)),s(t,St,t=>n(21,r=t));let c,o,i,a,u,f,{level:p=null}=e,{character:$=null}=e,m=0,d=0,h=0,g=!1,v=!0,y=null,x={width:window.innerWidth,height:800},b=!1,w=!1;var k;function S(){n(4,h=0),n(6,u={...$,health:$.maxHealth,tvx:$.maxVelocity,width:2*r[$.graphicStill].width,height:2*r[$.graphicStill].height,x:o[0].x,y:o[0].y+o[0].height+100,vx:0,vy:0,spinning:!1,tick(){u.grounded?n(6,u.vx=b&&!w?-u.tvx:w&&!b?u.tvx:0,u):(b&&!w?n(6,u.vx-=u.tvx/10,u):w&&!b&&n(6,u.vx+=u.tvx/10,u),Math.abs(u.vx)>u.tvx&&n(6,u.vx=u.tvx*(u.vx<0?-1:1),u))}}),n(7,f=[]),n(8,g=!1),null==y&&O()}function O(){if(!g){n(6,u=N(u,!0)),u.tick();const t=x.width/2,e=x.height/2;n(9,x.x=u.x<t?0:u.x>c-t?c-x.width:u.x-t,x),n(9,x.y=u.y<e?0:u.y-e,x),f.some(t=>t.health>0)||(f.length<5?n(7,f=f.concat([1,2,3,4,5].map(t=>new Ml(u.x+200*t,u.y+200)))):n(7,f=[new jl(u.x+200,u.y+200)]));for(let t=0;t<f.length;t++)f[t].alive&&(n(7,f[t]=N(f[t]),f),f[t].tick(u),Sl(u,f[t])&&(u.spinning?(n(7,f[t].gettingHit=!0,f),n(7,f[t].health-=u.dps/60,f)):n(6,u.health-=f[t].dps/60,u)),f[t].health<=0&&(n(7,f[t].alive=!1,f),f[t].onDeath(),n(4,h+=f[t].score)));u.health<=0&&n(8,g=!0)}v&&(y=window.requestAnimationFrame(O))}function N(t,e=!1){const n=o.filter(e=>e.solid&&((t,e)=>t.y>=e.y+e.height&&Ol(t,e))(t,e)).map(t=>t.y+t.height),l=n.length>0?Math.max(...n):-500;if(t.y+=t.vy,t.grounded=t.y<=l,t.grounded?(t.vy<0&&(t.health+=t.vy/10*t.fallDamageMultiplier,t.vy=0),t.y=l):t.y<-200?t.health=0:t.vy-=1,0!=t.vx)if(t.vx>0){let e=t.x+t.vx;const n=o.find(n=>{const l=e+t.width,r=t.x+t.width;return l>n.x&&r<=n.x&&Hl(n,t)});null!=n?e=n.x-t.width:e>c&&(e=c),t.x=e}else if(t.vx<0){let e=t.x+t.vx;const n=o.find(n=>{const l=n.x+n.width;return t.x>=l&&e<l&&Hl(n,t)});null!=n?e=n.x+n.width:e<0&&(e=0),t.x=e<0?0:e}for(let e=0;e<i.length;e++)Sl(t,i[e])&&(t.health-=i[e].dps/60,i[e].throwOnTouch&&(t.vy=20));return t}return k=()=>{n(1,o=p.blocks.sort((t,e)=>t.x>e.x?1:e.x>t.x||t.y>e.y?-1:e.y>t.y?1:0).map(t=>({...t,solid:l[t.name].solid,png:r[l[t.name].graphic].png,dps:l[t.name].dps,throwOnTouch:l[t.name].throwOnTouch}))),c=Math.max(...o.map(t=>t.x+t.width)),i=o.filter(t=>t.dps>0),n(2,m=Math.max(...o.map(t=>t.x+t.width))),n(3,d=800),S()},E().$$.on_mount.push(k),function(t){E().$$.on_destroy.push(t)}(()=>{v=!1,window.cancelAnimationFrame(y)}),t.$$set=t=>{"level"in t&&n(0,p=t.level),"character"in t&&n(12,$=t.character)},[p,o,m,d,h,a,u,f,g,x,function(t){if(!g)switch(t.code){case"ArrowLeft":b=!0;break;case"ArrowRight":w=!0;break;case"Space":(u.grounded||u.canFly)&&n(6,u.vy=u.jumpVelocity,u);break;case"KeyR":n(6,u.spinning=!0,u);break;case"KeyQ":n(6,u.health=u.maxHealth,u)}},function(t){switch(t.code){case"ArrowLeft":b=!1;break;case"ArrowRight":w=!1;break;case"Space":g&&S();break;case"KeyR":n(6,u.spinning=!1,u);break;case"Enter":case"NumpadEnter":S();break;default:console.log(t.code)}},$,function(t){J[t?"unshift":"push"](()=>{a=t,n(5,a)})}]}class Il extends at{constructor(t){super(),st(this,t,Rl,Jl,o,{level:0,character:12})}}function Tl(t,e,n){const l=t.slice();return l[4]=e[n],l}function Bl(t,e,n){const l=t.slice();return l[3]=e[n],l}function Fl(t){let e,n,l=t[0],r=[];for(let e=0;e<l.length;e+=1)r[e]=Ll(Bl(t,l,e));const c=t=>tt(r[t],1,1,()=>{r[t]=null});return{c(){e=g("div");for(let t=0;t<r.length;t+=1)r[t].c();S(e,"class","list-group")},m(t,l){m(t,e,l);for(let t=0;t<r.length;t+=1)r[t].m(e,null);n=!0},p(t,n){if(39&n){let o;for(l=t[0],o=0;o<l.length;o+=1){const c=Bl(t,l,o);r[o]?(r[o].p(c,n),Q(r[o],1)):(r[o]=Ll(c),r[o].c(),Q(r[o],1),r[o].m(e,null))}for(X(),o=l.length;o<r.length;o+=1)c(o);Y()}},i(t){if(!n){for(let t=0;t<l.length;t+=1)Q(r[t]);n=!0}},o(t){r=r.filter(Boolean);for(let t=0;t<r.length;t+=1)tt(r[t]);n=!1},d(t){t&&d(e),h(r,t)}}}function Kl(t){let e,n,l,r,c,o,i,s,a,u,f,p,h,v,b,k,O;return v=new Il({props:{level:t[1][t[3]],character:t[2][t[4]]}}),{c(){e=g("div"),n=g("button"),n.textContent="< Change level",l=x(),r=g("a"),c=y("Edit "),o=y(t[3]),s=x(),a=g("a"),u=y("Edit "),f=y(t[4]),h=x(),ct(v.$$.fragment),S(n,"type","button"),S(n,"class","btn btn-info"),S(r,"href",i="#/level-builder/levels/"+encodeURIComponent(t[3])),S(r,"class","btn btn-secondary"),S(r,"role","button"),S(a,"href",p="#/level-builder/characters/"+encodeURIComponent(t[4])),S(a,"class","btn btn-secondary"),S(a,"role","button"),S(e,"class","mb-2")},m(i,p){m(i,e,p),$(e,n),$(e,l),$(e,r),$(r,c),$(r,o),$(e,s),$(e,a),$(a,u),$(a,f),m(i,h,p),ot(v,i,p),b=!0,k||(O=w(n,"click",t[6]),k=!0)},p(t,e){(!b||8&e)&&N(o,t[3]),(!b||8&e&&i!==(i="#/level-builder/levels/"+encodeURIComponent(t[3])))&&S(r,"href",i),(!b||16&e)&&N(f,t[4]),(!b||16&e&&p!==(p="#/level-builder/characters/"+encodeURIComponent(t[4])))&&S(a,"href",p);const n={};10&e&&(n.level=t[1][t[3]]),20&e&&(n.character=t[2][t[4]]),v.$set(n)},i(t){b||(Q(v.$$.fragment,t),b=!0)},o(t){tt(v.$$.fragment,t),b=!1},d(t){t&&d(e),t&&d(h),it(v,t),k=!1,O()}}}function zl(t){let e,n,l,r,c,o,i,s,a,u,f=t[3]+"",p=t[4]+"";function h(...e){return t[7](t[3],t[4],...e)}return n=new Mt({props:{name:t[2][t[4]].graphicStill}}),{c(){e=g("div"),ct(n.$$.fragment),l=x(),r=y(f),c=y(" as "),o=y(p),i=x(),S(e,"class","list-group-item list-group-item-action")},m(t,f){m(t,e,f),ot(n,e,null),$(e,l),$(e,r),$(e,c),$(e,o),$(e,i),s=!0,a||(u=w(e,"click",h),a=!0)},p(e,l){t=e;const c={};7&l&&(c.name=t[2][t[4]].graphicStill),n.$set(c),(!s||1&l)&&f!==(f=t[3]+"")&&N(r,f),(!s||3&l)&&p!==(p=t[4]+"")&&N(o,p)},i(t){s||(Q(n.$$.fragment,t),s=!0)},o(t){tt(n.$$.fragment,t),s=!1},d(t){t&&d(e),it(n),a=!1,u()}}}function Ll(t){let e,n,l=t[1][t[3]].playableCharacters,r=[];for(let e=0;e<l.length;e+=1)r[e]=zl(Tl(t,l,e));const c=t=>tt(r[t],1,1,()=>{r[t]=null});return{c(){for(let t=0;t<r.length;t+=1)r[t].c();e=b()},m(t,l){for(let e=0;e<r.length;e+=1)r[e].m(t,l);m(t,e,l),n=!0},p(t,n){if(39&n){let o;for(l=t[1][t[3]].playableCharacters,o=0;o<l.length;o+=1){const c=Tl(t,l,o);r[o]?(r[o].p(c,n),Q(r[o],1)):(r[o]=zl(c),r[o].c(),Q(r[o],1),r[o].m(e.parentNode,e))}for(X(),o=l.length;o<r.length;o+=1)c(o);Y()}},i(t){if(!n){for(let t=0;t<l.length;t+=1)Q(r[t]);n=!0}},o(t){r=r.filter(Boolean);for(let t=0;t<r.length;t+=1)tt(r[t]);n=!1},d(t){h(r,t),t&&d(e)}}}function Ul(t){let e,n,l,r;const c=[Kl,Fl],o=[];function i(t,e){return null!=t[3]?0:1}return e=i(t),n=o[e]=c[e](t),{c(){n.c(),l=b()},m(t,n){o[e].m(t,n),m(t,l,n),r=!0},p(t,[r]){let s=e;e=i(t),e===s?o[e].p(t,r):(X(),tt(o[s],1,1,()=>{o[s]=null}),Y(),n=o[e],n||(n=o[e]=c[e](t),n.c()),Q(n,1),n.m(l.parentNode,l))},i(t){r||(Q(n),r=!0)},o(t){tt(n),r=!1},d(t){o[e].d(t),t&&d(l)}}}function Pl(t,e,n){let l,r,c,o;function i(t,e){n(3,c=t),n(4,o=e)}s(t,Kn,t=>n(1,l=t)),s(t,Te,t=>n(2,r=t));let a;return t.$$.update=()=>{2&t.$$.dirty&&n(0,a=Object.keys(l).sort())},[a,l,r,c,o,i,()=>n(3,c=null),(t,e)=>i(t,e)]}class Gl extends at{constructor(t){super(),st(this,t,Pl,Ul,o,{})}}function ql(e){let n;return{c(){n=g("h1"),n.textContent="Page not found"},m(t,e){m(t,n,e)},p:t,i:t,o:t,d(t){t&&d(n)}}}class Zl extends at{constructor(t){super(),st(this,t,null,ql,o,{})}}function Wl(t){let e;return{c(){e=g("li"),e.innerHTML='<a class="nav-link" href="#/play">Play!</a>',S(e,"class","nav-item")},m(t,n){m(t,e,n)},d(t){t&&d(e)}}}function Xl(t){let e,n,l,r,c,o,i,s=t[0]&&Wl();return o=new bt({props:{routes:t[1]}}),{c(){e=g("ul"),n=g("li"),n.innerHTML='<a class="nav-link" href="#/level-builder">Level Builder</a>',l=x(),s&&s.c(),r=x(),c=g("main"),ct(o.$$.fragment),S(n,"class","nav-item"),S(e,"class","nav"),S(c,"class","svelte-1ten5ne")},m(t,a){m(t,e,a),$(e,n),$(e,l),s&&s.m(e,null),m(t,r,a),m(t,c,a),ot(o,c,null),i=!0},p(t,[n]){t[0]?s||(s=Wl(),s.c(),s.m(e,null)):s&&(s.d(1),s=null)},i(t){i||(Q(o.$$.fragment,t),i=!0)},o(t){tt(o.$$.fragment,t),i=!1},d(t){t&&d(e),s&&s.d(),t&&d(r),t&&d(c),it(o)}}}function Yl(t,e,n){let l;s(t,Kn,t=>n(2,l=t));const r={"/level-builder/:tab?/:name?":ll,"/play":Gl,"*":Zl};let c;return t.$$.update=()=>{4&t.$$.dirty&&n(0,c=Object.keys(l).length>0)},[c,r]}return new class extends at{constructor(t){super(),st(this,t,Yl,Xl,o,{})}}({target:document.body,props:{name:"world"}})}();
//# sourceMappingURL=bundle.js.map
